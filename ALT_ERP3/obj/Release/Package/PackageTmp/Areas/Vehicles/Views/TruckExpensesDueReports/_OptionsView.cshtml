@model ALT_ERP3.Areas.Vehicles.Models.TruckExpensesDueVM

<style>
    .ModalLabel {
        font-weight: bold !important;
        color: black !important;
        padding: 3px !important;
    }

    .td1 {
        width: 500px !important;
    }

    .td2 {
        width: 500px !important;
    }

    .td3 {
        width: 500px !important;
    }
</style>

<script src="@Url.Content("~/Content/js/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Content/js/jquery.constrain.js")" type="text/javascript"></script>
<link href="~/Content/bootstrap-multiselect.css" rel="stylesheet" />
<script src="~/Content/bootstrap-multiselect.js"></script>
<script type="text/javascript">
    $(document).ready(function () {
        debugger;

        @*$('#ToDate').val('@Model.ToDate');*@

        $("#txtReportName").val("");
        if ('@Model.ReportName' != "") {
            $("#txtReportName").val('@Model.ReportName');
        }

        if ('@Model.Days' != "")
        {
            $("#Days").val('@Model.Days');
        } else {
            $("#Days").val("0");
        }

        if (parseInt($("#Days").val())>0) {
            $("#Days").removeAttr("disabled");
            $("#chkExtendDays").prop("checked", true);
            $("#ToDate").prop("disabled", true);
        } else {
            $("#Days").attr("disabled", "disabled");
            $("#chkExtendDays").prop("checked", false);
            $("#ToDate").prop("disabled", false);
        }

        $('#Vehicle').val('');
        var CommonValue = "";
        if ('@Model.Vehicle' != "") {
            $.each('@Model.Vehicle'.split(','), function (idx, val) {
                $(".VehicleL option[value='" + val + "']").attr("selected", true);
                CommonValue += "'" + val + "',";
            });
            CommonValue = CommonValue.toString().substring(0, CommonValue.length - 1);
            $('#Vehicle').val(CommonValue);
        }

        $('#CC').change(function () {
            if ($('#CC').is(":checked")) {
                $(".CCMaster").removeClass("hidden");
                $(".EXPMaster").addClass("hidden");

            }
            else {
                $(".CCMaster").addClass("hidden");
                $(".EXPMaster").removeClass("hidden");
            }
        });
        $('#EXP').change(function () {
            if ($('#CC').is(":checked")) {
                $(".CCMaster").removeClass("hidden");
                $(".EXPMaster").addClass("hidden");
            }
            else {
                $(".CCMaster").addClass("hidden");
                $(".EXPMaster").removeClass("hidden");
            }
        });

        if ('@Model.CostcenterReq'=="True" || '@Model.CostcenterReq'=="true") {
            $("#CC").prop("checked", true);
            $("#EXP").prop("checked", false);
            $(".CCMaster").removeClass("hidden");
            $(".EXPMaster").addClass("hidden");

            $('#Costcenter').val('');
            CommonValue = "";
            if ('@Model.Expenses' != "") {
                $.each('@Model.Expenses'.split(','), function (idx, val) {
                    $(".CostcenterL option[value='" + val + "']").attr("selected", true);
                    CommonValue += "'" + val + "',";
                });
                CommonValue = CommonValue.toString().substring(0, CommonValue.length - 1);
                $('#Costcenter').val(CommonValue);
            }
        }
        else
        {
            $("#CC").prop("checked", false);
            $("#EXP").prop("checked", true);
            $(".CCMaster").addClass("hidden");
            $(".EXPMaster").removeClass("hidden");

            $('#Expenses').val('');
            CommonValue = "";
            if ('@Model.Expenses' != "") {
                $.each('@Model.Expenses'.split(','), function (idx, val) {
                    $(".ExpensesL option[value='" + val + "']").attr("selected", true);
                    CommonValue += "'" + val + "',";
                });
                CommonValue = CommonValue.toString().substring(0, CommonValue.length - 1);
                $('#Expenses').val(CommonValue);
            }
        }


        $('#ItemGroup').val('');
        var CommonValue = "";
        if ('@Model.ItemGroup' != "") {
            $.each('@Model.ItemGroup'.split(','), function (idx, val) {
                $(".ItemGroupL option[value='" + val + "']").attr("selected", true);
                CommonValue += "'" + val + "',";
            });
            CommonValue = CommonValue.toString().substring(0, CommonValue.length - 1);
            $('#ItemGroup').val(CommonValue);
        }
        $('#ItemMaster').val('');
        var CommonValue = "";
        if ('@Model.ItemMaster' != "") {
            $.each('@Model.ItemMaster'.split(','), function (idx, val) {
                $(".ItemMasterL option[value='" + val + "']").attr("selected", true);
                CommonValue += "'" + val + "',";
            });
            CommonValue = CommonValue.toString().substring(0, CommonValue.length - 1);
            $('#ItemMaster').val(CommonValue);
        }
        $('.VehicleL,.ExpensesL,.ItemMasterL,.ItemGroupL,.CostcenterL').multiselect({
            includeSelectAllOption: true,
            enableFiltering: true,
            enableCaseInsensitiveFiltering: true,
            filterPlaceholder: 'Search for something...',
            buttonWidth: '235',
            numberDisplayed: 1,
            nonSelectedText: 'Select Item',
        });
        $(".VehicleL").change(function () {
            debugger;
            $('#Vehicle').val('');
            var selected = "";
            $(".VehicleL :selected").each(function () {
                selected+=("'" + $(this).val() + "',");
            });
            selected = selected.toString().substring(0, selected.length - 1);
            $('#Vehicle').val(selected)
            return false;
        });
        $(".ExpensesL").change(function () {

            $('#Expenses').val('');
            var selected = "";
            $(".ExpensesL :selected").each(function () {
                selected+=("'" + $(this).val() + "',");
            });
            selected = selected.toString().substring(0, selected.length - 1);
            $('#Expenses').val(selected)
            return false;
        });
        $(".CostcenterL").change(function () {

            $('#Costcenter').val('');
            var selected = "";
            $(".CostcenterL :selected").each(function () {
                selected+=("'" + $(this).val() + "',");
            });
            selected = selected.toString().substring(0, selected.length - 1);
            $('#Costcenter').val(selected)
            return false;
        });
        $(".ItemMasterL").change(function () {

            $('#ItemMaster').val('');
            var selected = "";
            $(".ItemMasterL :selected").each(function () {
                selected += ("'" + $(this).val() + "',");
            });
            selected = selected.toString().substring(0, selected.length - 1);
            $('#ItemMaster').val(selected)
            return false;
        });
        $(".ItemGroupL").change(function () {

            $('#ItemGroup').val('');
            var selected = "";
            $(".ItemGroupL :selected").each(function () {
                selected += ("'" + $(this).val() + "',");
            });
            selected = selected.toString().substring(0, selected.length - 1);
            $('#ItemGroup').val(selected)
            return false;
        });
        $('#SubmitSaveReport').click(function (event) {
            event.preventDefault();
            $('#SaveReportName').modal('show');
        });
        $('#btnopnFormat').click(function(event){
            event.preventDefault();
            var ModelData = {};
            ModelData["ViewDataId"] ="TruckExpensesDueReports";
            var DTO = { Model: ModelData };
            var url = '@Url.Action("GetReportFormat")';
            $.ajax({
                type: "POST",
                dataType: "json",
                data: JSON.stringify(DTO),
                cache: false,
                url: url,
                contentType: "application/json;charset=utf-8",
                beforeSend: function () {
                    $('.spinner').show();
                },
                success: function (data) {
                    $("#ErrorMessage").hide();
                    $('.spinner').hide();
                    $('#updTfatsearch').modal('show');
                    $('#updTfatsearchDiv').html(data.Html);
                },
                error: function () {
                    alert("Error occured while processing your request.");
                }
            });
        });

    });

</script>


<table class="table table-striped table-bordered">
    <thead>
    </thead>
    <tbody>
        <tr>
            <td class="td1">
                <label class=" ModalLabel  control-label" style="width:auto;">Vehicles<span style="color:red;"> * </span> :</label>
                @Html.ListBoxFor(x => x.VehicleL, Model.VehicleList, new { @class = "VehicleL", @id = "VehicleL" })
            </td>
            <td class="td2">
                <div style="display:flex;float:right;">
                    <input type="radio" class="form-control VAll" name="ExpensesType" id="CC" value="CC" style="height:20px;width:35px;" /><label class=" bold control-label" style="color:black;padding: 3px 0px 0px 0px;" title="Cost Center"> CC</label>
                    <input type="radio" class="form-control VHire" name="ExpensesType" id="EXP" value="EXP" style="height:20px;width:35px;" /><label class=" bold control-label" style="color:black;padding: 3px 0px 0px 0px;" title="All Expenses"> Exp</label>
                </div>
                <div class="EXPMaster">
                    <label class=" ModalLabel  control-label" style="width:auto;">Expenses<span style="color:red;"> * </span> :</label>
                    @Html.ListBoxFor(x => x.ExpensesL, Model.ExpensesList, new { @class = "ExpensesL", @id = "ExpensesL" })
                </div>
                <div class="CCMaster">
                    <label class=" ModalLabel  control-label" style="width:auto;">Cost Center<span style="color:red;"> * </span> :</label>
                    @Html.ListBoxFor(x => x.CostcenterL, Model.Costcenters, new { @class = "CostcenterL", @id = "CostcenterL" })
                </div>
            </td>
            <td class="td3">
                <label class=" ModalLabel  control-label" style="width:auto;">Item Group :</label>
                @Html.ListBoxFor(x => x.ItemGroupL, Model.ItemGroups, new { @class = "ItemGroupL", @id = "ItemGroupL" })
            </td>
        </tr>
        <tr>
            <td class="td1">
                
                <label class=" ModalLabel  control-label" style="width:auto;">Item Master :</label>
                @Html.ListBoxFor(x => x.ItemMasterL, Model.ItemMasters, new { @class = "ItemMasterL", @id = "ItemMasterL" })
            </td>
            <td class="td1"></td>
        </tr>
    </tbody>
</table>


