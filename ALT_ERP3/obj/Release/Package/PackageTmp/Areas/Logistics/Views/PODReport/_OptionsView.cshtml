@model ALT_ERP3.Areas.Logistics.Models.PODReportVM

<style>
    .ModalLabel {
        font-weight: bold !important;
        color: black !important;
        padding: 3px !important;
    }

    .td1 {
        width: 500px !important;
    }

    .td2 {
        width: 500px !important;
    }

    .td3 {
        width: 500px !important;
    }

    /*.btn-group, .btn-group-vertical {
        float: right;
    }*/
</style>

<script src="@Url.Content("~/Content/js/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Content/js/jquery.constrain.js")" type="text/javascript"></script>
<link href="~/Content/bootstrap-multiselect.css" rel="stylesheet" />
<script src="~/Content/bootstrap-multiselect.js"></script>
<script type="text/javascript">
    $(document).ready(function () {
        ClickPara();
        $('#Fromdate').val('@Model.FromDate');
        $('#ToDate').val('@Model.ToDate');

        $("#txtReportName").val("");
        if ('@Model.ReportName' != "") {
            $("#txtReportName").val('@Model.ReportName');
        }

         if ('@Model.ReportTypeL' != "")
         {

             $(".PODRTR,.PODSTSTR").addClass("hidden");
             $(".PODRTRTD1,.PODRTRTD2,.PODRTRTD3,.PODSTRTD1,.PODSTRTD2,.PODSTRTD3,.PODSTRTD4").addClass("hidden");
            $("#ReportTypeL").val('@Model.ReportTypeL');
            if ('@Model.ReportTypeL' == "PODReport")
            {
                $(".PODRTR").removeClass("hidden");
                if ('@Model.PODReceivedBranch_Direct' == "PODRECEIVEDBranch")
                {
                    $("#PODRECEIVEDBranch").prop("checked", true)
                    $("#PODRECEIVEDDirect").prop("checked", false)
                    $("#PODReceivedBranch_Direct").val("PODRECEIVEDBranch");

                    $(".PODRTRTD1,.PODRTRTD2").removeClass("hidden");
                }
                else
                {
                    $("#PODRECEIVEDBranch").prop("checked", false)
                    $("#PODRECEIVEDDirect").prop("checked", true)
                    $("#PODReceivedBranch_Direct").val("PODRECEIVEDDirect");

                    $(".PODRTRTD3").removeClass("hidden");
                }
            }
            else if ('@Model.ReportTypeL' == "PODSendReport")
            {

                $(".PODSTRTD4").removeClass("hidden");
                if ('@Model.PODSendCustomer_Branch_File' == "PODSENDBranch")
                {
                    $("#PODSENDBranch").prop("checked", true);
                    $("#PODSENDCustomer").prop("checked", false);
                    $("#PODSENDFile").prop("checked", false);
                    $("#PODSendCustomer_Branch_File").val("PODSENDBranch");

                    $(".PODSTRTD1").removeClass("hidden");

                }
                else if ('@Model.PODSendCustomer_Branch_File' == "PODSENDCustomer")
                {
                    $("#PODSENDBranch").prop("checked", false);
                    $("#PODSENDCustomer").prop("checked", true);
                    $("#PODSENDFile").prop("checked", false);
                    $("#PODSendCustomer_Branch_File").val("PODSENDCustomer");

                    $(".PODSTRTD2").removeClass("hidden");
                }
                else
                {
                    $("#PODSENDBranch").prop("checked", false);
                    $("#PODSENDCustomer").prop("checked", false);
                    $("#PODSENDFile").prop("checked", true);
                    $("#PODSendCustomer_Branch_File").val("PODSENDFile");

                    $(".PODSTRTD3").removeClass("hidden");
                }
            }
            else if ('@Model.ReportTypeL' == "PODStatusReport")
            {
                $(".PODSTSTR").removeClass("hidden");
                if ('@Model.PODStatusActive_Closed_All' == "PODSTATUSAll")
                {
                    $("#PODSTATUSAll").prop("checked", true)
                    $("#PODSTATUSActive,#PODSTATUSClosed").prop("checked", false)
                    $("#PODStatusActive_Closed_All").val("PODSTATUSAll");
                }
                else if ('@Model.PODStatusActive_Closed_All' == "PODSTATUSActive")
                {
                    $("#PODSTATUSActive").prop("checked", true)
                    $("#PODSTATUSAll,#PODSTATUSClosed").prop("checked", false)
                    $("#PODStatusActive_Closed_All").val("PODSTATUSActive");
                }
                else
                {
                    $("#PODSTATUSClosed").prop("checked", true)
                    $("#PODSTATUSAll,#PODSTATUSActive").prop("checked", false)
                    $("#PODStatusActive_Closed_All").val("PODSTATUSClosed");
                }

            }


            $("#Ledger").html($(".ReportTypeL option:selected").text());
        }

        // POD Received Parameters

        $(".ReportTypeL").change(function () {
            $("#EntryBranch,#FromBranch,#ToBranch").val("");
            $(".FromBranchL,.EntryBranchL,.ToBranch,.CustomerL").multiselect('clearSelection');
            $(".PODRTR,.PODSTR,.PODSTSTR").addClass("hidden");
            $(".PODRTRTD1,.PODRTRTD2,.PODRTRTD3,.PODSTRTD1,.PODSTRTD2,.PODSTRTD3,.PODSTRTD4").addClass("hidden");
            $("#ReportTypeL").val(this.value);
            if (this.value == "PODReport") {
                $(".PODRTR").removeClass("hidden");
                $("#PODRECEIVEDBranch").prop("checked", true)
                $("#PODRECEIVEDDirect").prop("checked", false)
                $(".PODRTRTD1,.PODRTRTD2").removeClass("hidden");
                $("#PODStatusActive_Closed_All,#PODSendCustomer_Branch_File").val("");
                $("#PODReceivedBranch_Direct").val("PODRECEIVEDBranch");
            }
            else if (this.value == "PODSendReport") {
                $(".PODSTRTD4").removeClass("hidden");
                $("#PODSENDBranch").prop("checked", true);
                $("#PODSENDCustomer").prop("checked", false);
                $("#PODSENDFile").prop("checked", false);
                $(".PODSTRTD1").removeClass("hidden");
                $("#PODStatusActive_Closed_All,#PODReceivedBranch_Direct").val("");
                $("#PODSendCustomer_Branch_File").val("PODSENDBranch");
            }
            else if (this.value == "PODStatusReport") {
               $(".PODSTSTR").removeClass("hidden");
                $("#PODSTATUSAll").prop("checked", true)
                $("#PODSTATUSActive,#PODSTATUSClosed").prop("checked", false);
                $("#PODSendCustomer_Branch_File,#PODReceivedBranch_Direct").val("");
                $("#PODStatusActive_Closed_All").val("PODSTATUSAll");
            }
        });

        $("input[name$='PODRECEIVED']").change(function () {
            $("#EntryBranch,#FromBranch,#ToBranch").val("");
            $(".FromBranchL,.EntryBranchL,.ToBranch,.CustomerL").multiselect('clearSelection');
            var GetChrgesName = this.value;
            $("#PODReceivedBranch_Direct").val(GetChrgesName);
            $("#PODSendCustomer_Branch_File,#PODStatusActive_Closed_All").val("");
            if (GetChrgesName == "PODRECEIVEDBranch")
            {
                $(".PODRTRTD1,.PODRTRTD2").removeClass("hidden");
                $(".PODRTRTD3").addClass("hidden");
            }
            else
            {
                $(".PODRTRTD1,.PODRTRTD2").addClass("hidden");
                $(".PODRTRTD3").removeClass("hidden");
            }
        });

        $("#PODRFromBranchL").change(function () {
            $('#FromBranch').val('');
            var selected = "";

            $("#PODRFromBranchL :selected").each(function () {
                selected += ("'" + $(this).val() + "',");
            });
            selected = selected.toString().substring(0, selected.length - 1);
            $('#FromBranch').val(selected);
            return false;
        });

        $("#PODRToBranchL").change(function () {
            $('#ToBranch').val('');
            var selected = "";

            $("#PODRToBranchL :selected").each(function () {
                selected += ("'" + $(this).val() + "',");
            });
            selected = selected.toString().substring(0, selected.length - 1);
            $('#ToBranch').val(selected);
            return false;
        });

        $("#PODREntryBranchL").change(function () {
            $('#EntryBranch').val('');
            var selected = "";

            $("#PODREntryBranchL :selected").each(function () {
                selected += ("'" + $(this).val() + "',");
            });
            selected = selected.toString().substring(0, selected.length - 1);
            $('#EntryBranch').val(selected);
            return false;
        });

        // POD Received Parameters

        // POD Send Parameters

        $("input[name$='PODSEND']").change(function () {
            $("#EntryBranch,#FromBranch,#ToBranch").val("");
            $(".FromBranchL,.EntryBranchL,.ToBranch,.CustomerL").multiselect('clearSelection');
            var GetChrgesName = this.value;
            $("#PODSendCustomer_Branch_File").val(GetChrgesName);
            $("#PODStatusActive_Closed_All,#PODReceivedBranch_Direct").val("");
            if (GetChrgesName == "PODSENDBranch")
            {
                $(".PODSTRTD1").removeClass("hidden");
                $(".PODSTRTD2,.PODSTRTD3").addClass("hidden");
            }
            else if (GetChrgesName == "PODSENDCustomer") {
                $(".PODSTRTD2").removeClass("hidden");
                $(".PODSTRTD1,.PODSTRTD3").addClass("hidden");
            }
            else
            {
                $(".PODSTRTD3").removeClass("hidden");
                $(".PODSTRTD1,.PODSTRTD2").addClass("hidden");
            }
        });

        $("#PODSBFromBranchL").change(function () {
            $('#FromBranch').val('');
            var selected = "";

            $("#PODSBFromBranchL :selected").each(function () {
                selected += ("'" + $(this).val() + "',");
            });
            selected = selected.toString().substring(0, selected.length - 1);
            $('#FromBranch').val(selected);
            return false;
        });

        $("#PODSBToBranchL").change(function () {
            $('#ToBranch').val('');
            var selected = "";

            $("#PODSBToBranchL :selected").each(function () {
                selected += ("'" + $(this).val() + "',");
            });
            selected = selected.toString().substring(0, selected.length - 1);
            $('#ToBranch').val(selected);
            return false;
        });

        $("#PODSCEntryBranchL").change(function () {
            $('#EntryBranch').val('');
            var selected = "";

            $("#PODSCEntryBranchL :selected").each(function () {
                selected += ("'" + $(this).val() + "',");
            });
            selected = selected.toString().substring(0, selected.length - 1);
            $('#EntryBranch').val(selected);
            return false;
        });

        $("#PODSFEntryBranchL").change(function () {
            $('#EntryBranch').val('');
            var selected = "";

            $("#PODSFEntryBranchL :selected").each(function () {
                selected += ("'" + $(this).val() + "',");
            });
            selected = selected.toString().substring(0, selected.length - 1);
            $('#EntryBranch').val(selected);
            return false;
        });

        $("#CustomerL").change(function () {
            $('#Customer').val('');
            var selected = "";

            $("#CustomerL :selected").each(function () {
                selected += ("'" + $(this).val() + "',");
            });
            selected = selected.toString().substring(0, selected.length - 1);
            $('#Customer').val(selected);
            return false;
        });

        // POD Received Parameters

        // POD Status Parameters

        $("input[name$='PODSTATUS']").change(function () {
            $("#EntryBranch,#FromBranch,#ToBranch").val("");
            $(".FromBranchL,.EntryBranchL,.ToBranch,.CustomerL").multiselect('clearSelection');
            var GetChrgesName = this.value;
            $("#PODStatusActive_Closed_All").val(GetChrgesName);
            $("#PODReceivedBranch_Direct,#PODSendCustomer_Branch_File").val("");
        });

        $("#EntryBranchL").change(function () {
            $('#EntryBranch').val('');
            var selected = "";

            $("#EntryBranchL :selected").each(function () {
                selected += ("'" + $(this).val() + "',");
            });
            selected = selected.toString().substring(0, selected.length - 1);
            $('#EntryBranch').val(selected);
            return false;
        });

        // POD Status Parameters




        $('#EntryBranch').val('');
        var CommonValue = "";
        if ('@Model.EntryBranch' != "") {
            $.each('@Model.EntryBranch'.split(','), function (idx, val) {
                $(".EntryBranchL option[value='" + val + "']").attr("selected", true);
                CommonValue += "'" + val + "',";
            });
            CommonValue = CommonValue.toString().substring(0, CommonValue.length - 1);
            $('#EntryBranch').val(CommonValue);
        }
        $('#FromBranch').val('');
        var CommonValue = "";
        if ('@Model.FromBranch' != "") {
            $.each('@Model.FromBranch'.split(','), function (idx, val) {
                $(".FromBranchL option[value='" + val + "']").attr("selected", true);
                CommonValue += "'" + val + "',";
            });
            CommonValue = CommonValue.toString().substring(0, CommonValue.length - 1);
            $('#FromBranch').val(CommonValue);
        }

        $("#ToBranch").val("");
        CommonValue = "";
        if ('@Model.ToBranch' != "") {
            $.each('@Model.ToBranch'.split(','), function (idx, val) {
                $(".ToBranchL option[value='" + val + "']").attr("selected", true);
                CommonValue += "'" + val + "',";
            });
            CommonValue = CommonValue.toString().substring(0, CommonValue.length - 1);
            $('#ToBranch').val(CommonValue);
        }

        $('#btnopnFormat').click(function(event){
            event.preventDefault();
            var ModelData = {};
            ModelData["ViewDataId"] = $("#ReportTypeL").val();
            var DTO = { Model: ModelData };
            var url = '@Url.Action("GetReportFormat")';
            $.ajax({
                type: "POST",
                dataType: "json",
                data: JSON.stringify(DTO),
                cache: false,
                url: url,
                contentType: "application/json;charset=utf-8",
                beforeSend: function () {
                    $('.spinner').show();
                },
                success: function (data) {
                    $("#ErrorMessage").hide();
                    $('.spinner').hide();
                    $('#updTfatsearch').modal('show');
                    $('#updTfatsearchDiv').html(data.Html);
                },
                error: function () {
                    alert("Error occured while processing your request.");
                }
            });
        });

        $('#SubmitSaveReport').click(function (event) {
            event.preventDefault();
            $('#SaveReportName').modal('show');
        });



        $('.EntryBranchL,.FromBranchL,.ToBranchL,.CustomerL').multiselect({
            includeSelectAllOption: true,
            enableFiltering: true,
            enableCaseInsensitiveFiltering: true,
            filterPlaceholder: 'Search for something...',
            buttonWidth: '235',
            numberDisplayed: 1,
            nonSelectedText: 'Select Item',
        });




    });

</script>


<table class="table table-striped table-bordered">
    <thead>
    </thead>
    <tbody>
        <tr>
            <td class="td2" colspan="3">
                @Html.DropDownListFor(x => x.ReportTypeL, Model.ReportsType, new { @class = "form-control ReportTypeL", @style = "float: right;width:auto;display: inline-table;" })
                <label class=" ModalLabel  control-label" style="width:auto;float:right;">Report Type :</label>
            </td>

        </tr>

        <tr class="PODRTR">
            <td class="td1" colspan="2">
                <label class=" ModalLabel  control-label" style="width:auto;"></label>
                <div style="display:flex;float:left;">
                    <input type="radio" class="form-control " name="PODRECEIVED" id="PODRECEIVEDBranch" value="PODRECEIVEDBranch" style="height:20px;width:35px;" /><label class=" bold control-label" style="color:black;padding: 3px 0px 0px 0px;"> Branch Through</label>
                    <input type="radio" class="form-control " name="PODRECEIVED" id="PODRECEIVEDDirect" value="PODRECEIVEDDirect" style="height:20px;width:35px;" /><label class=" bold control-label" style="color:black;padding: 3px 0px 0px 0px;"> Direct Through</label>
                </div>
            </td>
            <td class="td3"></td>
        </tr>
        <tr class="PODRTR">
            <td class="td1">
                <div class="PODRTRTD1">
                    <label class=" ModalLabel  control-label" style="width:auto;">From Branch :</label>
                    @Html.ListBoxFor(x => x.FromBranchL, Model.Branches, new { @class = "FromBranchL", @id = "PODRFromBranchL" })
                </div>
            </td>
            <td class="td2">
                <div class="PODRTRTD2">
                    <label class=" ModalLabel  control-label" style="width:auto;">To Branch :</label>
                    @Html.ListBoxFor(x => x.ToBranchL, Model.Branches, new { @class = "ToBranchL", @id = "PODRToBranchL" })
                </div>
            </td>
            <td class="td3">
                <div class="PODRTRTD3">
                    <label class=" ModalLabel  control-label" style="width:auto;">Entry Branch :</label>
                    @Html.ListBoxFor(x => x.EntryBranchL, Model.Branches, new { @class = "EntryBranchL", @id = "PODREntryBranchL" })
                </div>
            </td>
        </tr>

        <tr class="PODSTRTD4">
            <td class="td1" colspan="2">
                <label class=" ModalLabel  control-label" style="width:auto;"></label>
                <div style="display:flex;float:left;">
                    <input type="radio" class="form-control " name="PODSEND" id="PODSENDBranch" value="PODSENDBranch" style="height:20px;width:35px;" /><label class=" bold control-label" style="color:black;padding: 3px 0px 0px 0px;"> Branch Through</label>
                    <input type="radio" class="form-control " name="PODSEND" id="PODSENDCustomer" value="PODSENDCustomer" style="height:20px;width:35px;" /><label class=" bold control-label" style="color:black;padding: 3px 0px 0px 0px;"> Customer Through</label>
                    <input type="radio" class="form-control " name="PODSEND" id="PODSENDFile" value="PODSENDFile" style="height:20px;width:35px;" /><label class=" bold control-label" style="color:black;padding: 3px 0px 0px 0px;"> File </label>
                </div>
            </td>
            <td class="td3"></td>
        </tr>
        <tr class="PODSTR PODSTRTD1">
            <td class="td1">
                <label class=" ModalLabel  control-label" style="width:auto;">From Branch :</label>
                @Html.ListBoxFor(x => x.FromBranchL, Model.Branches, new { @class = "FromBranchL", @id = "PODSBFromBranchL" })
            </td>
            <td class="td2">
                <label class=" ModalLabel  control-label" style="width:auto;">To Branch :</label>
                @Html.ListBoxFor(x => x.ToBranchL, Model.Branches, new { @class = "ToBranchL", @id = "PODSBToBranchL" })
            </td>
            <td class="td3"></td>
        </tr>
        <tr class="PODSTR PODSTRTD2">
            <td class="td1">
                <label class=" ModalLabel  control-label" style="width:auto;">Entry Branch :</label>
                @Html.ListBoxFor(x => x.EntryBranchL, Model.Branches, new { @class = "EntryBranchL", @id = "PODSCEntryBranchL" })
            </td>
            <td class="td2">
                <label class=" ModalLabel  control-label" style="width:auto;">Customer :</label>
                @Html.ListBoxFor(x => x.CustomerL, Model.Customers, new { @class = "CustomerL", @id = "CustomerL" })
            </td>
            <td class="td3"></td>
        </tr>
        <tr class="PODSTR PODSTRTD3">
            <td class="td1">
                <label class=" ModalLabel  control-label" style="width:auto;">Entry Branch :</label>
                @Html.ListBoxFor(x => x.EntryBranchL, Model.Branches, new { @class = "EntryBranchL", @id = "PODSFEntryBranchL" })
            </td>
            <td class="td2"></td>
            <td class="td3"></td>
        </tr>

        <tr class="PODSTSTR">
            <td class="td1" colspan="2">
                <label class=" ModalLabel  control-label" style="width:auto;"></label>
                <div style="display:flex;float:left;">
                    <input type="radio" class="form-control " name="PODSTATUS" id="PODSTATUSAll" value="PODSTATUSAll" style="height:20px;width:35px;" /><label class=" bold control-label" style="color:black;padding: 3px 0px 0px 0px;"> All</label>
                    <input type="radio" class="form-control " name="PODSTATUS" id="PODSTATUSActive" value="PODSTATUSActive" style="height:20px;width:35px;" /><label class=" bold control-label" style="color:black;padding: 3px 0px 0px 0px;"> Active</label>
                    <input type="radio" class="form-control " name="PODSTATUS" id="PODSTATUSClosed" value="PODSTATUSClosed" style="height:20px;width:35px;" /><label class=" bold control-label" style="color:black;padding: 3px 0px 0px 0px;"> Closed </label>
                </div>
            </td>
            <td class="td3"></td>
        </tr>
        <tr class="PODSTSTR">
            <td class="td1">
                <label class=" ModalLabel  control-label" style="width:auto;">Entry Branch :</label>
                @Html.ListBoxFor(x => x.EntryBranchL, Model.Branches, new { @class = "EntryBranchL", @id = "EntryBranchL" })
            </td>
            <td class="td2"></td>
            <td class="td3"></td>
        </tr>

    </tbody>
</table>
