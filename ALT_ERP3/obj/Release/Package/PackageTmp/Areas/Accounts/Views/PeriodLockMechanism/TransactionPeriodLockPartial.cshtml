@model ALT_ERP3.Areas.Accounts.Models.PeriodLockVM
@{
    ViewBag.Title = "Transaction Message Rules";
}
<script>
    $(document).ready(function () {
        $('.Horizontal').click(function () {
            debugger;
            //alert(this.id);
            var ID = parseInt(this.id);
            var i = ID - 1;
            var Count = 0;
            $('#tabledatapick2 tbody tr').each(function () {
                var tds = $(this).find('td');
                if (tds.find("input[id='chk" + i + "']").is(':checked')) {
                    ++Count;
                }
            });
            if (Count == 12) {
                $('#tabledatapick2 tbody tr').each(function () {
                    var tds = $(this).find('td');
                    tds.find("input[id='chk" + i + "']").prop("checked", false);
                });
            }
            else {
                $('#tabledatapick2 tbody tr').each(function () {
                    var tds = $(this).find('td');
                    tds.find("input[id='chk" + i + "']").prop("checked", true);
                });
            }


        });

        $('.Vertical').click(function () {

            var Count = 0;
            var Row = $(this).closest('tr');
            debugger;
            var MonthName = Row.find(".Vertical").text();
            debugger;


            //alert(Row.find(':checkbox:checked').length);
            Count = Row.find(':checkbox:checked').length;

            


            
            if (Count >= 28) {
                $(this).closest('tr').each(function () {
                    var tds = $(this).find('td');
                    tds.find("input[type='checkbox']").prop("checked", false);
                })
            }
            else {
                $(this).closest('tr').each(function () {
                    var tds = $(this).find('td');
                    tds.find("input[type='checkbox']").prop("checked", true);
                })
            }




            //var xcess = $('#AllxEdit').is(':checked');
            //if (xcess == true) {

            //    $('#tabledatapick2 tbody tr').each(function () {
            //        var tds = $(this).find('td');
            //        tds.find("input[id='MessageRules_xEdit']").is(':checked');

            //    })
            //}
            //else {
            //    $('#tabledatapick2 tbody tr').each(function () {
            //        var tds = $(this).find('td');
            //        tds.find("input[id='MessageRules_xEdit']").prop("checked", false);

            //    })
            //}
        });

    });
</script>

@if (Model.mRightList != null)
{
    <table id="tabledatapick2" class="zui-table" style="font-size:12pt;width: max-content;">
        <thead>
            @*<tr role="row">
                    <th style="vertical-align:inherit;"></th>
                    <th style="vertical-align:inherit;"></th>
                    @for (int i = 1; i <= 31; i++)
                    {
                        <th style="padding: 2px 6px;vertical-align:inherit;"><input id="AllxAdd" value="@i" name="AllxAdd" style="width:20px;height:20px;" type="checkbox"></th>

                    }
                </tr>*@
            <tr role="row">
                <th style="vertical-align:inherit;">Months / Days</th>
                @*<th style="vertical-align:inherit;"></th>*@
                @for (int i = 1; i <= 31; i++)
                {
                    <th style="vertical-align:inherit;" class="Horizontal" id="@i">@i</th>
                    @*<th style="vertical-align:inherit;"><input id="AllxEdit" value="@i" name="AllxEdit" style="width:20px;height:20px;" type="checkbox"></th>*@

                }
            </tr>
        </thead>
        <tbody>

            @for (int i = 0; i < Model.mRightList.Count; i++)
            {
                <tr style="font-family:Tahoma;font-size:12pt;border: solid 1px lightgray;">
                    @for (int k = 0; k < Model.mRightList[i].mRightList.Count; k++)
                    {
                        if (k == 0)
                        {
                            <td style="text-align:left;" class="Vertical">@Model.mRightList[i].MonthName </td>
                            @*<td style="text-align:center;"><input id="AllxEdit" value="@i" name="AllxEdit" style="width:20px;height:20px;" type="checkbox"></td>*@

                        }
                        <td class="hidden">@Html.TextBoxFor(m => Model.mRightList[i].mRightList[k].Date, new { @value = Model.mRightList[i].mRightList[k].Date, @readonly = "readonly", @id = "chkdate" + k })</td>
                        <td style="text-align:center;">@Html.CheckBoxFor(m => Model.mRightList[i].mRightList[k].Lock, new { @value = Model.mRightList[i].mRightList[k].Lock, @style = "height: 20px;width: 20px; ", @readonly = "readonly", @id = "chk" + k })</td>
                    }
                    @for (int m = 0; m < 31 - Model.mRightList[i].mRightList.Count; m++)
                    {
                        <td class="hidden"></td>
                        <td style="text-align:center;"></td>
                    }
                </tr>
            }
        </tbody>
    </table>
}