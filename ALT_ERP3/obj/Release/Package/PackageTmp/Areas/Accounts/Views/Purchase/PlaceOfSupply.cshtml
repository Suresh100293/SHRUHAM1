@model ALT_ERP3.PurchaseVM
@using Common;
<div class="form-group" style="margin-top:5px;">
    <script>
            $(document).ready(function () {
                LoadPlaceOfSupply()

                $('#PlaceOfSupply').change(function (event) {
                    event.preventDefault();
                    CurrRateChange();
                    GetGSTCalculation()
                    Calculation()
                });
            });
      function LoadPlaceOfSupply() {
           var url = '@Url.Action("GetPlaceOfSupply")';
            $('#PlaceOfSupply').select2({
                minimumInputLength: 0,
                placeholder: 'Search',
                ajax:
                    {
                        url: url,
                        dataType: 'json',
                        quietMillis: 100,
                        enableFiltering: true,
                        allowClear: true,
                        minimumInputLength: 0,
                        multiple: true,
                        width: 300,
                        data: function (term, page) {
                            return {
                                types: ["exercise"],
                                limit: -1,
                                term: term
                            };
                        },
                        results: function (data, page) {
                            clientObj = JSON.stringify(data);
                            return {
                                results: $.map(data, function (item) {
                                    return {
                                        text: item.Name, id: item.Code
                                    }
                                })
                            };
                        }
                    },
                initSelection: function (element, callback) {
                    var data = { id: '@Model.PlaceOfSupply', text: '@Model.PlaceOfSupply' };
                    callback(data);
                },
                formatResult: function (exercise) {
                    return "<div class='row-fluid'><div class=''><span class='span1'><div style='color:" + exercise.alias + "'>" + exercise.text +
                        "</div></span></div></div>";
                },
                formatSelection: function (exercise) {
                    return "<div class='row-fluid'><div class=''><span class='span1'><div style='color:" + exercise.alias + "'>" + exercise.text +
                        "</div></span></div></div>";
                },
            })
        }
    </script>
    <div class="col-sm-6">
        <div class="form-group">

        </div>
    </div>
    <div class="col-sm-6">
        <div class="form-group">
            <label class="col-sm-2 control-label" style="padding-left:15px;">Place Of Supply:</label>
            <div class="col-sm-6">
                @Html.TextBoxFor(x => x.PlaceOfSupply, new { @class = "input-large search-query", @style = "width:100%;margin-top:2px;font-weight:bold;background-color:lightgray;", @id = "PlaceOfSupply", @Name = "PlaceOfSupply" })
            </div>
        </div>
    </div>
</div>