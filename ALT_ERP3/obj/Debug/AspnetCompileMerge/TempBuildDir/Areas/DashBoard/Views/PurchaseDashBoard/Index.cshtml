@model ActiveObjectsVM
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_LayoutMenu.cshtml";
}
<!--Chart JS-->
<script src="~/Content/js/chart-js/Chart.js"></script>
<script src="~/Content/js/chartjs.init.js"></script>

@* iX9: Form Design *@
<header class="header fixed-top" style="position:fixed;background-color:lightgray;padding:6px;width:100%;margin-top:5px;">
    <div class="fixhead">
        <b class="CodeSt">Purchase Dashboard</b>
    </div>
</header>
<script>
    $(document).ready(function () {
        $("#clientScreenWidth").val($(window).width());
        $("#clientScreenHeight").val($(window).height());

        //$("#100").jqGrid('clearGridData');
        //$("#100").jqGrid("GridUnload");
        //$('#100').trigger('reloadGrid');
        //GridReload(100);
        //$("#101").jqGrid('clearGridData');
        //$("#101").jqGrid("GridUnload");
        //$('#101').trigger('reloadGrid');
        //GridReload(101);
        //$("#102").jqGrid('clearGridData');
        //$("#102").jqGrid("GridUnload");
        //$('#102').trigger('reloadGrid');
        //GridReload(102);
        //$("#103").jqGrid('clearGridData');
        //$("#103").jqGrid("GridUnload");
        //$('#103').trigger('reloadGrid');
        //GridReload(103);
        //$("#104").jqGrid('clearGridData');
        //$("#104").jqGrid("GridUnload");
        //$('#104').trigger('reloadGrid');
        //GridReload(104);

    });

    @*function GridReload(mint) {
        event.preventDefault();
        $('.spinner').show();
        var ColName, Coldata;
        var mDate = ($('#Fromdate').val() + ':' + $('#ToDate').val());
        var sPathUrl = '@Url.Action("GetGridStructureRecords")?Date=' + mDate + '&ViewDataId=' + $("#viewcode").val() + '&Code=' + mint;
        var sUrlpath = '@Url.Action("GetGridData")?Date=' + mDate + '&ViewDataId=' + $("#viewcode").val() + '&Code=' + mint;
        $.ajax({
            url: sPathUrl,
            type: "POST",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (data) {
                var obj = $.parseJSON(data);
                ColName = obj[0].split(",");
                Coldata = obj[1];
                CreateGridData();
                $('.spinner').hide();
            },
            error: function () {
                alert("Error with AJAX callback");
            }
        });

        function CreateGridData() {
            $('#100').jqGrid({
                url: sUrlpath,
                datatype: 'json',
                contentType: "application/json; charset=utf-8",
                mtype: 'POST',
                colNames: ColName,
                colModel: Coldata,
                pager: $('#pager'),
                rowNum: 20,
                rowList: [15, 20, 50, 100,300],
                height: 300,
                frozen: false,
                sortorder: 'asc',
                gridview: true,
                viewrecords: true,
                scroll: false,
                autoencode: true,
                search: true,
                recordtext: "View {0} - {1} of <span style='font-weight:bold;font-size: 13px;'>{2}</span>",
                beforeRequest: function () {
                    responsive_jqgridData($(".jqGrid"));
                },
                loadComplete: function () {
                    $("tr.jqgrow:odd").css("background", "#EAEAEA");
                    $('.spinner').hide();
                },
            });
            jQuery("#100").jqGrid('navGrid', "#pager",
                { edit: false, add: false, del: false, search: true, refresh: true, searchtext: "filter" });
            jQuery("#100").jqGrid("setFrozenColumns");
        };

        function responsive_jqgridData(jqgrid) {
            jqgrid.find('.ui-jqgrid').addClass('clear-margin span12').css('width', '');
            jqgrid.find('.ui-jqgrid-view').addClass('clear-margin span12').css('width', '');
            jqgrid.find('.ui-jqgrid-view > div').eq(1).addClass('clear-margin span12').css('width', '').css('min-height', '0').css('display', 'grid');
            jqgrid.find('.ui-jqgrid-view > div').eq(2).addClass('clear-margin span12').css('width', '').css('min-height', '0').css('display', 'grid');
            jqgrid.find('.ui-jqgrid-sdiv').addClass('clear-margin span12').css('width', '');
            jqgrid.find('.ui-jqgrid-pager').addClass('clear-margin span12').css('width', '');
            jqgrid.find('#pager_right').css('width', '180px');
            jqgrid.find('.ui-state-default,.ui-widget-content .ui-state-default,.ui-widget-header .ui-state-default').css('background', '#e7e4e4');
            jqgrid.find('.ui-widget-content .ui-state-focus, .ui-widget-header .ui-state-focus .ui-state-hover').css('background', 'skyblue');
            jqgrid.find('.ui-jqgrid tr.jqgrow').css('font-family', 'Tahoma');
            jqgrid.find('.ui-jqgrid tr.jqgrow').css('font-size', '9pt');
        };
    }*@
</script>

<section id="main-content">
    <section class="wrapper" style="margin-top:22px;">
        @*<img src="@Url.Action("GetBarDetail")?mwidth="+$("#clientScreenWidth").val() alt="Chart" />*@
        <!--mini statistics start-->
        @if (Model.DashboardActive == true)
        {
            <div class="row">
                <div class="col-md-3">
                    <div class="mini-stat clearfix">
                        @*                    <span class="mini-stat-icon orange"><i class="fa fa-gavel"></i></span>*@
                        <span class="mini-stat-icon orange"><i class="fa fa-gears"></i></span>
                        <div class="mini-stat-info" style="font-size:11pt;">
                            @*<span>@Model.EnqAmt</span>
                                <span>@Model.EnqCount</span>*@
                            <span style="font-size:14pt;font-weight:bolder;">
                                @Html.DisplayFor(x => x.EnqAmt, "{0:n2}", new { @maxlength = "12", @class = "form-control", @style = "width:100px;text-align:right;font-size:12pt;", @Name = "EnqAmt", @Value = Model.EnqAmt, @Id = "EnqAmt" })
                            </span>
                            <span style="font-size:14pt;font-weight:bolder;">
                                @Html.DisplayFor(x => x.EnqCount, "{0:n0}", new { @maxlength = "12", @class = "form-control", @style = "width:100px;text-align:right;font-size:12pt;", @Name = "EnqCount", @Value = Model.EnqCount, @Id = "EnqCount" })
                            </span>
                            Enquiries Received
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="mini-stat clearfix">
                        <span class="mini-stat-icon tar"><i class="fa fa-tag"></i></span>
                        <div class="mini-stat-info" style="font-size:11pt;">
                            @*<span>@Model.QtnAmt</span>
                                <span>@Model.QtnCount</span>*@
                            <span style="font-size:14pt;font-weight:bolder;">
                                @Html.DisplayFor(x => x.QtnAmt, "{0:n2}", new { @maxlength = "12", @class = "form-control", @style = "width:100px;text-align:right;", @Name = "QtnAmt", @Value = Model.QtnAmt, @Id = "QtnAmt" })
                            </span>
                            <span style="font-size:14pt;font-weight:bolder;">
                                @Html.DisplayFor(x => x.QtnCount, "{0:n0}", new { @maxlength = "12", @class = "form-control", @style = "width:100px;text-align:right;", @Name = "QtnCount", @Value = Model.QtnCount, @Id = "QtnCount" })
                            </span>
                            Quotes Sent
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="mini-stat clearfix">
                        <span class="mini-stat-icon pink"><i class="fa fa-money"></i></span>
                        <div class="mini-stat-info" style="font-size:11pt;">
                            @*<span>@Model.OrdAmt</span>
                                <span>@Model.OrdCount</span>*@
                            <span style="font-size:14pt;font-weight:bolder;">
                                @Html.DisplayFor(x => x.OrdAmt, "{0:n2}", new { @maxlength = "12", @class = "form-control", @style = "width:100px;text-align:right;", @Name = "OrdAmt", @Value = Model.OrdAmt, @Id = "OrdAmt" })
                            </span>
                            <span style="font-size:14pt;font-weight:bolder;">
                                @Html.DisplayFor(x => x.OrdCount, "{0:n0}", new { @maxlength = "12", @class = "form-control", @style = "width:100px;text-align:right;", @Name = "OrdCount", @Value = Model.OrdCount, @Id = "OrdCount" })
                            </span>
                            Orders Received
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="mini-stat clearfix">
                        <span class="mini-stat-icon green"><i class="fa fa-external-link"></i></span>
                        <div class="mini-stat-info" style="font-size:11pt;">
                            @*<span>@Model.InvAmt</span>
                                <span>@Model.InvAmt</span>*@
                            <span style="font-size:14pt;font-weight:bolder;">
                                @Html.DisplayFor(x => x.InvAmt, "{0:n2}", new { @maxlength = "12", @class = "form-control", @style = "width:100px;text-align:right;", @Name = "InvAmt", @Value = Model.InvAmt, @Id = "InvAmt" })
                            </span>
                            <span style="font-size:14pt;font-weight:bolder;">
                                @Html.DisplayFor(x => x.InvCount, "{0:n0}", new { @maxlength = "12", @class = "form-control", @style = "width:100px;text-align:right;", @Name = "InvCount", @Value = Model.InvCount, @Id = "InvCount", title = "Invoice Count" })
                            </span>
                            Invoices Raised
                        </div>
                    </div>
                </div>
            </div>
        }

    <div class="form-group">
        <!--mini statistics end-->
        @if (Model.DashboardActive == true && ViewBag.Code != null)
        {
            //foreach (var mcodes in ViewBag.Code)
            int x = 100;
            foreach (var mcodes in Model.codes)
            {
                <div class="row">
                    <div class="col-md-12" style="padding-left:30px;font-weight:bolder;font-size:12pt;">
                        <span>@mcodes.Name</span>
                    </div>
                    <br>
                    <div class="col-md-4" style="padding-left:0px;">
                        <img src="@Url.Action("GetBarDetail", "SalesDashBoard", new { code = mcodes.Code })" style="padding-left:0px;" alt="Chart" />
                    </div>
                    <div class="col-md-8" style="padding-left:30px;font-weight:bolder;font-size:12pt;">
                        <div id="page-contentgrid">
                            <div class="jqGrid">
                                <table id=@x class="scroll" cellpadding="0" cellspacing="0" style="border-collapse:unset;"></table>
                                <div id="pager" style="height:32px;"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <br>
                x = x + 1;
            }
        }
    </div>
        @*<b class="CodeSt">Monthly Sales</b>*@

        @*<div class="row">
                <div class="col-sm-12">
                    <section class="panel">
                        <header class="panel-heading">
                            Bar Chart
                            <span class="tools pull-right">
                                <a href="javascript:;" class="fa fa-chevron-down"></a>
                                <a href="javascript:;" class="fa fa-cog"></a>
                                <a href="javascript:;" class="fa fa-times"></a>
                            </span>
                        </header>
                        <div class="panel-body">
                            <div class="chartJS">
                                <canvas id="bar-chart-js" height="250" width="800"></canvas>
                            </div>
                        </div>
                    </section>
                </div>
            </div>*@
    </section>
</section>

<footer class="footer-section" style="height:33px;position:fixed;background-color:#4B4A4A;padding:3px;color:white;">
    <div class="row">
        <div class="col-sm-5">
        </div>
        <div class="col-sm-3" style="text-align:center; margin-top:5px;color:white;font-family:Helvetica;font-size:9pt;padding-top:0px;">
            T.FAT ERP-iX9, by Suchan Software Private Limited
        </div>
        <div class="col-sm-4">
        </div>
    </div>
</footer>
<input type="hidden" value="" name="clientScreenHeight" id="clientScreenHeight" />
<input type="hidden" value="" name="clientScreenWidth" id="clientScreenWidth" />