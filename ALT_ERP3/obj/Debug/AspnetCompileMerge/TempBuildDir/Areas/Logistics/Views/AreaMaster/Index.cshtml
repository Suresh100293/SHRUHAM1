@model TFATERPWebApplication.Areas.Accounts.Models.GridOption
@using Common;
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_NEWLayoutMenu.cshtml";
}

<style>
    .tloadingP {
        background-image: url('../../../../Content/images/treeload.gif');
        width: 15px;
        display: inline-block;
    }

    .tcollapse {
        width: 15px;
        background-image: url('../../../../Content/images/ticon.png');
        background-repeat: no-repeat;
        background-position: -36px -17px;
        display: inline-block;
        cursor: pointer;
    }

    .texpand {
        width: 15px;
        background-image: url('../../../../Content/images/ticon.png');
        background-repeat: no-repeat;
        background-position: -50px -17px;
        display: inline-block;
        cursor: pointer;
    }

    .ttreeview ul {
        font: 14px Arial,Sans-Serif;
        margin: 0px;
        padding-left: 20px;
        list-style: none;
    }

        /*.ttreeview ul ul, .ttreeview ul ul ul {
            display: block !important;
        }*/

    .ttreeview > li > a {
        font-weight: bold;
    }

    .ttreeview li a {
        padding: 4px;
        font-size: 12px;
        display: inline-block;
        text-decoration: none;
        width: auto;
    }
</style>

<script>
    $(document).ready(function () {
        //FillTreeView();
        $(".collapsible").live("click", function (e) {
            debugger;
            e.preventDefault();
            var this1 = $(this);
            var data = {
                pid: $(this).attr('pid'),
                tablename: "BranchMaster"
            };
            var isLoaded = $(this1).attr('data-loaded');
            if (isLoaded == "false") {
                $(this1).addClass("tloadingP");
                $(this1).removeClass("tcollapse");
                $.ajax({
                    url: "/ZoneMaster/Getsubmenu",
                    type: "GET",
                    data: data,
                    dataType: "json",
                    success: function (d) {
                        $(this1).removeClass("tloadingP");
                        if (d.length > 0) {
                            var $ul = $("<ul></ul>");
                            $.each(d, function (i, ele) {
                                $ul.append(
                                    $("<li></li>").append(
                                        " <span class='tcollapse collapsible' data-loaded='false' pid='" + ele.Id + "'>&nbsp;</span>" +
                                        "<span><a href='#'>'" + ele.data + "'</a></span>"
                                    )
                                )
                            });

                            $(this1).parent().append($ul);
                            $(this1).addClass('tcollapse');
                            $(this1).toggleClass('tcollapse texpand');
                            $(this1).closest('li').children('ul').slideToggle();

                        } else {
                            $(this1).css({ 'display': 'inline-block', 'width': '15px' });
                            $(this1).attr('data-loaded', true);
                        }
                    },
                    error: function (data) {
                        alert("Error!");
                    }
                });
            } else {
                $(this1).toggleClass("tcollapse texpand");
                $(this1).closest('li').children('ul').slideToggle();
            }
        });

        $(".Branch").live("click", function (e) {
            debugger;
            e.preventDefault();
            var this1 = $(this);
            var data = {
                pid: $(this).attr('pid'),
                tablename: "LAreaMaster"
            };
            var isLoaded = $(this1).attr('data-loaded');
            if (isLoaded == "false") {
                $(this1).addClass("tloadingP");
                $(this1).removeClass("tcollapse");
                $.ajax({
                    url: "/ZoneMaster/Getsubmenu",
                    type: "GET",
                    data: data,
                    dataType: "json",
                    success: function (d) {
                        $(this1).removeClass("tloadingP");
                        if (d.length > 0) {
                            var $ul = $("<ul id='new' style='display: block !important;'></ul>");
                            $.each(d, function (i, ele) {
                                $ul.append(
                                    $("<li></li>").append(
                                        " <span class='tcollapse collapsible Branch' data-loaded='false' pid='" + ele.Id + "'>&nbsp;</span>" +
                                        "<span><a href='#'>'" + ele.data + "'</a></span>"
                                    )
                                )
                            });

                            $(this1).parent().append($ul);
                            $(this1).addClass('tcollapse');
                            $(this1).toggleClass('tcollapse texpand');
                            $(this1).closest('li').children('ul').slideToggle();

                        } else {
                            $(this1).css({ 'display': 'inline-block', 'width': '15px' });
                            $(this1).attr('data-loaded', true);
                        }
                    },
                    error: function (data) {
                        alert("Error!");
                    }
                });
            } else {
                $(this1).toggleClass("tcollapse texpand");
                $(this1).closest('li').children('ul').slideToggle();
            }
        });
    });
</script>

<header class="header fixed-top" style="position:fixed;background-color:lightgray;padding:6px;width:100%;margin-top:5px;">
    <div class="fixhead">
        <div class="col-md-3">
            <b class="CodeSt">@ViewBag.Header</b>
        </div>
        @if (ViewBag.Header != "Transaction Charges Setup" && ViewBag.Header.Contains("Addons") == false)
        {
            <div class="col-md-1 pull-right" style="padding-left:6px;font-family:Tahoma;padding-top:2px;padding-right:0px;font-size:9pt; width:unset;">
                <button class="btn btn-success" style="font-size:13px;padding:3px 12px;" tooltip="Add" onclick=AddNewEntry();>Add New</button>
            </div>
            @*<span class="tools pull-right" id="Other">
                    <button class="btn btn-success" style="font-size:13px;padding:3px 12px;" tooltip="Add" onclick=AddNewEntry();>Add New</button>
                </span>*@
        }
        <div class="col-md-1 pull-right" style="padding-left:0px;font-family:Tahoma;padding-top:6px;font-size:9pt; width:unset;color:black;">
            Set Default
        </div>
        <div class="col-md-1 pull-right" style="padding-left:6px;width:30px;font-family:Tahoma;padding-top:5px;font-size:9pt; width:unset;">
            <input title='Set this View as Default' type="checkbox" id="isdefault" name="isdefault" style="margin-top:2px; width:17px;height:17px;" />
            @*<label class="col-sm-1 control-label" style="text-align:left;padding-top:2px;">Default</label>*@
        </div>
        <div class="col-md-3 pull-right">
            @Html.TextBoxFor(x => x.ViewDataId, new { @class = "input-large search-query", @style = "width:100%;margin-top:2px;font-weight:bold;background-color:lightgray;", @id = "formats", @name = "formats" })
        </div>
        <div class="col-md-1 pull-right" style="padding-left:6px;padding-right:0px;font-family:Tahoma;padding-top:6px;font-size:9pt; width:unset;color:black;">
            <a id="btnopnFormat" href=""><i class="fa fa-edit" style="color:blue;"></i> View:</a>
        </div>
    </div>
</header>

<section class="panel" style="margin-top:50px;">

    @{
        if (ViewBag.treeMainMenu != null)
        {
            <div id="treeviewcontrol" style="font-size:12px;border-right:double; min-height:475px;overflow-y:auto;max-height:475px;padding-left:5px;padding-top:10px;padding-bottom:5px;">
                <div class="ttreeview">
                    <ul>
                        @foreach (var item in (ViewBag.treeMainMenu as IEnumerable<TFATERPWebApplication.FlatObject>).ToList())
                        {
                            <li>
                                <span class="tcollapse collapsible" data-loaded="false" pid="@item.Id">&nbsp;</span>
                                <span><a href="#">@item.data</a></span>
                            </li>
                        }
                    </ul>
                </div>
            </div>
        }
    }


    @*<div>
            <table id="jqGrid"></table>
            <div id="jqControls"></div>
        </div>*@


</section>

<footer class="footer-section" style="height:33px;position:fixed;background-color:#4B4A4A;padding:3px;color:white;">
    
    <div class="col-sm-12" style="text-align:center; margin-top:5px;color:white;font-family:Helvetica;font-size:9pt;padding-top:0px;">
        T.LAT ERP-3.0, by Suchan Software Private Limited
    </div>
    @*<div class="col-sm-2">
        <button class="btn btn-warning pull-right" id="btnprintlist" style="color:black; font-size:12px;height:27px;margin-left:0;width:unset;padding-top:3px;" title='Export to PDF in Landscape'>Print List</button>
    </div>*@
</footer>
@*<input id="hdnurl" type="hidden">*@
<input type="hidden" id="SelectedDocument" />

