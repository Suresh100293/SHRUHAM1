@model ALT_ERP3.Areas.Logistics.Models.FreightMemoQueryVM
@using Common;
@{
    ViewBag.Title = "Index";
    Layout = "";
}

<style>
    .MyPanelHeading {
        background-color: #b9fb87 !important;
        border-color: #DDDDDD !important;
        color: #2b29db !important;
        padding: 5px 10px !important;
        border-radius: 15px !important;
        font-weight: bold !important;
    }

    .MyPanelBody {
        border: 1px solid #85cf9f !important;
        border-radius: 15px 15px 0px 0px !important;
    }

    .SpamDataDetails {
        font-size: 12px !important;
        font-weight: bold !important;
    }
</style>

<script type="text/javascript">
    $(document).ready(function () {
        $("#NSD").click(function () {
            $("#NSDBody").slideToggle("slow");
        });
        $("#FMD").click(function () {
            $("#FMDBody").slideToggle("slow");
        });
        $("#LD").click(function () {
            $("#LDBody").slideToggle("slow");
        });
        $("#DL").click(function () {
            $("#DLBody").slideToggle("slow");
        });

        $("#PD").click(function () {
            $("#PDBody").slideToggle("slow");
        });
        $("#ED").click(function () {
            $("#EDBody").slideToggle("slow");
        });
    });
</script>
@if (Model.NotShowDetails)
{
    <div class="panel panel-default">
        <div class="panel-heading MyPanelHeading" id="NSD">Warning</div>
        <div class="panel-body MyPanelBody" id="NSDBody">
            <div class="form-group">
                <label class="col-sm-12  control-label" style="color:red !important;"><spam class="SpamDataDetails"> User Does Not Have Rights To See FreightMemo Details. </spam></label>
            </div>
        </div>
    </div>
}

@if (Model.FMD)
{
    if (!String.IsNullOrEmpty(Model.Broker))
    {
        //Freight Memo Details
        <div class="panel panel-default">
            <div class="panel-heading MyPanelHeading" id="FMD">Freight Memo Details [ @Model.FMno ]</div>
            <div class="panel-body MyPanelBody" id="FMDBody">
                @*<div class="form-group hidden">
                        <label class=" bold   col-sm-1  control-label">F.M No:</label>
                        <div class="col-sm-1 ">
                            @Html.TextBoxFor(x => x.Document, new { @class = "form-control", @id = "Document1", @style = "width:100px;", @Value = Model.FMno, @readonly = "readonly" })
                        </div>
                    </div>*@
                <div class="form-group">
                    <label class="col-sm-3  control-label">Branch : <spam class="SpamDataDetails">@Model.FMBranch</spam></label>
                    <label class="col-sm-3  control-label">Date & Time : <spam class="SpamDataDetails">@Model.FMDate.ToShortDateString() : @Model.FMTime</spam></label>
                    <label class="col-sm-3  control-label">Type : <spam class="SpamDataDetails">@Model.VehicleType</spam></label>
                    <label class="col-sm-3  control-label">Vehicle No : <spam class="SpamDataDetails">@Model.VehicleNo</spam></label>
                </div>
                <div class="form-group">
                    <label class="col-sm-3  control-label">From : <spam class="SpamDataDetails">@Model.FFrom</spam></label>
                    <label class="col-sm-3  control-label">To : <spam class="SpamDataDetails">@Model.FTo</spam></label>
                    <label class="col-sm-3  control-label">Via : <spam class="SpamDataDetails">@Model.Via</spam></label>
                    <label class="col-sm-3  control-label">Route : <spam class="SpamDataDetails">@Model.Route</spam></label>
                </div>
                <div class="form-group">
                    <label class="col-sm-3  control-label">Broker : <spam class="SpamDataDetails">@Model.Broker</spam></label>
                    <label class="col-sm-3  control-label">Driver : <spam class="SpamDataDetails">@Model.Driver</spam></label>
                    <label class="col-sm-3  control-label">Pay At Branch : <spam class="SpamDataDetails">@Model.PayableAt</spam></label>
                    <label class="col-sm-3  control-label">Total Qty : <spam class="SpamDataDetails">@Model.TotalQtyLoad</spam></label>
                </div>
                <div class="form-group">
                    <label class="col-sm-3  control-label">Freight : <spam class="SpamDataDetails">@Model.Freight</spam></label>
                    <label class="col-sm-3  control-label">Advance : <spam class="SpamDataDetails">@Model.Advance</spam></label>
                    <label class="col-sm-3  control-label">Balance : <spam class="SpamDataDetails">@Model.Balance</spam></label>
                </div>
                <div class="form-group">
                    <label class="col-sm-3  control-label">Create On : <spam class="SpamDataDetails">@Model.FMCreateDate.ToShortDateString()</spam></label>
                    <label class="col-sm-3  control-label">LastUpDt : <spam class="SpamDataDetails">@Model.FMLastUpdateDate.ToShortDateString()</spam></label>
                    <label class="col-sm-3  control-label">EnteredBy : <spam class="SpamDataDetails">@Model.FMEnterdby</spam></label>
                    <label class="col-sm-3  control-label">PayLoad : <spam class="SpamDataDetails">@Model.Payload</spam></label>
                </div>
                <div class="form-group">
                    <label class="col-sm-12  control-label">Remark : <spam class="SpamDataDetails">@Model.Remark</spam></label>
                </div>
            </div>
        </div>
    }
}
@if (Model.DS)
{
    if (Model.LorryChallans != null)
    {
        if (Model.LorryChallans.Count() > 0)
        {
            //Lorry Challan Details
            <div class="panel panel-default">
                <div class="panel-heading MyPanelHeading" id="LD">Dispatch Details</div>
                <div class="panel-body MyPanelBody" id="LDBody">
                    @foreach (var item in Model.LorryChallans.OrderBy(x => x.LCDate))
                    {
                        <div class="form-group">
                            <label class="col-sm-3 control-label">Branch : <spam class="SpamDataDetails">@item.LCBranch</spam></label>
                            <label class="col-sm-3 control-label">LC No : <spam class="SpamDataDetails">@item.LCno</spam></label>
                            <label class="col-sm-3 control-label">Date & Time : <spam class="SpamDataDetails">@item.LCDate.ToShortDateString() : @item.LCTime</spam></label>
                            <label class="col-sm-3 control-label">Qty : <spam class="SpamDataDetails">@item.LCQty</spam></label>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-3 control-label">From : <spam class="SpamDataDetails">@item.LCFrom</spam></label>
                            <label class="col-sm-3 control-label">To : <spam class="SpamDataDetails">@item.LCTo</spam></label>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-3 control-label">Create On : <spam class="SpamDataDetails">@item.LCCreateDate.ToShortDateString()</spam></label>
                            <label class="col-sm-3 control-label">LastUpDt : <spam class="SpamDataDetails">@item.LCLastUpdateDate.ToShortDateString()</spam></label>
                            <label class="col-sm-3 control-label">EnteredBy : <spam class="SpamDataDetails">@item.LCEnteredBy</spam></label>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-12 control-label">Remark : <spam class="SpamDataDetails">@item.LCRemark</spam></label>
                        </div>
                        if (item.LorryReceipts != null)
                        {
                            if (item.LorryReceipts.Count() > 0)
                            {
                                <table id="" class="detail zui-table" style="width:100%">
                                    <thead>
                                        <tr role="row" style="font-family:Tahoma;font-size:9pt;width:100%">
                                            <th>Sr No</th>
                                            <th>Lrno</th>
                                            <th>Book Date</th>
                                            <th>LRType</th>
                                            <th>Consignor</th>
                                            <th>Consignee</th>
                                            <th>LRFrom</th>
                                            <th>LRTo</th>
                                            <th>LRQty</th>
                                            <th>Weight</th>
                                            <th>ChrgType</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        @if (Model != null)
                                        {
                                            foreach (var lr in item.LorryReceipts)
                                            {
                                                <tr role="row" style="font-family:Tahoma;font-size:9pt;">
                                                    <td>@lr.Serial</td>
                                                    <td>@lr.Lrno</td>
                                                    <td>@lr.BookDate.ToShortDateString()</td>
                                                    <td>@lr.LRType</td>
                                                    <td>@lr.Consignor</td>
                                                    <td>@lr.Consignee</td>
                                                    <td>@lr.LRFrom</td>
                                                    <td>@lr.LRTo</td>
                                                    <td>@lr.LRQty</td>
                                                    <td>@lr.ActWt</td>
                                                    <td>@lr.ChrgType</td>
                                                </tr>
                                            }
                                            <tr style="background-color: #e5dada;">
                                                <td colspan="2" style="text-align:center;">No Of LR : @item.LorryReceipts.Count()</td>
                                                <td colspan="6" style="text-align:right;">LC Total Qty : @item.TotalQtyLoad</td>
                                                <td colspan="3" style="text-align:right;">LC Total Weight : @item.TotalQtyWeight</td>
                                            </tr>
                                        }
                                    </tbody>
                                </table>
                            }
                        }
                        <hr style="border:#eb7b7b  solid 1px" />
                    }
                </div>
            </div>
        }
    }

    if (Model.DirectLoadingDetails != null)
    {
        if (Model.DirectLoadingDetails.Count() > 0)
        {
            //Consignment Details
            <div class="panel panel-default">
                <div class="panel-heading MyPanelHeading" id="DL">Direct Load Consignemnt Details</div>
                <div class="panel-body MyPanelBody" id="DLBody">
                    <table id="" class="detail zui-table" style="width:100%">
                        <thead>
                            <tr role="row" style="font-family:Tahoma;font-size:9pt;width:100%">
                                <th>Sr No</th>
                                <th>Load Date</th>
                                <th>Load IN</th>
                                <th>Load For</th>
                                <th>Load Qty</th>
                                <th>Load By</th>
                                <th>Lrno</th>
                                <th>Book Date</th>
                                <th>LRType</th>
                                <th>Consignor</th>
                                <th>Consignee</th>
                                <th>LRFrom</th>
                                <th>LRTo</th>
                                <th>LRQty</th>
                                <th>Weight</th>
                                <th>ChrgType</th>
                            </tr>
                        </thead>
                        <tbody>
                            @{int LoadedTotalQty = 0,ConsignmentQty=0, TotalWeight = 0; }
                            @foreach (var lr in Model.DirectLoadingDetails.OrderByDescending(x => x.LodeDate))
                            {
                                <tr role="row" style="font-family:Tahoma;font-size:9pt;">
                                    <td>@lr.Serial</td>
                                    <td>@lr.LodeDate</td>
                                    <td>@lr.LoadingIn</td>
                                    <td>@lr.LoadingFor</td>
                                    <td>@lr.LoadQty</td>
                                    <td>@lr.LodedBy</td>
                                    <td>@lr.Lrno</td>
                                    <td>@lr.BookDate.ToShortDateString()</td>
                                    <td>@lr.LRType</td>
                                    <td>@lr.Consignor</td>
                                    <td>@lr.Consignee</td>
                                    <td>@lr.LRFrom</td>
                                    <td>@lr.LRTo</td>
                                    <td>@lr.LRQty</td>
                                    <td>@lr.ActWt</td>
                                    <td>@lr.ChrgType</td>
                                </tr>
                                LoadedTotalQty += Convert.ToInt32(lr.LoadQty);
                                ConsignmentQty += Convert.ToInt32(lr.LRQty);
                                TotalWeight += Convert.ToInt32(lr.ActWt);
                            }
                            <tr style="background-color: #e5dada;">
                                <td colspan="2" style="text-align:center;">No Of Consignment : @Model.DirectLoadingDetails.Count()</td>
                                <td colspan="4" style="text-align:right;">Loaded Qty : @LoadedTotalQty</td>
                                <td colspan="8" style="text-align:right;">Consignment Total Qty : @ConsignmentQty</td>
                                <td colspan="2" style="text-align:right;">Total Weight : @TotalWeight</td>
                            </tr>
                        </tbody>
                    </table>

                    <hr style="border:#eb7b7b  solid 1px" />
                </div>
            </div>
        }
    }
}
@if (Model.PD)
{
    if (Model.PaymentDetails != null)
    {
        if (Model.PaymentDetails.Count() > 0)
        {
            //Payment Details
            <div class="panel panel-default">
                <div class="panel-heading MyPanelHeading" id="PD">Payment Details</div>
                <div class="panel-body MyPanelBody" id="PDBody">
                    @foreach (var item in Model.PaymentDetails.OrderBy(x => x.VouNODate))
                    {
                        <div class="form-group">
                            <label class="col-sm-3 control-label">Branch : <spam class="SpamDataDetails">@item.VouNOBranch</spam></label>
                            <label class="col-sm-3 control-label">Voucher No : <spam class="SpamDataDetails">@item.VouNO</spam></label>
                            <label class="col-sm-3 control-label">Date : <spam class="SpamDataDetails">@item.VouNODate.ToShortDateString()</spam></label>
                            <label class="col-sm-3 control-label">Pay Type : <spam class="SpamDataDetails">@item.AB</spam></label>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-3 control-label">Bank : <spam class="SpamDataDetails">@item.VouNOBank</spam></label>
                            <label class="col-sm-3 control-label">Broker : <spam class="SpamDataDetails">@item.VouNOBoker</spam></label>
                            <label class="col-sm-3 control-label">Total Amount : <spam class="SpamDataDetails">@item.Amount</spam></label>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-offset-3 col-sm-3 control-label" style="color: blue;"><spam class="SpamDataDetails" style="font-size:14px!important;">Charges :</spam></label>
                        </div>
                        for (int i = 0; i < item.Charges.Count(); i++)
                        {
                            <div class="form-group">
                                <label class="col-sm-offset-3 col-sm-2 control-label">@item.Charges[i].Header :</label>
                                <label class="col-sm-1 control-label"><spam class="SpamDataDetails"> @item.Charges[i].Amt</spam></label>
                            </div>
                        }
                        <div class="form-group">
                            <label class="col-sm-offset-3 col-sm-2 control-label">Total :</label>
                            <label class="col-sm-1 control-label"><spam class="SpamDataDetails"> @item.Amount</spam></label>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-3 control-label">Create On : <spam class="SpamDataDetails">@item.VouNOCreateDate.ToShortDateString()</spam></label>
                            <label class="col-sm-3 control-label">LastUpDt : <spam class="SpamDataDetails">@item.VouNOLastUpdateDate.ToShortDateString()</spam></label>
                            <label class="col-sm-3 control-label">EnteredBy : <spam class="SpamDataDetails">@item.VouNOEnteredBy</spam></label>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-12 control-label">Remark : <spam class="SpamDataDetails">@item.VouNORemark</spam></label>
                        </div>
                        <hr style="border:#eb7b7b  solid 1px" />
                    }
                </div>
            </div>
        }
    }
}
@if (Model.ED)
{
    if (Model.ExpensesDetails != null)
    {
        if (Model.ExpensesDetails.Count() > 0)
        {
            //Expenses Details
            <div class="panel panel-default">
                <div class="panel-heading MyPanelHeading" id="ED">Payment Details</div>
                <div class="panel-body MyPanelBody" id="EDBody">
                    @foreach (var item in Model.ExpensesDetails.OrderBy(x => x.VouNODate))
                    {
                        <div class="form-group">
                            <label class="col-sm-3 control-label">Branch : <spam class="SpamDataDetails">@item.VouNOBranch</spam></label>
                            <label class="col-sm-3 control-label">Voucher No : <spam class="SpamDataDetails">@item.VouNO</spam></label>
                            <label class="col-sm-3 control-label">Date : <spam class="SpamDataDetails">@item.VouNODate.ToShortDateString()</spam></label>
                            <label class="col-sm-3 control-label">Type : <spam class="SpamDataDetails">@item.VouNOTrnTypeCode</spam></label>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-3 control-label">Type Name : <spam class="SpamDataDetails">@item.VouNOTrnType</spam></label>
                            <label class="col-sm-3 control-label">Exp Charge : <spam class="SpamDataDetails">@item.VouNOTrnChargeName</spam></label>
                            <label class="col-sm-3 control-label">Inc Amt : <spam class="SpamDataDetails">@item.VouNOTrnIncAmt</spam></label>
                            <label class="col-sm-3 control-label">Exp Amt : <spam class="SpamDataDetails">@item.VouNOTrnExpAmt</spam></label>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-3 control-label">Create On : <spam class="SpamDataDetails">@item.VouNOCreateDate.ToShortDateString()</spam></label>
                            <label class="col-sm-3 control-label">LastUpDt : <spam class="SpamDataDetails">@item.VouNOLastUpdateDate.ToShortDateString()</spam></label>
                            <label class="col-sm-3 control-label">EnteredBy : <spam class="SpamDataDetails">@item.VouNOEnteredBy</spam></label>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-12 control-label">Remark : <spam class="SpamDataDetails">@item.VouNORemark</spam></label>
                        </div>
                        <hr style="border:#eb7b7b  solid 1px" />
                    }
                </div>
            </div>
        }
    }
}

<!--Schedule Information Modal -->
<div class="example-modal">
    <div id="ScheduleModal" class="modal modal-default" style="padding-top: 15px;">
        <div class="modal-dialog " style="width:100%;">
            <div style="overflow:auto;">
                <div class="modal-body">
                    <div class="modal-content">
                        <div class="modal-header" style="background-color:#cccccc;padding-top:5px;">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                            <h4 class="modal-title"><b>Schedule</b></h4>
                        </div>
                        <div class="modal-body" style="padding-left:2%;">
                            <div class="form-group ">
                                <table id="" class="zui-table ">
                                    <thead>
                                        <tr>
                                            <th style="width: 35px;">Branch</th>
                                            <th style="width: 120px;" colspan="1">Arrival Schedule</th>
                                            <th style="width: 120px;" colspan="1">Arrival Data</th>

                                            <th style="width: 85px;" colspan="1">Reform</th>
                                            <th style="width: 120px;" colspan="1">Arrival Re-Schedule</th>
                                            <th style="width: 120px;" colspan="1">Dispatch Schedule</th>
                                            <th style="width: 120px;" colspan="1">Dispatch Data</th>

                                            <th style="width: 85px;" colspan="1">Reform</th>
                                            <th style="width: 120px;" colspan="1">Dispatch Re-Schedule</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        @{
                                            if (Model.ViewSchedule != null)
                                            {
                                                foreach (var item in Model.ViewSchedule)
                                                {
                                                    <tr style="font-family:Tahoma;font-size:9pt;border: solid 1px lightgray;">
                                                        <td>@item.Branch</td>
                                                        <td>
                                                            <table id="" class="zui-table editableTable" style="width:100%;">
                                                                <thead>
                                                                    <tr>
                                                                        <th>Date</th>
                                                                        <th>Time</th>
                                                                        <th>KM</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    <tr>
                                                                        <td>@item.ArrivalSchDate</td>
                                                                        <td>@item.ArrivalSchTime</td>
                                                                        <td>@item.ArrivalSchKm</td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                        </td>
                                                        <td>
                                                            <table id="" class="zui-table editableTable" style="width:100%;">
                                                                <thead>
                                                                    <tr>
                                                                        <th>Date</th>
                                                                        <th>Time</th>
                                                                        <th>KM</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    <tr>
                                                                        <td>@item.ArrivalDate</td>
                                                                        <td>@item.ArrivalTime</td>
                                                                        <td>@item.ArrivalKM</td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                        </td>
                                                        <td>

                                                            <table id="" class="zui-table editableTable" style="width:100%;">
                                                                <thead>
                                                                    <tr>
                                                                        <th>Time</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    <tr>
                                                                        <td> @item.ArrivalLateTime</td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                        </td>

                                                        <td>
                                                            <table id="" class="zui-table editableTable" style="width:100%;">
                                                                <thead>
                                                                    <tr>
                                                                        <th>Date</th>
                                                                        <th>Time</th>
                                                                        <th>KM</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    <tr>
                                                                        <td>@item.ArrivalReSchDate</td>
                                                                        <td>@item.ArrivalReSchTime</td>
                                                                        <td>@item.ArrivalReSchKm</td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                        </td>
                                                        <td>
                                                            <table id="" class="zui-table editableTable" style="width:100%;">
                                                                <thead>
                                                                    <tr>
                                                                        <th>Date</th>
                                                                        <th>Time</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    <tr>
                                                                        <td>@item.DispatchSchDate</td>
                                                                        <td>@item.DispatchSchTime</td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                        </td>
                                                        <td>
                                                            <table id="" class="zui-table editableTable" style="width:100%;">
                                                                <thead>
                                                                    <tr>
                                                                        <th>Date</th>
                                                                        <th>Time</th>
                                                                        <th>KM</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    <tr>
                                                                        <td>@item.DispatchDate</td>
                                                                        <td>@item.DispatchTime</td>
                                                                        <td>@item.DispatchKM</td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                        </td>
                                                        <td>
                                                            <table id="" class="zui-table editableTable" style="width:100%;">
                                                                <thead>
                                                                    <tr>
                                                                        <th>Time</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    <tr>
                                                                        <td>@item.DispatchLateTime</td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                        </td>

                                                        <td>
                                                            <table id="" class="zui-table editableTable" style="width:100%;">
                                                                <thead>
                                                                    <tr>
                                                                        <th>Date</th>
                                                                        <th>Time</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    <tr>
                                                                        <td>@item.DispatchReSchDate</td>
                                                                        <td>@item.DispatchReSchTime</td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                        </td>

                                                    </tr>
                                                }
                                            }
                                        }
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div class="modal-footer" style="background-color:#cccccc;height:42px;padding-bottom:5px;padding-top:5px;border-radius: 0px 0px 5px 5px;">
                            <button data-dismiss="modal" class="btn btn-danger" type="button">Close</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
