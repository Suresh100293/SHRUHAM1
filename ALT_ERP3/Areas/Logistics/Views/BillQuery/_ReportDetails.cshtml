@model ALT_ERP3.Areas.Logistics.Models.BillQueryVM
@using Common;
@{
    ViewBag.Title = "Index";
    Layout = "";
}

<style>
    .MyPanelHeading {
        background-color: #b9fb87 !important;
        border-color: #DDDDDD !important;
        color: #2b29db !important;
        padding: 5px 10px !important;
        border-radius: 15px !important;
        font-weight: bold !important;
    }

    .MyPanelBody {
        border: 1px solid #85cf9f !important;
        border-radius: 15px 15px 0px 0px !important;
    }

    .SpamDataDetails {
        font-size: 12px !important;
        font-weight: bold !important;
    }
</style>
<script type="text/javascript">
    $(document).ready(function () {
        $("#BD").click(function () {
            $("#BDBody").slideToggle("slow");
        });
        $("#BSD").click(function () {
            $("#BSDBody").slideToggle("slow");
        });
        $("#BSRD").click(function () {
            $("#BSRDBody").slideToggle("slow");
        });
        $("#CD").click(function () {
            $("#CDBody").slideToggle("slow");
        });
        $("#PRD").click(function () {
            $("#PRDBody").slideToggle("slow");
        });
    });
</script>

@if (!String.IsNullOrEmpty(Model.Customer))
{
    //Bill Details
    <div class="panel panel-default">
        <div class="panel-heading MyPanelHeading" id="BD">Bill Details [ @Model.BillType : @Model.BillNo ]</div>
        <div class="panel-body MyPanelBody" id="BDBody">
            <div class="form-group">
                <label class="col-sm-3  control-label">Branch : <spam class="SpamDataDetails">@Model.BillBranchN</spam></label>
                <label class="col-sm-3  control-label">Date : <spam class="SpamDataDetails">@Model.BillDate.ToShortDateString()</spam></label>
                <label class="col-sm-3  control-label">Amount : <spam class="SpamDataDetails">@Model.TotAmt</spam></label>
            </div>
            <div class="form-group">
                <label class="col-sm-6  control-label">Customer : <spam class="SpamDataDetails">@Model.Customer</spam></label>
                <label class="col-sm-6  control-label">Master : <spam class="SpamDataDetails">@Model.BMaster</spam></label>
            </div>
            <div class="form-group">
                <label class="col-sm-3  control-label">LastUpDt : <spam class="SpamDataDetails">@Model.BillLASTUPDATEDATE.ToShortDateString()</spam></label>
                <label class="col-sm-3  control-label">EnteredBy : <spam class="SpamDataDetails">@Model.BillENTEREDBY</spam></label>
            </div>
            <div class="form-group">
                <label class="col-sm-12  control-label">Remark : <spam class="SpamDataDetails">@Model.Remark</spam></label>
            </div>
        </div>
    </div>
}

@if (Model.billsubmissinDetails != null)
{
    if (Model.billsubmissinDetails.Count() > 0)
    {
        //Bill Submission Details
        <div class="panel panel-default">
            <div class="panel-heading MyPanelHeading" id="BSD">Bill Submission Details</div>
            <div class="panel-body MyPanelBody" id="BSDBody">
                @foreach (var item in Model.billsubmissinDetails.OrderBy(x => x.SBSubDt))
                {
                    <div class="form-group">
                        <label class="col-sm-3 control-label">Branch : <spam class="SpamDataDetails">@item.SBBranch</spam></label>
                        <label class="col-sm-3 control-label">Doc No : <spam class="SpamDataDetails">@item.SBDocNo</spam></label>
                        <label class="col-sm-3 control-label">Sub On : <spam class="SpamDataDetails">@item.SBSubDt.ToShortDateString()</spam></label>
                        <label class="col-sm-3 control-label">Type : <spam class="SpamDataDetails">@item.SBType</spam></label>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-3 control-label">Through : <spam class="SpamDataDetails">@item.SBThrough</spam></label>
                        @if (item.SBType == "Party")
                        {
                            <label class="col-sm-6 control-label">Submit To : <spam class="SpamDataDetails">@item.SBPartyName</spam></label>
                        }
                    </div>
                    <div class="form-group">
                        <label class="col-sm-3 control-label">Create On : <spam class="SpamDataDetails">@item.SBDate.ToShortDateString()</spam></label>
                        <label class="col-sm-3 control-label">LastUpDt : <spam class="SpamDataDetails">@item.SBLASTUPDATEDATE.ToShortDateString()</spam></label>
                        <label class="col-sm-3 control-label">EnteredBy : <spam class="SpamDataDetails">@item.SBENTEREDBY</spam></label>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-12 control-label">Remark : <spam class="SpamDataDetails">@item.SBRemark</spam></label>
                    </div>
                    <hr style="border:#eb7b7b  solid 1px" />
                }
            </div>
        </div>
    }
}

@if (Model.sendbillsubmissinDetails != null)
{
    if (Model.sendbillsubmissinDetails.Count() > 0)
    {
        //Bill Send/Receive Details
        <div class="panel panel-default">
            <div class="panel-heading MyPanelHeading" id="BSRD">Bill Send/Receive Details</div>
            <div class="panel-body MyPanelBody" id="BSRDBody">
                @foreach (var item in Model.sendbillsubmissinDetails.OrderBy(x => x.SBDate))
                {
                    <div class="form-group">
                        <label class="col-sm-3 control-label">Branch : <spam class="SpamDataDetails">@item.SBBranch</spam></label>
                        <label class="col-sm-3 control-label">Doc No : <spam class="SpamDataDetails">@item.SBDocNo</spam></label>
                        <label class="col-sm-3 control-label">Date : <spam class="SpamDataDetails">@item.SBDate.ToShortDateString()</spam></label>
                        <label class="col-sm-3 control-label">Type : <spam class="SpamDataDetails">@item.SBType</spam></label>
                    </div>
                    <div class="form-group">
                        @if (item.SBType == "Send")
                        {
                            <label class="col-sm-3 control-label">Send TO : <spam class="SpamDataDetails">@item.ToBranch</spam></label>
                        }
                        else
                        {
                            <label class="col-sm-3 control-label">Received From : <spam class="SpamDataDetails">@item.FromBranch</spam></label>
                        }
                        <label class="col-sm-3 control-label">LastUpDt : <spam class="SpamDataDetails">@item.SBLASTUPDATEDATE.ToShortDateString()</spam></label>
                        <label class="col-sm-3 control-label">EnteredBy : <spam class="SpamDataDetails">@item.SBENTEREDBY</spam></label>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-12 control-label">Remark : <spam class="SpamDataDetails">@item.SBRemark</spam></label>
                    </div>
                    <hr style="border:#eb7b7b  solid 1px" />
                }
            </div>
        </div>
    }
}

@if (Model.LorryReceiptList != null)
{
    if (Model.LorryReceiptList.Count() > 0)
    {
        //Lorry Receipt Details
        <div class="panel panel-default">
            <div class="panel-heading MyPanelHeading" id="CD">Consignment Details</div>
            <div class="panel-body MyPanelBody" id="CDBody">
                <table id="" class="detail zui-table" style="width:83%">
                    <thead>
                        <tr role="row" style="font-family:Tahoma;font-size:9pt;width:100%">
                            <th>Sr No</th>
                            <th>Date</th>
                            <th>Lrno</th>
                            <th>Consignor</th>
                            <th>Consignee</th>
                            <th>LRFrom</th>
                            <th>LRTo</th>
                            <th>LRQty</th>
                            <th>Act-WT</th>
                            <th>Chrg-WT</th>
                            <th>ChrgType</th>
                            <th>Challan</th>
                            <th>PONum</th>
                            <th>Total</th>
                        </tr>
                    </thead>
                    <tbody>
                        @{
                            if (Model != null)
                            {
                                decimal TotalAmt = 0;
                                foreach (var lr in Model.LorryReceiptList)
                                {

                                    <tr role="row" style="height: 0px!important;background-color: #c3bfcf;font-family:Tahoma;font-size:9pt;">
                                        <td>@lr.Serial</td>
                                        <td>@lr.LrDate.ToShortDateString()</td>
                                        <td>@lr.Lrno</td>
                                        <td>@lr.Consignor</td>
                                        <td>@lr.Consignee</td>
                                        <td>@lr.LRFrom</td>
                                        <td>@lr.LRTo</td>
                                        <td>@lr.LRQty</td>
                                        <td>@lr.ActWt</td>
                                        <td>@lr.ChrgWt</td>
                                        <td>@lr.ChrgType</td>
                                        <td>@lr.PartyChallan</td>
                                        <td>@lr.PONumber</td>
                                        <td></td>
                                    </tr>
                                    for (int i = 0; i < lr.Charges.Count(); i++)
                                    {
                                        TotalAmt += lr.Charges[i].Amt;
                                        <tr role="row" style="height: 0px!important;text-align:right; font-family:Tahoma;font-size:9pt;">
                                            <td colspan="12">@lr.Charges[i].Header</td>
                                            <td colspan="1">@lr.Charges[i].Amt</td>
                                            <td colspan="1"></td>
                                        </tr>
                                    }
                                    <tr role="row" style="text-align:right;font-family:Tahoma;font-size:9pt;">
                                        <td colspan="12">Total</td>
                                        <td colspan="1">@lr.LrAmt</td>
                                        <td colspan="1">@TotalAmt</td>
                                    </tr>
                                }
                                <tr style="background-color: #e5dada;height: 0px!important;">
                                    <td colspan="2" style="text-align:center;">No Of LR : @Model.LorryReceiptList.Count()</td>
                                    <td colspan="10" style="text-align:center;color:red;"> Balance : @Model.BillBalanceAmt</td>
                                    <td colspan="2" style="text-align:center;">Grand Total : @TotalAmt</td>
                                </tr>
                            }
                        }
                    </tbody>
                </table>
            </div>
        </div>
    }
}

@{
    if (Model.PaymentReceivedDetails != null)
    {
        if (Model.PaymentReceivedDetails.Count() > 0)
        {
            decimal ReceivedAmt = 0;
            //Payment Received Details
            <div class="panel panel-default">
                <div class="panel-heading MyPanelHeading" id="PRD">Payment Received Details</div>
                <div class="panel-body MyPanelBody" id="PRDBody">
                    @foreach (var item in Model.PaymentReceivedDetails.OrderBy(x => x.Date))
                    {
                        <div class="form-group">
                            <label class="col-sm-3 control-label">Branch : <spam class="SpamDataDetails">@item.Branch</spam></label>
                            <label class="col-sm-3 control-label">Voucher No : <spam class="SpamDataDetails">@item.DocNo</spam></label>
                            <label class="col-sm-3 control-label">Type : <spam class="SpamDataDetails">@item.Type</spam></label>
                            <label class="col-sm-3 control-label">Trn Name : <spam class="SpamDataDetails">@item.TypeName</spam></label>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-3 control-label">Bank Name : <spam class="SpamDataDetails">@item.Bank</spam></label>
                            <label class="col-sm-6 control-label">Received From: : <spam class="SpamDataDetails">@item.Code</spam></label>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-offset-3 col-sm-3 control-label" style="color: blue;"><spam class="SpamDataDetails" style="font-size:14px!important;">Charges :</spam></label>
                        </div>
                        for (int i = 0; i < item.GetAmountDetails.Count(); i++)
                        {
                            ReceivedAmt += @item.GetAmountDetails[i].Amt;
                            <div class="form-group">
                                <label class="col-sm-offset-3 col-sm-2 control-label">@item.GetAmountDetails[i].Header :</label>
                                <label class="col-sm-1 control-label"><spam class="SpamDataDetails"> @item.GetAmountDetails[i].Amt</spam></label>
                            </div>
                        }
                        <div class="form-group">
                            <label class="col-sm-offset-3 col-sm-2 control-label">Total :</label>
                            <label class="col-sm-1 control-label"><spam class="SpamDataDetails"> @ReceivedAmt</spam></label>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-3 control-label">Create On : <spam class="SpamDataDetails">@item.Date.ToShortDateString()</spam></label>
                            <label class="col-sm-3 control-label">LastUpDt : <spam class="SpamDataDetails">@item.LASTUPDATEDATE.ToShortDateString()</spam></label>
                            <label class="col-sm-3 control-label">EnteredBy : <spam class="SpamDataDetails">@item.ENTEREDBY</spam></label>
                        </div>
                        <hr style="border:#eb7b7b  solid 1px" />
                    }
                </div>
            </div>
        }
    }
}
