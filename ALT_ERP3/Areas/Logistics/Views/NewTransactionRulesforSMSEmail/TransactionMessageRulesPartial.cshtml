@model ALT_ERP3.Areas.Logistics.Models.NewTransactionSMSModel
@using Common;
@{
    ViewBag.Title = "Transaction Message Rules";
}

<link href="~/Content/ToogleCreate/CreateTgl.css" rel="stylesheet" />
<script src="~/Content/ToogleCreate/CreateTgl.js"></script>
<script>
    $(document).ready(function () {
        loadEmailTemplates()
        loadSMSTemplates()
        

        $('.btntabledatapick1').change(function () {
            debugger;
            if (this.checked) {
                $('#tabledatapick1').hide();

            } else {
                $('#tabledatapick1').show();

            }
        });
        $('.btntabledatapick2').change(function () {
            debugger;
            if (this.checked) {
                $('#tabledatapick2').hide();

            } else {
                $('#tabledatapick2').show();

            }
        });
       
        ////////////User Table////////////////

        $('#AllUxAdd').click(function () {
            var xcess = $('#AllUxAdd').is(':checked');
            if (xcess == true) {
                $('#tabledatapick1 tbody tr').each(function () {
                    var tds = $(this).find('td');
                    tds.find("input[id='MessageRules_xAdd']").prop("checked", true);
                })
            }
            else {
                $('#tabledatapick1 tbody tr').each(function () {
                    var tds = $(this).find('td');
                    tds.find("input[id='MessageRules_xAdd']").prop("checked", false);

                })
            }
        });

        $('#AllUxEdit').click(function () {
            var xcess = $('#AllUxEdit').is(':checked');
            if (xcess == true) {

                $('#tabledatapick1 tbody tr').each(function () {
                    var tds = $(this).find('td');
                    tds.find("input[id='MessageRules_xEdit']").prop("checked", true);

                })
            }
            else {
                $('#tabledatapick1 tbody tr').each(function () {
                    var tds = $(this).find('td');
                    tds.find("input[id='MessageRules_xEdit']").prop("checked", false);

                })
            }
        });

        $('#AllUxDelete').click(function () {
            var xcess = $('#AllUxDelete').is(':checked');
            if (xcess == true) {
                $('#tabledatapick1 tbody tr').each(function () {
                    var tds = $(this).find('td');
                    tds.find("input[id='MessageRules_xDelete']").prop("checked", true);
                })
            }
            else {
                $('#tabledatapick1 tbody tr').each(function () {
                    var tds = $(this).find('td');
                    tds.find("input[id='MessageRules_xDelete']").prop("checked", false);
                })
            }
        });

        $('#AllUxPrint').click(function () {
            var xcess = $('#AllUxPrint').is(':checked');
            if (xcess == true) {
                $('#tabledatapick1 tbody tr').each(function () {
                    var tds = $(this).find('td');
                    tds.find("input[id='MessageRules_xPrint']").prop("checked", true);
                })
            }
            else {
                $('#tabledatapick1 tbody tr').each(function () {
                    var tds = $(this).find('td');
                    tds.find("input[id='MessageRules_xPrint']").prop("checked", false);
                })
            }
        });

        $('#AllUxBackDated').click(function () {
            var xcess = $('#AllUxBackDated').is(':checked');
            if (xcess == true) {

                $('#tabledatapick1 tbody tr').each(function () {
                    var tds = $(this).find('td');
                    tds.find("input[id='MessageRules_xBackDated']").prop("checked", true);

                })
            }
            else {
                $('#tabledatapick1 tbody tr').each(function () {
                    var tds = $(this).find('td');
                    tds.find("input[id='MessageRules_xBackDated']").prop("checked", false);

                })
            }
        });

        $('#AllUSendEmail').click(function () {
            var xcess = $('#AllUSendEmail').is(':checked');
            if (xcess == true) {

                $('#tabledatapick1 tbody tr').each(function () {
                    var tds = $(this).find('td');
                    tds.find("input[id='MessageRules_SendEmail']").prop("checked", true);

                })
            }
            else {
                $('#tabledatapick1 tbody tr').each(function () {
                    var tds = $(this).find('td');
                    tds.find("input[id='MessageRules_SendEmail']").prop("checked", false);

                })
            }
        });

        $('#AllUSendSMS').click(function () {
            var xcess = $('#AllUSendSMS').is(':checked');
            if (xcess == true) {

                $('#tabledatapick1 tbody tr').each(function () {
                    var tds = $(this).find('td');
                    tds.find("input[id='MessageRules_SendSMS']").prop("checked", true);

                })
            }
            else {
                $('#tabledatapick1 tbody tr').each(function () {
                    var tds = $(this).find('td');
                    tds.find("input[id='MessageRules_SendSMS']").prop("checked", false);

                })
            }
        });

        $('#AllUSendMSG').click(function () {
            var xcess = $('#AllUSendMSG').is(':checked');
            if (xcess == true) {

                $('#tabledatapick1 tbody tr').each(function () {
                    var tds = $(this).find('td');
                    tds.find("input[id='MessageRules_SendMSG']").prop("checked", true);

                })
            }
            else {
                $('#tabledatapick1 tbody tr').each(function () {
                    var tds = $(this).find('td');
                    tds.find("input[id='MessageRules_SendMSG']").prop("checked", false);

                })
            }
        });

        ////////////User Table/////////////////

        ////////////Party Table////////////////
        $('#AllEmail').click(function () {
            var xcess = $('#AllEmail').is(':checked');
            if (xcess == true) {
                $('#tabledatapick2 tbody tr').each(function () {
                    var tds = $(this).find('td');
                    tds.find("input[id='SendEmail']").prop("checked", true);
                })
            }
            else {
                $('#tabledatapick2 tbody tr').each(function () {
                    var tds = $(this).find('td');
                    tds.find("input[id='SendEmail']").prop("checked", false);
                })
            }
        });

        $('#AllSMS').click(function () {
            var xcess = $('#AllSMS').is(':checked');
            if (xcess == true) {
                $('#tabledatapick2 tbody tr').each(function () {
                    var tds = $(this).find('td');
                    tds.find("input[id='SendSMS']").prop("checked", true);
                })
            }
            else {
                $('#tabledatapick2 tbody tr').each(function () {
                    var tds = $(this).find('td');
                    tds.find("input[id='SendSMS']").prop("checked", false);
                })
            }
        });

        $('#AllSalesMan').click(function () {
            var xcess = $('#AllSalesMan').is(':checked');
            if (xcess == true) {
                $('#tabledatapick2 tbody tr').each(function () {
                    var tds = $(this).find('td');
                    tds.find("input[id='SendSalesMan']").prop("checked", true);
                })
            }
            else {
                $('#tabledatapick2 tbody tr').each(function () {
                    var tds = $(this).find('td');
                    tds.find("input[id='SendSalesMan']").prop("checked", false);
                })
            }
        });

        $('#AllBroker').click(function () {
            var xcess = $('#AllBroker').is(':checked');
            if (xcess == true) {
                $('#tabledatapick2 tbody tr').each(function () {
                    var tds = $(this).find('td');
                    tds.find("input[id='SendBroker']").prop("checked", true);
                })
            }
            else {
                $('#tabledatapick2 tbody tr').each(function () {
                    var tds = $(this).find('td');
                    tds.find("input[id='SendBroker']").prop("checked", false);
                })
            }
        });

        $('#AllUser').click(function () {
            var xcess = $('#AllUser').is(':checked');
            if (xcess == true) {
                $('#tabledatapick2 tbody tr').each(function () {
                    var tds = $(this).find('td');
                    tds.find("input[id='SendUser']").prop("checked", true);
                })
            }
            else {
                $('#tabledatapick2 tbody tr').each(function () {
                    var tds = $(this).find('td');
                    tds.find("input[id='SendUser']").prop("checked", false);
                })
            }
        });

        $('#AllCheckBlank').click(function () {
            var xcess = $('#AllCheckBlank').is(':checked');
            if (xcess == true) {
                $('#tabledatapick2 tbody tr').each(function () {
                    var tds = $(this).find('td');
                    tds.find("input[id='SendCheckBlank']").prop("checked", true);
                })
            }
            else {
                $('#tabledatapick2 tbody tr').each(function () {
                    var tds = $(this).find('td');
                    tds.find("input[id='SendCheckBlank']").prop("checked", false);
                })
            }
        });
        ////////////Party Table////////////////
    });

    function loadEmailTemplates() {
        var url = '@Url.Action("GetEmailMsgTemplates")'
        $.ajax({
            type: "GET",
            dataType: "json",
            cache: false,
            url: url,
            contentType: "application/json;charset=utf-8",
            beforeSend: function () {
                $('.spinner').show();
            },
            success: function (result) {
                $.each(result, function (i, item) {
                    $("#EmailTemplate").append("<option value='" + item.Value + "'>" + item.Text + "</option>");
                });
                $("#EmailTemplate").val('@Model.EmailTemplate')
                $('.spinner').hide();
            },

            error: function () {
                $('.spinner').hide();
                alert("An error occurred while processing the request.");
            }
        });
    }

    function loadSMSTemplates() {
        var url = '@Url.Action("GetSMSTemplates")'
        $.ajax({
            type: "GET",
            dataType: "json",
            cache: false,
            url: url,
            contentType: "application/json;charset=utf-8",
            beforeSend: function () {
                $('.spinner').show();
            },
            success: function (result) {
                $.each(result, function (i, item) {
                    $("#SMSTemplate").append("<option value='" + item.Value + "'>" + item.Text + "</option>");
                });
                $("#SMSTemplate").val('@Model.SMSTemplate')
                $('.spinner').hide();
            },

            error: function () {
                $('.spinner').hide();
                alert("An error occurred while processing the request.");
            }
        });
    }
</script>

<div class="form-group">
    <label class="col-sm-2 control-label">SMS Template:</label>
    <div class="col-sm-3">
        @Html.DropDownListFor(x => x.SMSTemplate, DropdownHelper.EmptyList(), new { @class = "form-control", @style = "font-size:14px;font-weight:bolder;", @Name = "SMSTemplate", @Id = "SMSTemplate" })
    </div>
    <label class="col-sm-2 control-label">Email Template:</label>
    <div class="col-sm-3">
        @Html.DropDownListFor(x => x.EmailTemplate, DropdownHelper.EmptyList(), new { @class = "form-control", @style = "font-size:14px;font-weight:bolder;", @Name = "EmailTemplate", @Id = "EmailTemplate" })
    </div>
</div>
@*<div class="form-group">
        <label class="col-sm-2 control-label">Also Send to Users:</label>
        <div class="col-sm-5" style="min-height:100px;max-height:100px;">
            @if (Model.AllUsers != null)
            {
                <ul class="addontxtfvalue" id="mselectusers" style="max-height: 100px;overflow: scroll; width: 100%; border: solid 1px;">
                    @foreach (var item2 in Model.AllUsers.Split(',').ToList())
                    {
                        <li><input type="checkbox" value="@item2" @(Model.Users.Contains(item2) ? "checked" : "") />&nbsp;&nbsp;&nbsp;@item2</li>
                    }
                </ul>
            }
        </div>
    </div>*@

<div class="form-body">
    @*<input type="button" class="button-62" value="Hide / Show" id="" />*@
    <input type="checkbox" data-toggle="toggle" class="btntabledatapick1" id="btntabledatapick1"  data-onstyle="info" data-offstyle="danger" data-on="Show USer" data-off="Hide User" style="width: 73px !important;height: 34px;">

    <table id="tabledatapick1" class="zui-table UserTbl" style="font-size:12pt;">
        <thead>
            <tr role="row">
                <th style="width: 26%;vertical-align:inherit;">
                    <!-- HTML !-->
                </th>
                <th style="width: 8%;vertical-align:inherit;"><input id="AllUxAdd" name="AllUxAdd" style="width:16px;height:16px;" type="checkbox"></th>
                <th style="width: 8%;vertical-align:inherit;"><input id="AllUxEdit" name="AllUxEdit" style="width:16px;height:16px;" type="checkbox"></th>
                <th style="width: 8%;vertical-align:inherit;"><input id="AllUxDelete" name="AllUxDelete" style="width:16px;height:16px;" type="checkbox"></th>
                <th style="width: 8%;vertical-align:inherit;"><input id="AllUxPrint" name="AllUxPrint" style="width:16px;height:16px;" type="checkbox"></th>
                <th style="width: 8%;vertical-align:inherit;"><input id="AllUxBackDated" name="AllUxBackDated" style="width:16px;height:16px;" type="checkbox"></th>
                <th style="width: 8%;vertical-align:inherit;"><input id="AllUSendEmail" name="AllUSendEmail" style="width:16px;height:16px;" type="checkbox"></th>
                <th style="width: 8%;vertical-align:inherit;"><input id="AllUSendSMS" name="AllUSendSMS" style="width:16px;height:16px;" type="checkbox"></th>
                <th style="width: 8%;vertical-align:inherit;"><input id="AllUSendMSG" name="AllUSendMSG" style="width:16px;height:16px;" type="checkbox"></th>
                <th style="width: 10%;vertical-align:inherit;"></th>
            </tr>
            <tr role="row">
                <th style="width: 26%;vertical-align:inherit;">User ID</th>
                <th style="width: 8%;vertical-align:inherit;">Add</th>
                <th style="width: 8%;vertical-align:inherit;">Edit</th>
                <th style="width: 8%;vertical-align:inherit;">Delete</th>
                <th style="width: 8%;vertical-align:inherit;">View/Print</th>
                <th style="width: 8%;vertical-align:inherit;">Back Dated</th>
                <th style="width: 8%;vertical-align:inherit;">Email</th>
                <th style="width: 8%;vertical-align:inherit;">SMS</th>
                <th style="width: 8%;vertical-align:inherit;">Msg</th>
                <th style="width: 10%;vertical-align:inherit;">Limit Amount</th>
            </tr>
        </thead>
        <tbody>
            @if (Model.mRightUList != null)
            {
                for (int i = 0; i < Model.mRightUList.Count; i++)
                {
                    <tr style="font-family:Tahoma;font-size:12pt;border: solid 1px lightgray;">
                        <td style="text-align:center;width:26%;">@Html.TextBoxFor(m => Model.mRightUList[i].MessageRules_Code, new { @value = Model.mRightUList[i].MessageRules_Code, @style = "border:none;text-align:left;", @readonly = "readonly", @id = "MessageRules_Code", @name = "MessageRules_Code" })</td>
                        <td style="text-align:center;width:8%;">@Html.CheckBoxFor(m => Model.mRightUList[i].MessageRules_xAdd, new { @value = Model.mRightUList[i].MessageRules_xAdd, @style = "width:16px;height:16px;", @id = "MessageRules_xAdd", @name = "MessageRules_xAdd" })</td>
                        <td style="text-align:center;width:8%;">@Html.CheckBoxFor(m => Model.mRightUList[i].MessageRules_xEdit, new { @value = Model.mRightUList[i].MessageRules_xEdit, @style = "width:16px;height:16px;", @id = "MessageRules_xEdit", @name = "MessageRules_xEdit" })</td>
                        <td style="text-align:center;width:8%;">@Html.CheckBoxFor(m => Model.mRightUList[i].MessageRules_xDelete, new { @value = Model.mRightUList[i].MessageRules_xDelete, @style = "width:16px;height:16px;", @id = "MessageRules_xDelete", @name = "MessageRules_xDelete" })</td>
                        <td style="text-align:center;width:8%;">@Html.CheckBoxFor(m => Model.mRightUList[i].MessageRules_xPrint, new { @value = Model.mRightUList[i].MessageRules_xPrint, @style = "width:16px;height:16px;", @id = "MessageRules_xPrint", @name = "MessageRules_xPrint" })</td>
                        <td style="text-align:center;width:8%;">@Html.CheckBoxFor(m => Model.mRightUList[i].MessageRules_xBackDated, new { @value = Model.mRightUList[i].MessageRules_xBackDated, @style = "width:16px;height:16px;", @id = "MessageRules_xBackDated", @name = "MessageRules_xBackDated" })</td>
                        <td style="text-align:center;width:8%;">@Html.CheckBoxFor(m => Model.mRightUList[i].MessageRules_SendEmail, new { @value = Model.mRightUList[i].MessageRules_SendEmail, @style = "width:16px;height:16px;", @id = "MessageRules_SendEmail", @name = "MessageRules_SendEmail" })</td>
                        <td style="text-align:center;width:8%;">@Html.CheckBoxFor(m => Model.mRightUList[i].MessageRules_SendSMS, new { @value = Model.mRightUList[i].MessageRules_SendSMS, @style = "width:16px;height:16px;", @id = "MessageRules_SendSMS", @name = "MessageRules_SendSMS" })</td>
                        <td style="text-align:center;width:8%;">@Html.CheckBoxFor(m => Model.mRightUList[i].MessageRules_SendMSG, new { @value = Model.mRightUList[i].MessageRules_SendMSG, @style = "width:16px;height:16px;", @id = "MessageRules_SendMSG", @name = "MessageRules_SendMSG" })</td>
                        <td style="text-align:center;width:10%;">@Html.TextBoxFor(m => Model.mRightUList[i].MessageRules_LimitAmount, new { @value = Model.mRightUList[i].MessageRules_LimitAmount, @style = "text-align:right;", @id = "MessageRules_LimitAmount", @name = "MessageRules_LimitAmount" })</td>
                    </tr>
                }
            }
        </tbody>
    </table>
    <br />
    <br />
    
    <input type="checkbox" data-toggle="toggle" class="btntabledatapick2" id="btntabledatapick2" data-onstyle="success" data-offstyle="warning" data-on="Show Party" data-off="Hide Party" style="width: 73px !important;height: 34px;">
    <table id="tabledatapick2" class="zui-table" style="font-size:12pt;">
        <thead>
            <tr role="row">
                <th style="width: 26%;vertical-align:inherit;"></th>
                <th style="width: 8%;vertical-align:inherit;"><input id="AllEmail" name="AllEmail" style="width:16px;height:16px;" type="checkbox"></th>
                <th style="width: 8%;vertical-align:inherit;"><input id="AllSMS" name="AllSMS" style="width:16px;height:16px;" type="checkbox"></th>
                <th style="width: 8%;vertical-align:inherit;"><input id="AllSalesMan" name="AllSalesMan" style="width:16px;height:16px;" type="checkbox"></th>
                <th style="width: 8%;vertical-align:inherit;"><input id="AllBroker" name="AllBroker" style="width:16px;height:16px;" type="checkbox"></th>
                <th style="width: 8%;vertical-align:inherit;"><input id="AllUser" name="AllUser" style="width:16px;height:16px;" type="checkbox"></th>
                <th style="width: 8%;vertical-align:inherit;"><input id="AllCheckBlank" name="AllCheckBlank" style="width:16px;height:16px;" type="checkbox"></th>
            </tr>
            <tr role="row">
                <th style="width: 26%;vertical-align:inherit;">Party</th>
                <th style="width: 8%;vertical-align:inherit;">Email</th>
                <th style="width: 8%;vertical-align:inherit;">SMS</th>
                <th style="width: 8%;vertical-align:inherit;">SalesMan</th>
                <th style="width: 8%;vertical-align:inherit;">Broker</th>
                <th style="width: 10%;vertical-align:inherit;">User</th>
                <th style="width: 10%;vertical-align:inherit;">CheckBlank</th>
            </tr>
        </thead>
        <tbody>
            @if (Model.mRightList != null)
            {
                for (int i = 0; i < Model.mRightList.Count; i++)
                {
                    <tr style="font-family:Tahoma;font-size:12pt;border: solid 1px lightgray;">
                        <td style="text-align:left;width:26%;">@Html.DisplayFor(m => Model.mRightList[i].PartyName, new { @value = Model.mRightList[i].PartyName, @style = "border:none;text-align:left;", @readonly = "readonly" })</td>
                        <td style="text-align:center;width:26%;" hidden="hidden">@Html.DisplayFor(m => Model.mRightList[i].PartyId, new { @value = Model.mRightList[i].PartyId, @style = "border:none;text-align:left;", @readonly = "readonly" })</td>
                        <td style="text-align:center;width:8%;">@Html.CheckBoxFor(m => Model.mRightList[i].SendEmail, new { @value = Model.mRightList[i].SendEmail, @style = "width:16px;height:16px;", @id = "SendEmail", @name = "SendEmail" })</td>
                        <td style="text-align:center;width:8%;">@Html.CheckBoxFor(m => Model.mRightList[i].SendSMS, new { @value = Model.mRightList[i].SendSMS, @style = "width:16px;height:16px;", @id = "SendSMS", @name = "SendSMS" })</td>
                        <td style="text-align:center;width:8%;">@Html.CheckBoxFor(m => Model.mRightList[i].SendSalesMan, new { @value = Model.mRightList[i].SendSalesMan, @style = "width:16px;height:16px;", @id = "SendSalesMan", @name = "SendSalesMan" })</td>
                        <td style="text-align:center;width:8%;">@Html.CheckBoxFor(m => Model.mRightList[i].SendBroker, new { @value = Model.mRightList[i].SendBroker, @style = "width:16px;height:16px;", @id = "SendBroker", @name = "SendBroker" })</td>
                        <td style="text-align:center;width:10%;">@Html.CheckBoxFor(m => Model.mRightList[i].SendUser, new { @value = Model.mRightList[i].SendUser, @style = "text-align:right;", @id = "SendUser", @name = "SendUser" })</td>
                        <td style="text-align:center;width:10%;">@Html.CheckBoxFor(m => Model.mRightList[i].SendCheckBlank, new { @value = Model.mRightList[i].SendCheckBlank, @style = "text-align:right;", @id = "SendCheckBlank", @name = "SendCheckBlank" })</td>
                    </tr>
                }
            }
        </tbody>
    </table>
</div>
