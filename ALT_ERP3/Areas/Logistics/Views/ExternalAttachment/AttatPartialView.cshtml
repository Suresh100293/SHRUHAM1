@model ALT_ERP3.Areas.Logistics.Models.ExternalAttachmentVM

<script type="text/javascript">
    $(document).ready(function ()
    {
        debugger;
        $('button[action|="Delete"]').click(function (event) {
            debugger;
            event.preventDefault();
            debugger;
            var url = '/Logistics/ExternalAttachment/DeleteUploadFile';
            var ModelData = {};
            ModelData["tempId"] = $(this).val();
            ModelData["Type"] = $("#Type").val();
            ModelData["Srl"] = $("#Srl").val();

            var DTO = { Model: ModelData };
            $.ajax({
                type: "POST",
                dataType: "json",
                data: JSON.stringify(DTO),
                cache: false,
                url: url,
                contentType: "application/json; charset=utf-8",
                beforeSend: function () {
                    $('.spinner').show();
                },
                success: function (data) {
                    debugger;
                    $('.spinner').hide();
                    var AttachDoc = $("#AttachDoc");
                    AttachDoc.html('');
                    AttachDoc.html(data.Html);
                },
            });
        });
    });
</script>

<table class="zui-tableww" id="AttachTable" style="width:90%;">
    <thead>
        <tr>
            <th style="width:10%;">Date</th>
            <th style="width:20%;">Name</th>
            <th style="width:5%;">Delete</th>
            <th style="width:5%;">Download</th>
            <th style="width:5%;">Image</th>
            <th style="width:20%;">Attach Ref.</th>
            <th style="width:20%;">Doc Type</th>
            <th style="width:5%;">Attach By</th>
        </tr>
    </thead>
    <tbody>

        @if (Model.DocumentList != null)
        {
            foreach (var fName in Model.DocumentList.ToList())
            {

        <tr>

            <td>@fName.DocDate</td>
            <td>@fName.FileName</td>
            @if (fName.AUTHIDS == "N")
            {
                <td></td>
            }
            else
            {
                <td>
                    <center><button type="button" action="Delete" value="@fName.tempId" style="padding: 4px 8px;all:unset;cursor:pointer;" title="Delete"><i class="glyphicon glyphicon-trash" style="color: red;font-size:30px;"></i></button></center>
                </td>
            }
            <td>
                <center>@Html.ActionLink(" ", "Download", "ExternalAttachment", new { Area = "Logistics", tempId = fName.tempId }, new { @class = "glyphicon glyphicon-download", @tooltip = "Download", @style = "color: blueviolet;font-size:35px;" })</center>

            </td>
            <td hidden="hidden">
                @fName.ImageStr
            </td>
            <td hidden="hidden">
                @fName.tempId
            </td>
            <td>
                @{
                    string imageSrc = string.Format("data:image/gif;base64,{0}", fName.ImageStr);
                    <a class="btnShow" id="@fName.tempId"><img src="@imageSrc" alt=@fName.FileName class="img-thumbnail" onclick="big_image(this.src,4)" style="height:50px;width:100px;" /></a>
                }
            </td>
            <td>
                @fName.RefType
            </td>
            <td>
                @fName.DocType
            </td>
            <td>
                @fName.ENTEREDBY
            </td>
        </tr>
            }
        }
    </tbody>
</table>



@Html.HiddenFor(x => x.Srl)
@Html.HiddenFor(x => x.Type)









