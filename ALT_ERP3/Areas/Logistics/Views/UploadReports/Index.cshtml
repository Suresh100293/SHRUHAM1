
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_LayoutMenu.cshtml";
}

<!DOCTYPE html>
<script type="text/javascript">
    $(document).ready(function () {
        $("#btnAddDocument").click(function (event) {
            event.preventDefault();
            var formData = new FormData();
            var totalFiles = document.getElementById("FileUpload").files.length;
            for (var i = 0; i < totalFiles; i++) {
                var file = document.getElementById("FileUpload").files[i];
                formData.append("FileUpload", file);
            }
            $.ajax({
                type: "POST",
                url: '@Url.Action("AttachDocument")',
                data: formData,
                dataType: 'json',
                contentType: false,
                processData: false,
                success: function (data) {
                    if (data.Status == "Success")
                    {
                        alert("Upload Sucessfully...!");
                        location.reload(true);
                    }
                    else
                    {
                        alert(data.Message);
                    }
                },
                error: function (error) {
                    alert("errror");
                }
            });
        });

    });
</script>

<header class="header fixed-top" style="position:fixed;background-color:lightgray;padding:6px;width:100%;margin-top:0%;">
    <div class="fixhead">
        <b class="CodeSt">Report File Upload</b>
        <span class="tools pull-right">
            <a href="~/DashBoard/ControlPanel" class="btn btn-danger" style="color:white;font-weight:bolder;font-size:13px;padding:3px 10px;" id="Cancel2">X</a>
        </span>
    </div>
</header>
<html>

<body>
    <div style="margin-top: 10px;">
        <br /><br /><br />
          <div class="form-group">
              <div class="col-sm-5">
                  <div class="form-group">
                      <label>File input</label>
                      <input type="file" id="FileUpload" multiple="multiple" />
                  </div>
                  <input type="submit" value="Upload" class="btn btn-warning" id="btnAddDocument" />
              </div>
              <div class="col-sm-7" style="min-height:470px;max-height:470px;overflow-y:auto;overflow-x:hidden;">
                  <table class="zui-table">
                      <thead>
                          <tr>
                              <th colspan="2">Report Files To Download</th>
                          </tr>
                          <tr>
                              <th>FileName</th>
                              <th>Download</th>
                          </tr>
                      </thead>
                      <tbody>
                          @foreach (var a in ViewData.Model)
                          {

                              <tr>
                                  <td>@a</td>
                                  <td>
                                      @Html.ActionLink("download", "DownloadFile", new { filename = a })
                                      <br />
                                  </td>
                              </tr>
                          }
                      </tbody>
                  </table>
              </div>
          </div>        
        
    </div>
</body>
</html>

<footer class="footer-section" style="height:33px;position:fixed;background-color:#4B4A4A;padding:3px;color:white;">
    <div class="row">
        <div class="col-sm-5"></div>
        <div class="col-sm-3" style="margin-top:4px;color:white;font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;">
            T.FAT ERP-iX9 by Suchan Software Private Limited
        </div>
        <div class="col-sm-4">
            <div class="pull-right">
                <a href="~/DashBoard/ControlPanel" class="btn btn-danger" style="font-size: 13px;padding:3px 12px;" id="Cancel">Cancel</a>
            </div>
        </div>
    </div>
</footer>
