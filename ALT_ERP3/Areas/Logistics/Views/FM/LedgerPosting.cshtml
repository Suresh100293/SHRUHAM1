@model ALT_ERP3.Areas.Logistics.Models.FMVM
@using Common;

<div class="modal-body">
    <div class="modal-content">
        <div class="modal-header" style="background-color:#cccccc;padding-top:5px;">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h4 class="modal-title"><b>Ledger Posting</b></h4>
        </div>
        <div class="modal-body">
            <div class="grid" id="LedgerPostTable" style="max-height:360px;min-height:360px; width:100%; overflow: scroll;">
                <table id="LedgerPostgrid" class="zui-table">
                    <thead>
                        <tr role="row" style="font-family:Tahoma;font-size:9pt;">
                            <th style="width:3%">Sr.</th>
                            <th style="width:15%">Code</th>
                            <th style="width:35%">Account Descr</th>
                            <th style="width:15%">Debit</th>
                            <th style="width:15%">Credit</th>
                            <th style="width:18%">Related To</th>
                        </tr>
                    </thead>
                    <tbody>
                        @if (Model.LedgerPostList != null)
                        {
                            foreach (var item in @Model.LedgerPostList.ToList())
                            {
                                <tr id="datacharge" style="font-family:Tahoma;font-size:9pt;border:solid 1px lightgray;">
                                    <td style="width:3%;">@item.tempId</td>
                                    <td style="width:15%;">@item.Code</td>
                                    <td style="width:35%;">@item.AccountName</td>
                                    <td style="width:15%;text-align:right">@GetAbsolute(@item.Debit)</td>
                                    <td style="width:15%;text-align:right">@GetAbsolute(@item.Credit)</td>
                                    <td style="width:10%;" hidden="hidden">@item.RefDoc</td>
                                    <td style="width:10%;" hidden="hidden">@item.TDSFlag</td>
                                    <td hidden="hidden">@item.Party</td>
                                    <td>@item.RefDoc</td>
                                    <td hidden="hidden">@item.Reference</td>
                                    <td hidden="hidden">@item.DelyCode</td>
                                </tr>
                            }
                        }
                    </tbody>
                    <tfoot>
                        <tr style="font-family:Tahoma;font-size:9pt;font-weight:bolder;border: solid 1px lightgray;background-color:lightgray;">
                            <td style="width:3%;"></td>
                            <td style="width:15%;"></td>
                            <td style="width:35%;">Total</td>
                            <td style="width:15%;text-align:right" id="txtledpostdeb"></td>
                            <td style="width:15%;text-align:right" id="txtledpostcred"></td>
                            <td style="width:18%;"></td>
                        </tr>
                    </tfoot>
                </table>

            </div>
        </div>
        <div class="modal-footer" style="background-color:#cccccc;height:42px;padding-bottom:5px;padding-top:5px;border-radius: 0px 0px 5px 5px;">
            <button type="button" class="btn btn-warning" data-dismiss="modal" id="SaveLedgerPost">Save</button>
            <button data-dismiss="modal" class="btn btn-danger" type="button">Cancel</button>
        </div>
    </div>
</div>

<script>
    $(document).ready(function () {
        document.getElementById('txtledpostdeb').innerHTML = parseFloat(@Model.TotDebit).toFixed(2);
        document.getElementById('txtledpostcred').innerHTML = parseFloat(@Model.TotCredit).toFixed(2);
        var tdeb = 0;
        var tcred = 0;

        $('#SaveLedgerPost').click(function (event) {
            event.preventDefault();
           SaveFM();
        });
    });
</script>



@functions {
    decimal GetAbsolute(decimal dcb)
    {
        var msg = Math.Abs(dcb);
        return msg;
    }

    string GetFixedTwo(decimal dcb)
    {
        decimal d = Math.Floor(100 * dcb) / 100;
        string s = d.ToString("N2");
        return s;
    }
}