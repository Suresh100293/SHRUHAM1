@model ALT_ERP3.Areas.Logistics.Models.FreightMemoReportVM

<style>
    .ModalLabel {
        font-weight: bold !important;
        color: black !important;
        padding: 3px !important;
    }

    .multiselect-container {
        width: 215px !important;
    }

    .td1 {
        width: 500px !important;
    }

    .td2 {
        width: 500px !important;
    }

    .td3 {
        width: 500px !important;
    }

    .btn-group, .btn-group-vertical {
        float: right;
    }
</style>

<script src="@Url.Content("~/Content/js/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Content/js/jquery.constrain.js")" type="text/javascript"></script>

@*<link href="~/Content/bootstrap-multiselect.css" rel="stylesheet" />
<script src="~/Content/bootstrap-multiselect.js"></script>*@

<script type="text/javascript">
    $(document).ready(function () {

        $('#Fromdate').val('@Model.FromDate');
        $('#ToDate').val('@Model.ToDate');

        $("#FreightMemoNo").val("");
        $("#txtFMNO").val("");
        if ('@Model.FreightMemoNo' != "") {
            $("#LorryChallanNo").val('@Model.FreightMemoNo');
            $("#txtFMNO").val('@Model.FreightMemoNo');
        }

        $("#txtReportName").val("");
        if ('@Model.ReportName' != "") {
            $("#txtReportName").val('@Model.ReportName');
        }

        $("#ReportTypeL").val("");
        if ('@Model.ReportTypeL' != "") {
            $("#ReportTypeL").val('@Model.ReportTypeL');
            $("#Ledger").html($(".ReportTypeL option:selected").text());
        }

        $('#Branch').val('');
        var CommonValue = "";
        if ('@Model.Branch' != "") {
            $.each('@Model.Branch'.split(','), function (idx, val) {
                $(".BranchL option[value='" + val + "']").attr("selected", true);
                CommonValue += "'" + val + "',";
            });
            CommonValue = CommonValue.toString().substring(0, CommonValue.length - 1);
            $('#Branch').val(CommonValue);
        }

        $("#LoadFrom").val("");
        CommonValue = "";
        if ('@Model.LoadFrom' != "") {
            $.each('@Model.LoadFrom'.split(','), function (idx, val) {
                $(".LoadFromL option[value='" + val + "']").attr("selected", true);
                CommonValue += "'" + val + "',";
            });
            CommonValue = CommonValue.toString().substring(0, CommonValue.length - 1);
            $('#LoadFrom').val(CommonValue);
        }

        $("#SendTo").val("");
        CommonValue = "";
        if ('@Model.SendTo' != "") {
            $.each('@Model.SendTo'.split(','), function (idx, val) {
                $(".SendToL option[value='" + val + "']").attr("selected", true);
                CommonValue += "'" + val + "',";
            });
            CommonValue = CommonValue.toString().substring(0, CommonValue.length - 1);
            $('#SendTo').val(CommonValue);
        }

        $("#Broker").val("");
        CommonValue = "";
        if ('@Model.Broker' != "") {
            $.each('@Model.Broker'.split(','), function (idx, val) {
                $(".BrokerL option[value='" + val + "']").attr("selected", true);
                CommonValue += "'" + val + "',";
            });
            CommonValue = CommonValue.toString().substring(0, CommonValue.length - 1);
            $('#Broker').val(CommonValue);
        }

        $("#Driver").val("");
        CommonValue = "";
        if ('@Model.Driver' != "") {
            $.each('@Model.Driver'.split(','), function (idx, val) {
                $(".DriverL option[value='" + val + "']").attr("selected", true);
                CommonValue += "'" + val + "',";
            });
            CommonValue = CommonValue.toString().substring(0, CommonValue.length - 1);
            $('#Driver').val(CommonValue);
        }

        $("#PAyableAt").val("");
        CommonValue = "";
        if ('@Model.PAyableAt' != "") {
            $.each('@Model.PAyableAt'.split(','), function (idx, val) {
                $(".PAyableAtL option[value='" + val + "']").attr("selected", true);
                CommonValue += "'" + val + "',";
            });
            CommonValue = CommonValue.toString().substring(0, CommonValue.length - 1);
            $('#PAyableAt').val(CommonValue);
        }

        $("#TruckNo").val("");
        CommonValue = "";
        if ('@Model.TruckNo' != "") {
            $.each('@Model.TruckNo'.split(','), function (idx, val) {
                $(".TruckNoL option[value='" + val + "']").attr("selected", true);
                CommonValue += "'" + val + "',";
            });
            CommonValue = CommonValue.toString().substring(0, CommonValue.length - 1);
            $('#TruckNo').val(CommonValue);
        }


        $("#VehicleType").val("");
        if ('@Model.VehicleType' != "")
        {
            if ('@Model.VehicleType' == "A") {
                $("#VAll").prop("checked", true);
                $("#VHire").prop("checked", false);
                $("#VOwn").prop("checked", false);
                $("#VAttach").prop("checked", false);
                $("#VehicleType").val("A");
            }
            else if ('@Model.VehicleType' == "H") {
                $("#VAll").prop("checked", false);
                $("#VHire").prop("checked", true);
                $("#VOwn").prop("checked", false);
                $("#VAttach").prop("checked", false);
                $("#VehicleType").val("H");
            }
            else if ('@Model.VehicleType' == "AA") {
                $("#VAll").prop("checked", false);
                $("#VHire").prop("checked", false);
                $("#VOwn").prop("checked", false);
                $("#VAttach").prop("checked", true);
                $("#VehicleType").val("AA");
            }
            else if ('@Model.VehicleType' == "O") {
                $("#VAll").prop("checked", false);
                $("#VHire").prop("checked", false);
                $("#VOwn").prop("checked", true);
                $("#VAttach").prop("checked", false);
                $("#VehicleType").val("O");
            }
        }
        else
        {
            $("#VAll").prop("checked", true);
            $("#VHire").prop("checked", false);
            $("#VOwn").prop("checked", false);
            $("#VAttach").prop("checked", false);
            $("#VehicleType").val("A");
        }

        $("#FMExpensesDetails").val(false);
        if ('@Model.FMExpensesDetails'=="True" || '@Model.FMExpensesDetails'=="true") {
            $("#FMExpensesDetails").val(true);
            $(".chkFMExpensesDetails").prop("checked", true);
        }

        $("#TripDetails").val(false);
        if ('@Model.TripDetails'=="True" || '@Model.TripDetails'=="true") {
            $("#TripDetails").val(true);
            $(".chkTripDetails").prop("checked", true);
        }

        $("#DispatchDetails").val(false);
        if ('@Model.DispatchDetails'=="True" || '@Model.DispatchDetails'=="true") {
            $("#DispatchDetails").val(true);
            $(".chkDispatchDetails").prop("checked", true);
        }

        $("#LorryReceiptDetails").val(false);
        $('.chkLRExpensesDetails').prop('disabled', true);
        if ('@Model.LorryReceiptDetails'=="True" || '@Model.LorryReceiptDetails'=="true") {
            $("#LorryReceiptDetails").val(true);
            $(".chkLorryDetails").prop("checked", true);
            $('.chkLRExpensesDetails').prop('disabled', false);
        }
        $("#PLAccount").val(false);
        if ('@Model.PLAccount'=="True" || '@Model.PLAccount'=="true") {
            $("#PLAccount").val(true);
            $(".chkPLAccount").prop("checked", true);
            $(".chkPLAccount").prop("disabled", false);
        } else {
            $(".chkPLAccount").prop("checked", false);
            $(".chkPLAccount").prop("disabled", true);
        }
        $("#LRExpensesDetails").val(false);
        if ('@Model.LRExpensesDetails'=="True" || '@Model.LRExpensesDetails'=="true") {
            $("#LRExpensesDetails").val(true);
            $(".chkLRExpensesDetails").prop("checked", true);
        }

        $("#LRExpensesDetails").val(false);
        if ('@Model.LRExpensesDetails'=="True" || '@Model.LRExpensesDetails'=="true") {
            $("#LRExpensesDetails").val(true);
            $(".chkLRExpensesDetails").prop("checked", true);
        }
        
        if ('@Model.PaymentDetails'=="True" || '@Model.PaymentDetails'=="true") {
            $(".PaymentDetails").prop("checked", true);
        }
        debugger;
        if ('@Model.Advance' == "True" && '@Model.Balance' == "True")
        {
            $(".ADBChrges").prop("checked", true);
            $(".ADBAdvance").prop("checked", false);
            $(".ADBBalance").prop("checked", false);
        } else {
            if ('@Model.Advance'=="True" || '@Model.Advance'=="true") {
            $(".ADBAdvance").prop("checked", true);
        }
        if ('@Model.Balance'=="True" || '@Model.Balance'=="true") {
            $(".ADBBalance").prop("checked", true);
        }
        }
        
        debugger;
        //if ($(".ADBAdvance").is(":checked") == true && $(".ADBBalance").is(":checked") == true)
        //{
        //    $(".ADBChrges").prop("checked", true);
        //    $(".ADBAdvance").prop("checked", false);
        //    $(".ADBBalance").prop("checked", false);
        //}

        $("input[name$='ADBChrges']").change(function () {

            ChargesCoumnsList();
        });




        $('#SubmitSaveReport').click(function (event) {
            event.preventDefault();
            $('#SaveReportName').modal('show');
        });
        $('#btnopnFormat').click(function(event){
            event.preventDefault();
            var ModelData = {};
            ModelData["ViewDataId"] ='@Model.ViewDataId';
            var DTO = { Model: ModelData };
            var url = '@Url.Action("GetReportFormat")';
            $.ajax({
                type: "POST",
                dataType: "json",
                data: JSON.stringify(DTO),
                cache: false,
                url: url,
                contentType: "application/json;charset=utf-8",
                beforeSend: function () {
                    $('.spinner').show();
                },
                success: function (data) {
                    $("#ErrorMessage").hide();
                    $('.spinner').hide();
                    $('#updTfatsearch').modal('show');
                    $('#updTfatsearchDiv').html(data.Html);
                },
                error: function () {
                    alert("Error occured while processing your request.");
                }
            });
        });
        $(".chkFMExpensesDetails").change(function () {
            if (this.checked) {
                $('#FMExpensesDetails').val(true);
                FMExpensesCoumnsList(true);
            } else {
                $('#FMExpensesDetails').val(false);
                FMExpensesCoumnsList(false);
            }
        });
        $(".chkTripDetails").change(function () {
            if (this.checked) {
                $('#TripDetails').val(true);
                TripCoumnsList(true);
            } else {
                $('#TripDetails').val(false);
                TripCoumnsList(false);
            }
        });

        $(".chkLRExpensesDetails").change(function () {
            if (this.checked) {
                $('#LRExpensesDetails').val(true);
                LRExpensesCoumnsList(true);
            } else {
                $('#LRExpensesDetails').val(false);
                LRExpensesCoumnsList(false);
            }
        });

        $(".chkDispatchDetails").change(function () {
            if (this.checked) {
                $('#DispatchDetails').val(true);
                LCCoumnsList(true);
            } else {
                $('#DispatchDetails').val(false);
                LCCoumnsList(false);
            }
        });

        $(".chkLorryDetails").change(function () {
            if (this.checked) {
                $('#LorryReceiptDetails').val(true);
                $('#PLAccount').val(false);
                $('.chkLRExpensesDetails').prop('disabled', false);
                $('#LRExpensesDetails').val(false);
                LRCoumnsList(true);
                $(".chkPLAccount").prop("disabled", false);
                $(".chkPLAccount").prop("checked", false);
            } else {
                $('#LorryReceiptDetails,#PLAccount').val(false);
                $('.chkLRExpensesDetails').prop("checked", false);
                $('.chkLRExpensesDetails').prop('disabled', true);
                $('#LRExpensesDetails').val(false);
                LRCoumnsList(false);
                $(".chkPLAccount").prop("disabled", true);
                $(".chkPLAccount").prop("checked", false);
            }
        });
        $(".PaymentDetails").change(function () {
            if (this.checked) {
                PaymentCoumnsList(true);
            } else {
                PaymentCoumnsList(false);
            }
        });
        $(".chkPLAccount").change(function () {
            if (this.checked) {
                $('#PLAccount').val(true);
                PLCoumnsList(true, $("#ReportTypeL").val());
            } else {
                $('#PLAccount').val(false);
                PLCoumnsList(false, $("#ReportTypeL").val());
            }
        });

        $("input[name$='VehicleType']").change(function () {
            $('#VehicleType').val(this.value);
        });

        $(".txtFMNO").blur(function () {
            $("#FreightMemoNo").val(this.value);
        });
        $(".ReportTypeL").change(function () {
            $("#ReportTypeL").val(this.value);
            $("#Ledger").html($(".ReportTypeL option:selected").text());
            ChangeFormatCoumnsList();
        });

        $(".BranchL").change(function () {
            $('#Branch').val('');
            var selected = "";
            $(".BranchL :selected").each(function () {
                selected += ("'" + $(this).val() + "',");
            });
            selected = selected.toString().substring(0, selected.length - 1);
            $('#Branch').val(selected)
            return false;
        });

        $(".LoadFromL").change(function () {

            $('#LoadFrom').val('');
            var selected = "";
            $(".LoadFromL :selected").each(function () {
                selected += ("'" + $(this).val() + "',");
            });
            selected = selected.toString().substring(0, selected.length - 1);
            $('#LoadFrom').val(selected)
            return false;
        });

        $(".SendToL").change(function () {

            $('#SendTo').val('');
            var selected = "";
            $(".SendToL :selected").each(function () {
                selected += ("'" + $(this).val() + "',");
            });
            selected = selected.toString().substring(0, selected.length - 1);
            $('#SendTo').val(selected)
            return false;
        });

        $(".BrokerL").change(function () {

            $('#Broker').val('');
            var selected = "";
            $(".BrokerL :selected").each(function () {
                selected += ("'" + $(this).val() + "',");
            });
            selected = selected.toString().substring(0, selected.length - 1);
            $('#Broker').val(selected)
            return false;
        });

        $(".DriverL").change(function () {

            $('#Driver').val('');
            var selected = "";
            $(".DriverL :selected").each(function () {
                selected += ("'" + $(this).val() + "',");
            });
            selected = selected.toString().substring(0, selected.length - 1);
            $('#Driver').val(selected)
            return false;
        });

        $(".PAyableAtL").change(function () {

            $('#PAyableAt').val('');
            var selected = "";
            $(".PAyableAtL :selected").each(function () {
                selected += ("'" + $(this).val() + "',");
            });
            selected = selected.toString().substring(0, selected.length - 1);
            $('#PAyableAt').val(selected)
            return false;
        });

        $(".TruckNoL").change(function () {

            $('#TruckNo').val('');
            var selected = "";
            $(".TruckNoL :selected").each(function () {
                selected += ("'" + $(this).val() + "',");
            });
            selected = selected.toString().substring(0, selected.length - 1);
            $('#TruckNo').val(selected)
            return false;
        });
        $('.BranchL,.LoadFromL,.SendToL,.BrokerL,.PAyableAtL,.TruckNoL,.DriverL').multiselect({
            includeSelectAllOption: true,
            enableFiltering: true,
            enableCaseInsensitiveFiltering: true,
            filterPlaceholder: 'Search for something...',
            buttonWidth: '235',
            numberDisplayed: 1,
            nonSelectedText: 'Select Item',
        })
    });

</script>


<table class="table table-striped table-bordered">
    <thead>
    </thead>
    <tbody>
        <tr>
            <td class="td1">
                <label class=" ModalLabel  control-label" style="width:auto;">Freight-Memo No :</label>
                @Html.TextBoxFor(x => x.FreightMemoNo, new { @class = "form-control txtFMNO", @id = "txtFMNO", @style = "width:100px;display: inline-table;float: initial;" })
            </td>
            <td class="td2">
                <label class=" ModalLabel  control-label" style="width:auto;">Vehicle Type :</label>
                <div style="display:flex;float:right;">
                    <input type="radio" class="form-control VAll" name="VehicleType" id="VAll" value="A" style="height:20px;width:35px;" /><label class=" bold control-label" style="color:black;padding: 3px 0px 0px 0px;"> All</label>
                    <input type="radio" class="form-control VHire" name="VehicleType" id="VHire" value="H" style="height:20px;width:35px;" /><label class=" bold control-label" style="color:black;padding: 3px 0px 0px 0px;"> Hire</label>
                    <input type="radio" class="form-control VOwn" name="VehicleType" id="VOwn" value="O" style="height:20px;width:35px;" /><label class=" bold control-label" style="color:black;padding: 3px 0px 0px 0px;"> Own</label>
                    <input type="radio" class="form-control VAttach" name="VehicleType" id="VAttach" value="AA" style="height:20px;width:35px;" /><label class=" bold control-label" style="color:black;padding: 3px 0px 0px 0px;"> Attach</label>
                </div>
            </td>
            <td class="td3">
                <label class=" ModalLabel  control-label" style="width:auto;">Report Type :</label>
                @Html.DropDownListFor(x => x.ReportTypeL, Model.ReportsType, new { @class = "form-control ReportTypeL", @style = "float: right;width:auto;display: inline-table;" })
            </td>
        </tr>
        <tr>
            <td class="td1">
                <label class=" ModalLabel  control-label" style="width:auto;"> Branch :</label>
                @Html.ListBoxFor(x => x.BranchL, Model.BranchesOnly, new { @class = "BranchL", @id = "BranchL" })
            </td>
            <td class="td2">
                <label class=" ModalLabel  control-label" style="width:auto;">Load-From :</label>
                @Html.ListBoxFor(x => x.LoadFromL, Model.Branches, new { @class = "LoadFromL", @id = "LoadFromL" })
            </td>
            <td class="td3">
                <label class=" ModalLabel  control-label" style="width:auto;">Send-To :</label>
                @Html.ListBoxFor(x => x.SendToL, Model.Branches, new { @class = "SendToL", @id = "SendToL" })
            </td>
        </tr>
        <tr>
            <td class="td1">
                <label class=" ModalLabel  control-label" style="width:auto;">BrokerL :</label>
                @Html.ListBoxFor(x => x.BrokerL, Model.Brokers, new { @class = "BrokerL", @id = "BrokerL" })
            </td>
            <td class="td2">
                <label class=" ModalLabel  control-label" style="width:auto;">PayableAt :</label>
                @Html.ListBoxFor(x => x.PAyableAtL, Model.BranchesOnly, new { @class = "PAyableAtL", @id = "PAyableAtL" })
            </td>
            <td class="td3">
                <label class=" ModalLabel  control-label" style="width:auto;">TruckNo :</label>
                @Html.ListBoxFor(x => x.TruckNoL, Model.TruckNos, new { @class = "TruckNoL", @id = "TruckNoL" })
            </td>
        </tr>
        <tr>
            <td class="td1">
                <label class=" ModalLabel  control-label" style="width:auto;">Driver :</label>
                @Html.ListBoxFor(x => x.DriverL, Model.Drivers, new { @class = "DriverL", @id = "DriverL" })
            </td>
            <td class="td2">
                
            </td>
            <td class="td3">
                
            </td>
        </tr>
        <tr>
            <td class="td1">
                <label class=" ModalLabel  control-label" style="width:auto;">Show FM Expenses :</label>
                <div style="display:flex;float:right;">
                    <input type="checkbox" class="form-control chkFMExpensesDetails" id="FMExpensesDetails" value="FMExpensesDetails" style="height:20px;width:35px;" />@*<label class=" bold control-label" style="color:black;padding: 3px 0px 0px 0px;"> All</label>*@
                </div>
            </td>
            <td class="td2">
                <label class=" ModalLabel  control-label" style="width:auto;">Show LC Details :</label>
                <div style="display:flex;float:right;">
                    <input type="checkbox" class="form-control chkDispatchDetails" id="DispatchDetails" value="DispatchDetails" style="height:20px;width:35px;" />@*<label class=" bold control-label" style="color:black;padding: 3px 0px 0px 0px;"> All</label>*@
                </div>
            </td>
            <td class="td3">
                <label class=" ModalLabel  control-label" style="width:auto;">Show LR Details :</label>
                <div style="display:flex;float:right;">
                    <input type="checkbox" class="form-control chkLorryDetails" id="LorryDetails" value="LorryDetails" style="height:20px;width:35px;" />@*<label class=" bold control-label" style="color:black;padding: 3px 0px 0px 0px;"> All</label>*@
                </div>
            </td>
        </tr>
        <tr>
            <td class="td1">
                <label class=" ModalLabel  control-label" style="width:auto;">P/L AC :</label>
                <div style="display:flex;float:right;">
                    <input type="checkbox" class="form-control chkPLAccount" id="PLAccount" value="@Model.PLAccount" style="height:20px;width:35px;" disabled />
                </div>
            </td>
            <td class="td2">
                <label class=" ModalLabel  control-label" style="width:auto;">Show LR Expenses :</label>
                <div style="display:flex;float:right;">
                    <input type="checkbox" class="form-control chkLRExpensesDetails" id="LRExpensesDetails" value="LRExpensesDetails" style="height:20px;width:35px;" />@*<label class=" bold control-label" style="color:black;padding: 3px 0px 0px 0px;"> All</label>*@
                </div>
            </td>
            <td class="td3">
                <label class=" ModalLabel  control-label" style="width:auto;">Show Payment Details :</label>
                <div style="display:flex;float:right;">
                    <input type="checkbox" class="form-control PaymentDetails" name="Chrges" id="PaymentDetails" value="PaymentDetails" style="height:20px;width:35px;" />@*<label class=" bold control-label" style="color:black;padding: 3px 0px 0px 0px;"> All</label>*@
                </div>
            </td>
            
        </tr>
        <tr>
            <td class="td1">
                <label class=" ModalLabel  control-label" style="width:auto;">Show Trip :</label>
                <div style="display:flex;float:right;">
                    <input type="checkbox" class="form-control chkTripDetails" id="TripDetails" value="TripDetails" style="height:20px;width:35px;" />@*<label class=" bold control-label" style="color:black;padding: 3px 0px 0px 0px;"> All</label>*@
                </div>
            </td>
            <td class="td2"></td>
            <td class="td3">
                <label class=" ModalLabel  control-label" style="width:auto;">Unpaid OF :</label>
                <div style="display:flex;float:right;">
                    <input type="radio" class="form-control ADBChrges" name="ADBChrges" id="ADBAll" value="ADBAll" style="height:20px;width:35px;" /><label class=" bold control-label" style="color:black;padding: 3px 0px 0px 0px;"> All</label>
                    <input type="radio" class="form-control ADBAdvance" name="ADBChrges" id="Advance" value="Advance" style="height:20px;width:35px;" /><label class=" bold control-label" style="color:black;padding: 3px 0px 0px 0px;"> ADV.</label>
                    <input type="radio" class="form-control ADBBalance" name="ADBChrges" id="Balance" value="Balance" style="height:20px;width:35px;" /><label class=" bold control-label" style="color:black;padding: 3px 0px 0px 0px;"> BAL.</label>
                </div>
            </td>
        </tr>

    </tbody>
</table>

