@model ALT_ERP3.Areas.Vehicles.Models.TripSheetRVM

<style>
    .ModalLabel {
        font-weight: bold !important;
        color: black !important;
        padding: 3px !important;
    }

    .td1 {
        width: 500px !important;
    }

    .td2 {
        width: 500px !important;
    }

    .td3 {
        width: 500px !important;
    }
</style>
<script src="@Url.Content("~/Content/js/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Content/js/jquery.constrain.js")" type="text/javascript"></script>
<link href="~/Content/bootstrap-multiselect.css" rel="stylesheet" />
<script src="~/Content/bootstrap-multiselect.js"></script>
<script type="text/javascript">
    $(document).ready(function () {
        debugger;


        $(".ReportName").val("");
        if ('@Model.ReportTypeL'!="" && '@Model.ReportTypeL'!=null) {
            $(".ReportName").val('@Model.ReportTypeL');
        }

         $("#txtReportName").val("");
        if ('@Model.ReportName' != "") {
            $("#txtReportName").val('@Model.ReportName');
        }


        $('#Fromdate').val('@Model.FromDate');
        $('#ToDate').val('@Model.ToDate');

        $("#FormatCode").val('@Model.ViewDataId');

        $("#Driver").val("");
        if ('@Model.Driver' != "") {
            $.each('@Model.Driver'.split(','), function (idx, val) {
                $(".DriverL option[value='" + val + "']").attr("selected", true);
            });
            $('#Driver').val('@Model.Driver');
        }

        $('#Branch').val('');
        if ('@Model.Branch' != "") {
            $.each('@Model.Branch'.split(','), function (idx, val) {
                $(".BranchL option[value='" + val + "']").attr("selected", true);
            });
            $('#Branch').val('@Model.Branch');
        }


        $(".ReportTypeL").change(function () {
            debugger;
            $("#FormatCode").val(this.value);
            $("#Ledger").html($(".ReportTypeL option:selected").text());
        });
        $('input[type=radio][name=rdbDriver]').change(function () {
            if (this.value == 'All') {
                $("#divAllDriver").removeClass("hidden");
                $("#divActiveDriver").addClass("hidden");
                $("#divInActiveDriver").addClass("hidden");
            }
            else if (this.value == 'Active') {
                $("#divActiveDriver").removeClass("hidden");
                $("#divAllDriver").addClass("hidden");
                $("#divInActiveDriver").addClass("hidden");
            } else if (this.value == 'InActive') {
                $("#divInActiveDriver").removeClass("hidden");
                $("#divAllDriver").addClass("hidden");
                $("#divActiveDriver").addClass("hidden");
            }
            $(".DriverL,.ActiveDriverL,.InActiveDriverL").multiselect('clearSelection');
            $('#Driver').val('');
        });
        $(".BranchL").change(function () {
            debugger;
            $('#Branch').val('');
            var selected = "";
            $(".BranchL :selected").each(function () {
                selected += ("" + $(this).val() + ",");
            });
            selected = selected.toString().substring(0, selected.length - 1);
            $('#Branch').val(selected);
            return false;
        });
        
        $(".DriverL").change(function () {
            $('#Driver').val('');
            var selected = "";
            $(".DriverL :selected").each(function () {
                selected += ("" + $(this).val() + ",");
            });
            selected = selected.toString().substring(0, selected.length - 1);
            $('#Driver').val(selected);
            return false;
        });
        $(".ActiveDriverL").change(function () {
            $('#Driver').val('');
            var selected = "";
            $(".ActiveDriverL :selected").each(function () {
                selected += ("" + $(this).val() + ",");
            });
            selected = selected.toString().substring(0, selected.length - 1);
            $('#Driver').val(selected);
            return false;
        });
        $(".InActiveDriverL").change(function () {
            $('#Driver').val('');
            var selected = "";
            $(".InActiveDriverL :selected").each(function () {
                selected += ("" + $(this).val() + ",");
            });
            selected = selected.toString().substring(0, selected.length - 1);
            $('#Driver').val(selected);
            return false;
        });



        $('#SubmitSaveReport').click(function (event) {
            event.preventDefault();
            $('#SaveReportName').modal('show');
        });

        $('#btnopnFormat').click(function(event){
            event.preventDefault();
            var ModelData = {};
            ModelData["ViewDataId"] = $("#FormatCode").val();
            var DTO = { Model: ModelData };
            var url = '@Url.Action("GetReportFormat")';
            $.ajax({
                type: "POST",
                dataType: "json",
                data: JSON.stringify(DTO),
                cache: false,
                url: url,
                contentType: "application/json;charset=utf-8",
                beforeSend: function () {
                    $('.spinner').show();
                },
                success: function (data) {
                    $("#ErrorMessage").hide();
                    $('.spinner').hide();
                    $('#updTfatsearch').modal('show');
                    $('#updTfatsearchDiv').html(data.Html);
                },
                error: function () {
                    alert("Error occured while processing your request.");
                }
            });
        });

        $('.BranchL,.DriverL,.ActiveDriverL,.InActiveDriverL').multiselect({
            includeSelectAllOption: true,
            enableFiltering: true,
            enableCaseInsensitiveFiltering: true,
            filterPlaceholder: 'Search for something...',
            buttonWidth: '235',
            numberDisplayed: 1,
            nonSelectedText: 'Select Item',
        })
    });
</script>
<table class="table table-striped table-bordered">
    <thead>
    </thead>
    <tbody>
        <tr>
            <td class="td1">
                <label class=" ModalLabel  control-label" style="width:auto;"> Branch :</label>
                @Html.ListBoxFor(x => x.BranchL, Model.BranchList, new { @class = "BranchL", @id = "BranchL" })
            </td>
            <td class="td2" colspan="2">
                <div style="display: flex;">
                    <input type="radio" class="form-control" name="rdbDriver" value="All" style="height:20px;width:35px;" checked=""><label class=" bold control-label" style="margin-top: 4px;">All Driver</label>
                    <input type="radio" class="form-control" name="rdbDriver" value="Active" style="height:20px;width:35px;"><label class=" bold control-label" style="margin-top: 4px;">Active Driver</label>
                    <input type="radio" class="form-control" name="rdbDriver" value="InActive" style="height:20px;width:35px;"><label class=" bold control-label" style="margin-top: 4px;">InActive Driver</label>
                </div>
                <label class=" ModalLabel  control-label" style="width:auto;">Driver :</label>
                <div id="divAllDriver">
                    @Html.ListBoxFor(x => x.DriverL, Model.DriverList, new { @class = "DriverL", @id = "DriverL" })
                </div>
                <div id="divActiveDriver" class="hidden">
                    @Html.ListBoxFor(x => x.ActiveDriverL, Model.ActiveDriverList, new { @class = "ActiveDriverL", @id = "ActiveDriverL" })
                </div>
                <div id="divInActiveDriver" class="hidden">
                    @Html.ListBoxFor(x => x.InActiveDriverL, Model.InActiveDriverList, new { @class = "InActiveDriverL", @id = "InActiveDriverL" })
                </div>
                <label class=" ModalLabel  control-label hidden" style="width:auto;">Report Type :</label>
                @Html.DropDownListFor(x => x.ReportTypeL, Model.ReportsType, new { @class = "form-control ReportTypeL", @style = "float: right;width:163px;display: none;" })
            </td>
        </tr>
        <tr>
            <td class="td1" colspan="3">
                <a href="#" title="For Better Analysis Get Report Upto Current Date."><span class="glyphicon glyphicon-question-sign btn-info" style="font-size: 17px;line-height: 18px;"></span></a>
                <label class=" ModalLabel  control-label" title="UnAdjust Voucher Details Show Only In Driver Summary." style="width:auto;">With UnAdjust Voucher Analysis :</label>
                @Html.CheckBoxFor(x => x.AllLedgerReq, new { @style = "width:20px;height:20px;" })
            </td>
        </tr>
    </tbody>
</table>


