@model ALT_ERP3.Areas.Vehicles.Models.VehicleTrackingVM
@using Common;
@{
    ViewBag.Title = "SystemFlow";
    Layout = null;
}
<script type="text/javascript">

    $(document).ready(function () {

        GetMyFavorites('@Model.ViewDataId');
        $("#ScheduleAndUptoDays,#UptoDays,#VA_UptoDays,#CT_UptoDays").constrain({ allow: { regex: "[0-9]" } });

        if ('@Model.AllTime' == "True" || '@Model.AllTime' == "true") {
            $("#UptoDays,#UptoDaysReq,#OnlySchedule,#ScheduleAndUptoDays,#ScheduleAndUptoDaysReq").prop("disabled", true);
        } else if ('@Model.UptoDaysReq' == "True" || '@Model.UptoDaysReq' == "true") {
            $("#AllTime,#OnlySchedule,#ScheduleAndUptoDays,#ScheduleAndUptoDaysReq").prop("disabled", true);
        }else if ('@Model.OnlySchedule' == "True" || '@Model.OnlySchedule' == "true") {
            $("#UptoDays,#UptoDaysReq,#AllTime,#ScheduleAndUptoDays,#ScheduleAndUptoDaysReq").prop("disabled", true);
        }else if ('@Model.ScheduleAndUptoDaysReq' == "True" || '@Model.ScheduleAndUptoDaysReq' == "true") {
            $("#UptoDays,#UptoDaysReq,#OnlySchedule,#AllTime").prop("disabled", true);
        }

        if ('@Model.VA_AllTime' == "True" || '@Model.VA_AllTime' == "true") {
            $("#VA_UptoDays,#VA_UptoDaysReq,#VA_CompleteReq").prop("disabled", true);
        } else if ('@Model.VA_UptoDaysReq' == "True" || '@Model.VA_UptoDaysReq' == "true") {
            $("#VA_AllTime,#VA_CompleteReq").prop("disabled", true);
        } else if ('@Model.VA_CompleteReq' == "True" || '@Model.VA_CompleteReq' == "true") {
            $("#VA_UptoDays,#VA_UptoDaysReq,#VA_AllTime").prop("disabled", true);
        }

        if ('@Model.CT_AllTime' == "True" || '@Model.CT_AllTime' == "true") {
            $("#CT_UptoDays,#CT_UptoDaysReq,#CT_DeliveryReq").prop("disabled", true);
        } else if ('@Model.CT_UptoDaysReq' == "True" || '@Model.CT_UptoDaysReq' == "true") {
            $("#CT_AllTime,#CT_DeliveryReq").prop("disabled", true);
        } else if ('@Model.CT_DeliveryReq' == "True" || '@Model.CT_DeliveryReq' == "true") {
            $("#VA_UptoDays,#VA_UptoDaysReq,#VA_AllTime").prop("disabled", true);
        }

        $("#AllTime").change(function (event) {
            event.preventDefault();
            if (this.checked) {
                $("#UptoDays,#UptoDaysReq,#OnlySchedule,#ScheduleAndUptoDays,#ScheduleAndUptoDaysReq").prop("disabled", true);
                $("#ScheduleAndUptoDays,#UptoDays").val("0");
            } else {
                $("#UptoDays,#UptoDaysReq,#OnlySchedule,#ScheduleAndUptoDays,#ScheduleAndUptoDaysReq").prop("disabled", false);
            }
        });
        $("#UptoDaysReq").change(function (event) {
            event.preventDefault();
            if (this.checked) {
                $("#AllTime,#OnlySchedule,#ScheduleAndUptoDays,#ScheduleAndUptoDaysReq").prop("disabled", true);
            } else {
                $("#AllTime,#OnlySchedule,#ScheduleAndUptoDays,#ScheduleAndUptoDaysReq").prop("disabled", false);
            }
        });
        $("#OnlySchedule").change(function (event) {
            event.preventDefault();
            if (this.checked) {
                $("#UptoDays,#UptoDaysReq,#AllTime,#ScheduleAndUptoDays,#ScheduleAndUptoDaysReq").prop("disabled", true);
                $("#ScheduleAndUptoDays,#UptoDays").val("0");
            } else {
                $("#UptoDays,#UptoDaysReq,#AllTime,#ScheduleAndUptoDays,#ScheduleAndUptoDaysReq").prop("disabled", false);
            }
        });

        $("#ScheduleAndUptoDaysReq").change(function (event) {
            event.preventDefault();
            if (this.checked) {
                $("#UptoDays,#UptoDaysReq,#OnlySchedule,#AllTime").prop("disabled", true);
            } else {
                $("#UptoDays,#UptoDaysReq,#OnlySchedule,#AllTime").prop("disabled", false);
            }
        });


        $("#CT_AllTime").change(function (event) {
            event.preventDefault();
            if (this.checked) {
                $("#CT_UptoDays,#CT_UptoDaysReq,#CT_DeliveryReq").prop("disabled", true);
                $("#CT_UptoDays").val("0");
            } else {
                $("#CT_UptoDays,#CT_UptoDaysReq,#CT_DeliveryReq").prop("disabled", false);
            }
        });
        $("#CT_UptoDaysReq").change(function (event) {
            event.preventDefault();
            if (this.checked) {
                $("#CT_AllTime,#CT_DeliveryReq").prop("disabled", true);
            } else {
                $("#CT_AllTime,#CT_DeliveryReq").prop("disabled", false);
            }
        });
        $("#CT_DeliveryReq").change(function (event) {
            event.preventDefault();
            if (this.checked) {
                $("#CT_UptoDays,#CT_UptoDaysReq,#CT_AllTime").prop("disabled", true);
                $("#CT_UptoDays").val("0");
            } else {
                $("#CT_UptoDays,#CT_UptoDaysReq,#CT_AllTime").prop("disabled", false);
            }
        });

        $("#VA_AllTime").change(function (event) {
            event.preventDefault();
            if (this.checked) {
                $("#VA_UptoDays,#VA_UptoDaysReq,#VA_CompleteReq").prop("disabled", true);
                $("#VA_UptoDays").val("0");
            } else {
                $("#VA_UptoDays,#VA_UptoDaysReq,#VA_CompleteReq").prop("disabled", false);
            }
        });
        $("#VA_UptoDaysReq").change(function (event) {
            event.preventDefault();
            if (this.checked) {
                $("#VA_AllTime,#VA_CompleteReq").prop("disabled", true);
            } else {
                $("#VA_AllTime,#VA_CompleteReq").prop("disabled", false);
            }
        });
        $("#VA_CompleteReq").change(function (event) {
            event.preventDefault();
            if (this.checked) {
                $("#VA_UptoDays,#VA_UptoDaysReq,#VA_AllTime").prop("disabled", true);
                $("#VA_UptoDays").val("0");
            } else {
                $("#VA_UptoDays,#VA_UptoDaysReq,#VA_AllTime").prop("disabled", false);
            }
        });

        $('#Submit').click(function (event) {
            event.preventDefault();

            var url = '@Url.Action("SaveData")';
            @* iX9: Data from individual field is passed on to the Model and then to Controller for Saving *@
            var ModelData = {};

            ModelData["AllTime"] = $("#AllTime").is(':checked');
            ModelData["VA_AllTime"] = $("#VA_AllTime").is(':checked');
            ModelData["CT_AllTime"] = $("#CT_AllTime").is(':checked');
            ModelData["VM_AllTime"] = $("#VM_AllTime").is(':checked');

            ModelData["UptoDaysReq"] = $("#UptoDaysReq").is(':checked');
            ModelData["UptoDays"] = $("#UptoDays").val();
            ModelData["VA_UptoDaysReq"] = $("#VA_UptoDaysReq").is(':checked');
            ModelData["VA_UptoDays"] = $("#VA_UptoDays").val();
            ModelData["CT_UptoDaysReq"] = $("#CT_UptoDaysReq").is(':checked');
            ModelData["CT_UptoDays"] = $("#CT_UptoDays").val();

            ModelData["OnlySchedule"] = $("#OnlySchedule").is(':checked');

            ModelData["ScheduleAndUptoDaysReq"] = $("#ScheduleAndUptoDaysReq").is(':checked');
            ModelData["ScheduleAndUptoDays"] = $("#ScheduleAndUptoDays").val();

            ModelData["VA_CompleteReq"] = $("#VA_CompleteReq").is(':checked');
            ModelData["CT_DeliveryReq"] = $("#CT_DeliveryReq").is(':checked');

            ModelData["Mode"] = '@Model.Mode';
            ModelData["Header"] = '@Model.Header';

            var DTO = { mModel: ModelData };
            $.ajax({
                type: "POST",
                dataType: "json",
                data: JSON.stringify(DTO),
                cache: false,
                url: url,
                contentType: "application/json; charset=utf-8",
                beforeSend: function () {
                    $('.spinner').show();
                },
                success: function (data) {
                    if (data.Status == 'Success') {
                        $('.spinner').hide();
                        window.location.href = "/DashBoard/SetUP";
                        $("#ErrorMessage").hide();
                    }
                    else {
                        $('.spinner').hide();
                        alert(data.Message);                    }
                },
            });
        });
    });
</script>
<header class="header fixed-top" style="position:fixed;background-color:lightgray;padding:6px;width:100%;margin-top:0%;">
    <div class="fixhead">
        <b class="CodeSt">@Model.Header</b>
        <span class="tools pull-right">
            <a href="~/DashBoard/SetUP" class="btn btn-danger" style="color:white;font-weight:bolder;font-size:13px;padding:3px 10px;" id="Cancel2">X</a>
        </span>
        <span class="tools pull-right">
            <b class="CodeSt">@Model.Mode Mode</b>
        </span>
        <button class="fa fa-heart pull-right" type="submit" onclick="AddToFavorite('@Model.ViewDataId','@Model.OptionCode')" title="Add/Remove from My Favorites" id="MyFavorites" style="color: rgb(145,142,142); background-color: transparent; border: none; font-size: 20px; height: 27px; margin-right: 5px;margin-top:5px;" name="MyFavorites"></button>

    </div>
</header>
<section class="panel" style="margin-bottom:0px;margin-top:0%;">
    <div class="panel-body">
        <div class="form-horizontal " id="SystemFlowForm" role="form" style="margin-top:0%;">
            <div id="ErrorMessage" name="ErrorMessage" class="alert alert-danger" style="display: none;margin-top:30px;"></div>
            <br />
            @* iX9: -- Code for Header Starts -- *@
            @* iX9: Tab Body Panels *@

            <div class="tab">
                <button class="tablinks" onclick="openCity(event, 'divLedgerTable')" id="List"> FM Tracking</button>
                <button class="tablinks" onclick="openCity(event, 'divLedgerTable2')" style="width:140px;"> Vehicle Activity</button>
                <button class="tablinks" onclick="openCity(event, 'divLedgerTable3')" style="width:160px;"> Consignment Tracking</button>
                <button class="tablinks" onclick="openCity(event, 'divLedgerTable4')" style="width:140px;"> Vehicle Master</button>
            </div>
            <div id="divLedgerTable" class="tabcontent" style="height: 440px;border: 1px solid;">
                <div class="form-group">
                    <label class="col-sm-3 control-label">All Time:</label>
                    <div class="col-sm-1" style="width:auto;">
                        @Html.CheckBoxFor(x => x.AllTime, new { @class = "", @Value = Model.AllTime, style = "height: 20px;width: 35px;" })
                    </div>
                    <label class="col-sm-1 control-label" style="width: auto;color: red;font-size: 14px;">Vehicle Tracking Show All Time.</label>
                </div>
                
                <hr style="margin-top: 10px !important;margin-bottom: 10px !important;" />
                <div class="form-group">
                    <label class="col-sm-3 control-label">Upto (Days):</label>
                    <div class="col-sm-1" style="width:auto;">
                        @Html.CheckBoxFor(x => x.UptoDaysReq, new { @class = "", @Value = Model.UptoDaysReq, style = "height: 20px;width: 35px;" })
                    </div>
                    <label class="col-sm-1 control-label" style="width: auto;color: red;font-size: 14px;">Vehicle Tracking Show Upto  </label>
                    <div class="col-sm-1" style="width:auto;">
                        @Html.TextBoxFor(x => x.UptoDays, new { @class = "form-control", @maxlength = "3", @Value = Model.UptoDays, @placeholder = "", @style = "width:60px;text-align:right;" })
                    </div>
                    <label class="col-sm-1 control-label" style="width: auto;color: red;font-size: 14px;">  Days From Document Date.</label>
                </div>

                <hr style="margin-top: 10px !important;margin-bottom: 10px !important;" />
                <div class="form-group">
                    <label class="col-sm-3 control-label">After Schedule Upto (Days):</label>
                    <div class="col-sm-1" style="width:auto;">
                        @Html.CheckBoxFor(x => x.ScheduleAndUptoDaysReq, new { @class = "", @Value = Model.ScheduleAndUptoDaysReq, style = "height: 20px;width: 35px;" })
                    </div>
                    <label class="col-sm-1 control-label" style="width: auto;color: red;font-size: 14px;">Vehicle Tracking Show Upto Schedule Time +</label>
                    <div class="col-sm-1" style="width:auto;">
                        @Html.TextBoxFor(x => x.ScheduleAndUptoDays, new { @class = "form-control", @maxlength = "3", @Value = Model.ScheduleAndUptoDays, @placeholder = "", @style = "width:60px;text-align:right;" })
                    </div>
                    <label class="col-sm-1 control-label" style="width: auto;color: red;font-size: 14px;">Days Only.</label>
                </div>
                <hr style="margin-top: 10px !important;margin-bottom: 10px !important;" />
            </div>

            <div id="divLedgerTable2" class="tabcontent" style="height: 440px;border: 1px solid;">
                <div class="form-group">
                    <label class="col-sm-3 control-label">All Time:</label>
                    <div class="col-sm-1" style="width:auto;">
                        @Html.CheckBoxFor(x => x.VA_AllTime, new { @class = "", @Value = Model.VA_AllTime, style = "height: 20px;width: 35px;" })
                    </div>
                    <label class="col-sm-1 control-label" style="width: auto;color: red;font-size: 14px;">Vehicle Tracking Show All Time.</label>
                </div>
                <hr style="margin-top: 10px !important;margin-bottom: 10px !important;" />
                <div class="form-group">
                    <label class="col-sm-3 control-label">Upto (Days):</label>
                    <div class="col-sm-1" style="width:auto;">
                        @Html.CheckBoxFor(x => x.VA_UptoDaysReq, new { @class = "", @Value = Model.VA_UptoDaysReq, style = "height: 20px;width: 35px;" })
                    </div>
                    <label class="col-sm-1 control-label" style="width: auto;color: red;font-size: 14px;">Vehicle Tracking Show Upto  </label>
                    <div class="col-sm-1" style="width:auto;">
                        @Html.TextBoxFor(x => x.VA_UptoDays, new { @class = "form-control", @maxlength = "3", @Value = Model.VA_UptoDays, @placeholder = "", @style = "width:60px;text-align:right;" })
                    </div>
                    <label class="col-sm-1 control-label" style="width: auto;color: red;font-size: 14px;">  Days From Document Date.</label>
                </div>
                <hr style="margin-top: 10px !important;margin-bottom: 10px !important;" />
                <div class="form-group">
                    <label class="col-sm-3 control-label">Complete:</label>
                    <div class="col-sm-1" style="width:auto;">
                        @Html.CheckBoxFor(x => x.VA_CompleteReq, new { @class = "", @Value = Model.VA_CompleteReq, style = "height: 20px;width: 35px;" })
                    </div>
                    <label class="col-sm-1 control-label" style="width: auto;color: red;font-size: 14px;">Vehicle Tracking Stop If Vehicle Trip Complete.</label>
                </div>
                <hr style="margin-top: 10px !important;margin-bottom: 10px !important;" />

            </div>

            <div id="divLedgerTable3" class="tabcontent" style="height: 440px;border: 1px solid;">
                <div class="form-group">
                    <label class="col-sm-3 control-label">All Time:</label>
                    <div class="col-sm-1" style="width:auto;">
                        @Html.CheckBoxFor(x => x.CT_AllTime, new { @class = "", @Value = Model.CT_AllTime, style = "height: 20px;width: 35px;" })
                    </div>
                    <label class="col-sm-1 control-label" style="width: auto;color: red;font-size: 14px;">Vehicle Tracking Show All Time.</label>
                </div>
                <hr style="margin-top: 10px !important;margin-bottom: 10px !important;" />
                <div class="form-group">
                    <label class="col-sm-3 control-label">Upto (Days):</label>
                    <div class="col-sm-1" style="width:auto;">
                        @Html.CheckBoxFor(x => x.CT_UptoDaysReq, new { @class = "", @Value = Model.CT_UptoDaysReq, style = "height: 20px;width: 35px;" })
                    </div>
                    <label class="col-sm-1 control-label" style="width: auto;color: red;font-size: 14px;">Vehicle Tracking Show Upto  </label>
                    <div class="col-sm-1" style="width:auto;">
                        @Html.TextBoxFor(x => x.CT_UptoDays, new { @class = "form-control", @maxlength = "3", @Value = Model.CT_UptoDays, @placeholder = "", @style = "width:60px;text-align:right;" })
                    </div>
                    <label class="col-sm-1 control-label" style="width: auto;color: red;font-size: 14px;">  Days From Document Date.</label>
                </div>
                <hr style="margin-top: 10px !important;margin-bottom: 10px !important;" />
                <div class="form-group">
                    <label class="col-sm-3 control-label">Delivery:</label>
                    <div class="col-sm-1" style="width:auto;">
                        @Html.CheckBoxFor(x => x.CT_DeliveryReq, new { @class = "", @Value = Model.CT_DeliveryReq, style = "height: 20px;width: 35px;" })
                    </div>
                    <label class="col-sm-1 control-label" style="width: auto;color: red;font-size: 14px;">Vehicle Tracking Stop If Delivery Complete.</label>
                </div>
                <hr style="margin-top: 10px !important;margin-bottom: 10px !important;" />
            </div>
            <div id="divLedgerTable4" class="tabcontent" style="height: 440px;border: 1px solid;">
                <div class="form-group">
                    <label class="col-sm-3 control-label">All Time:</label>
                    <div class="col-sm-1" style="width:auto;">
                        @Html.CheckBoxFor(x => x.VM_AllTime, new { @class = "", @Value = Model.VM_AllTime, style = "height: 20px;width: 35px;" })
                    </div>
                    <label class="col-sm-1 control-label" style="width: auto;color: red;font-size: 14px;">Vehicle Tracking Show All Time.</label>
                </div>
                <hr style="margin-top: 10px !important;margin-bottom: 10px !important;" />
            </div>

            <script>
                function openCity(evt, cityName) {
                    var i, tabcontent, tablinks;
                    tabcontent = document.getElementsByClassName("tabcontent");
                    for (i = 0; i < tabcontent.length; i++) {
                        tabcontent[i].style.display = "none";
                    }
                    tablinks = document.getElementsByClassName("tablinks");
                    for (i = 0; i < tablinks.length; i++) {
                        tablinks[i].className = tablinks[i].className.replace(" active", "");
                    }
                    document.getElementById(cityName).style.display = "block";
                    evt.currentTarget.className += " active";
                }
                document.getElementById("List").click();

            </script>
        </div>
    </div>
</section>

<footer class="footer-section" style="height:33px;position:fixed;background-color:#4B4A4A;padding:3px;color:white;">
    <div class="row">
        <div class="col-sm-5">
        </div>
        <div class="col-sm-3" style="margin-top:4px;color:white;font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;">
            ALT AIR-3.0, Shruham Software
        </div>
        <div class="col-sm-4">
            <div class="pull-right">
                @if (Model.Mode != "View")
                {
                    if (Model.Mode == "Delete")
                    {
                        <button class="btn btn-success" style="font-size: 13px;padding:3px 12px;" id="Submit">Delete</button>
                    }
                    else
                    {
                        <button class="btn btn-success" style="font-size: 13px;padding:3px 12px;" id="Submit">Save</button>
                    }
                }
                <a href="~/DashBoard/SetUP" class="btn btn-danger" style="font-size: 13px;padding:3px 12px;" id="Cancel">Cancel</a>
            </div>
        </div>
    </div>
</footer>