
@model ALT_ERP3.Areas.Accounts.Models.LabourGradesVM
@using Common;
@{
    ViewBag.Title = "";
    Layout = null;
}

<script>
    $(document).ready(function () {
        if ('@Model.Mode' == "Delete") {
            $('.form-group :input').prop("disabled", true);
        }

        $('#EmpGradeRates_EffDate').datepicker({
            format:'dd-mm-yyyy',
            autoclose: true,
        });
        $("#btnAddtoTable").click(function (event) {
            event.preventDefault();
            var ModelData = {};
            ModelData["EmpGradeRates_Sno"] = $('#EmpGradeRates_Sno').val();
            ModelData["EmpGradeRates_EffDate"] = $('#EmpGradeRates_EffDate').val();
            ModelData["EmpGradeRates_Rate"] = $('#EmpGradeRates_Rate').val();
            ModelData["EmpGradeRates_Unit"] = $('#EmpGradeRates_Unit').val();
            ModelData["EmpGradeRates_OTRate"] = $('#EmpGradeRates_OTRate').val();
            var DTO = { Model: ModelData };
            var url = '@Url.Action("AddToTable")';
            $.ajax({
                type: "POST",
                dataType: "json",
                data: JSON.stringify(DTO),
                cache: false,
                url: url,
                contentType: "application/json;charset=utf-8",
                beforesend: function () {
                    $('.spinner').show();
                },
                success: function (data) {
                    $('.spinner').hide();
                    $('#ErrorMessage').hide();
                    $('#griddatatable').html(data.Html);
                },
                error: function () {
                    $('.spinner').hide();
                    alert("error occured while processing your request.");
                }
            });
        });

        $('button[action|="editgriddatarow"]').click(function (event) {
            event.preventDefault(event);
            var ModelData = {};
            ModelData["tempId"] = $(this).val();
            var DTO = { Model: ModelData };
            var url = '@Url.Action("PickFromTable")';
            $.ajax({
                type: "POST",
                dataType: "json",
                data: JSON.stringify(DTO),
                cache: false,
                url: url,
                contentType: "application/json;charset=utf-8",
                beforeSend: function () {
                    $('.spinner').show();
                },
                success: function (data) {
                    $('.spinner').hide();
                    $('#griddatatable').html(data.Html);
                },
                error: function () {
                    alert("Error occured while processing your request.");
                }
            });
        });

        $("#btnSaveEdit").click(function (event) {
            event.preventDefault();
            var ModelData = {};
            ModelData["tempId"] = $('#tempId').val();
            ModelData["EmpGradeRates_Sno"] = $('#EmpGradeRates_Sno').val();
            ModelData["EmpGradeRates_EffDate"] = $('#EmpGradeRates_EffDate').val();
            ModelData["EmpGradeRates_Rate"] = $('#EmpGradeRates_Rate').val();
            ModelData["EmpGradeRates_Unit"] = $('#EmpGradeRates_Unit').val();
            ModelData["EmpGradeRates_OTRate"] = $('#EmpGradeRates_OTRate').val();
            var DTO = { Model: ModelData };
            var url = '@Url.Action("AddToTableEdit")';
            $.ajax({
                type: "POST",
                dataType: "json",
                data: JSON.stringify(DTO),
                cache: false,
                url: url,
                contentType: "application/json;charset=utf-8",
                beforesend: function () {
                    $('.spinner').show();
                },
                success: function (data) {
                    $('.spinner').hide();
                    $('#ErrorMessage').hide();
                    $('#griddatatable').html(data.Html);
                },
                error: function () {
                    $('.spinner').hide();
                    alert("Error occured while processing your request.");
                }
            });
        });

        $('button[action|="deletegriddatarow"]').click(function (event) {
            event.preventDefault(event);
            var url = '@Url.Action("DeleteTableRow")?tempId=' + $(this).val();
            $.ajax({
                type: "GET",
                dataType: "json",
                cache: false,
                url: url,
                contentType: "application/json;charset=utf-8",
                beforeSend: function () {
                    $('.spinner').show();
                },
                success: function (data) {
                    $('.spinner').hide();
                    $('#ErrorMessage').hide();
                    $('#griddatatable').html(data.Html);
                },
                error: function () {
                    alert("Error occured while processing your request.");
                }
            });
        });
    });
</script>

<div class="grid" id="griddatatable" style="max-height: 350px; width: auto; overflow: auto;">
    <table id="gridtable" class="zui-table">
        <thead>
            <tr role="row" style="font-family:Verdana;font-size:9pt;">
                <th style="width: 9%;vertical-align:inherit;">Sno</th>
                <th style="width: 22%;vertical-align:inherit;">Effective Date</th>
                <th style="width: 22%;vertical-align:inherit;">Rate</th>
                <th style="width: 19%;vertical-align:inherit;">Rate Per</th>
                <th style="width: 26%;vertical-align:inherit;">OT Rate/Hr</th>
                <th style="width:35px;"></th>
                <th style="width:35px;"></th>
            </tr>
            <tr style="background-color:gainsboro;font-family:Tahoma;font-size:9pt;font-weight:bolder;">
                <td>
                    @Html.TextBoxFor(x => x.tempId, new { @class = "form-control", @readonly = "readonly", @style = "text-align:right;", @Name = "tempId", @Id = "tempId" })
                </td>
                <td style="text-align:center;">
                    @Html.TextBoxFor(x => x.EmpGradeRates_EffDateVM, new { @type = "text", @style = "font-weight:bolder;", @class = "form-control", @Name = "EmpGradeRates_EffDate", @id = "EmpGradeRates_EffDate", @Value = DateTime.Now.ToString("dd/MM/yyyy") })
                </td>
                <td style="text-align:right;">
                    @Html.TextBoxFor(x => x.EmpGradeRates_Rate, new { @class = "form-control", @style = "text-align:right;", @Name = "EmpGradeRates_Rate", @Id = "EmpGradeRates_Rate" })
                </td>
                <td style="text-align:left;">
                    @Html.DropDownListFor(m => m.EmpGradeRates_Unit, Model.UnitList, new { @class = "form-control", @Id = "EmpGradeRates_Unit", @Name = "EmpGradeRates_Unit" })
                </td>
                <td style="text-align:right;">
                    @Html.TextBoxFor(x => x.EmpGradeRates_OTRate, new { @class = "form-control", @style = "text-align:right;", @Name = "EmpGradeRates_OTRate", @Id = "EmpGradeRates_OTRate" })
                </td>
                <td style="vertical-align:inherit;" colspan="1">
                    @if (Model.Mode != "Delete")
                    {
                        <button type="button" id="btnAddtoTable" class="btn btn-primary btn-sm" title="Add" style="margin-left:7px;width:80%;height:23px;border:1px solid black;"><i class="fa fa-plus" style="color:black;"></i></button>
                    }
                </td>
                <td>
                    @if (Model.Mode != "Delete")
                    {
                        <button type="button" id="btnSaveEdit" class="btn btn-primary btn-sm" title="Save" style="margin-left:7px;width:80%;height:23px;border:1px solid black;"><i class="fa fa-save" style="color:black;"></i></button>
                    }
                </td>
            </tr>
        </thead>
        <tbody>
            @if (Model.GridEmpGradeRatesVM != null)
            {
                foreach (var item in @Model.GridEmpGradeRatesVM.Where(x => x.tempIsDeleted == false).ToList())
                {
                    <tr style="font-family:Verdana;font-size:9pt;">
                        <td style="vertical-align:inherit;font-family:Verdana;font-size:9pt;">@item.tempId</td>
                        <td style="text-align:center;vertical-align:inherit;font-family:Verdana;font-size:9pt;">@item.EmpGradeRates_EffDate</td>
                        <td style="text-align:right;vertical-align:inherit;font-family:Verdana;font-size:9pt;">@item.EmpGradeRates_Rate</td>
                        <td style="text-align:left;vertical-align:inherit;font-family:Verdana;font-size:9pt;">@item.EmpGradeRates_Unit</td>
                        <td style="text-align:right;vertical-align:inherit;font-family:Verdana;font-size:9pt;">@item.EmpGradeRates_OTRate</td>
                        <td>
                            @if (Model.Mode != "Delete")
                            {
                                <button type="button" action="editgriddatarow" style="margin-left:7px;width:80%;height:23px;border:1px solid black;" class="btn btn-warning btn-sm" value="@item.tempId" title="Edit"><i class="fa fa-edit"></i></button>
                            }
                        <td>
                            @if (Model.Mode != "Delete")
                            {
                                <button type="button" action="deletegriddatarow" style="margin-left:7px;width:80%;height:23px;border:1px solid black;" class="btn btn-danger btn-sm" value="@item.tempId" title="Delete"><i class="fa fa-trash-o"></i></button>
                            }
                        </td>
                    </tr>
                }
            }
        </tbody>
    </table>
</div>

@* Code Auto Generated on Sun 05-Jul-2020 02:49 PM
    Engine: iX9Generator, ver: 3.9 Revision: 25
    by Team Suchan, T.FAT *@
