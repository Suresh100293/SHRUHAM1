@model TFATERPWebApplication.Areas.Logistics.Models.FMVM
@using Common;
@{
    ViewBag.Title = "FM Master";
    Layout = null;

}

<script src="@Url.Content("~/Content/js/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Content/js/jquery.constrain.js")" type="text/javascript"></script>

<style>
    .Ordertable {
        display: table;
    }

    .Ordertable-row {
        display: table-row;
        color: black;
    }

    .Ordertable-cell {
        display: table-cell;
        border: 1px solid black;
        padding: 5px;
        /*text-align: center;*/
    }

    .empty {
        visibility: hidden;
    }
</style>
<script type="text/javascript">
    $(document).ready(function () {


        $('.FmdetailsSavelrlistOfLc').click(function (event) {
            event.preventDefault();
            
            var url = '@Url.Action("ShowLrLIstOfLC")';

            var DTO = { Lcno: this.id };
            $.ajax({
                type: "POST",
                dataType: "json",
                data: JSON.stringify(DTO),
                cache: false,
                url: url,
                contentType: "application/json; charset=utf-8",
                beforeSend: function () {
                    $('.spinner').show();
                },
                success: function (data) {
                    
                    var LoadDownLoadFiles = $("#FmLCLRlistDiv");
                    $("#ErrorMessage").hide();
                    $('.spinner').hide();
                    $('#FmLCLRlist').modal('show');
                    LoadDownLoadFiles.html('');
                    LoadDownLoadFiles.html(data.Html);
                },
            });
        });







    });
</script>
<div class="container23" style="width:auto;">
    <div class="Ordertable table-bordered table-info table-responsive-md" style="font-family:Verdana; margin-top:-1px;height:auto;width:100%;background-color:whitesmoke;">
        <div class="form-group">
            <div class="col-md-2"></div>
        </div>
        @foreach (var item in Model.Allroutelist)
        {
            <div id="Head" style="margin-left: 1px;width: max-content;">
                <div class="Ordertable-cell" style="background-color: aquamarine;text-align: center;font-weight: bold;color: #ad225c;width:auto;">Branch:&nbsp;&nbsp;&nbsp;@item.Branch</div>
            </div>
            <div style="margin-left: 1px;width: max-content;">
                <div class="Ordertable-cell" style="background-color: white;text-align: left;font-weight: bold;color: black;width:490px;">
                    <label style="color:#fa8564;width:124px;">Arrival Details :-</label>
                    Date:&nbsp;&nbsp;&nbsp;@item.ArrivalDate |
                    Time:&nbsp;&nbsp;&nbsp;@item.ArrivalTime |
                    KM:&nbsp;&nbsp;&nbsp;@item.ArrivalKM
                </div>
                <div class="Ordertable-cell" style="background-color: white;text-align: left;font-weight: bold;color: black;width:540px;">
                    <label style="color:#fa8564;">Schedule Details :-</label>
                    Schedule Date:&nbsp;&nbsp;&nbsp;@item.ScheduleArrivalDate |
                    Schedule Time:&nbsp;&nbsp;&nbsp;@item.ScheduleArrivalTime |
                    Schedule KM:&nbsp;&nbsp;&nbsp;@item.ScheduleArrivalKM
                </div>
                <div class="Ordertable-cell" style="background-color: white;text-align: left;font-weight: bold;color: red;width:330px;">
                    <label>Late Marking :-</label>
                    Late Time:&nbsp;&nbsp;&nbsp;@item.LateTime |
                    Diff. KM:&nbsp;&nbsp;&nbsp;@item.LateKM
                </div>
            </div>
            @*<div style="margin-left: 1px;width: max-content;">
                    <div class="Ordertable-cell" style="background-color: #9da9a5;text-align: center;font-weight: bold;color: white;width:123px;">Arrival Details</div>
                    <div class="Ordertable-cell" style="text-align: center;font-weight: bold;color: #ad225c;width:auto;">Date:&nbsp;&nbsp;&nbsp;@item.ArrivalDate</div>
                    <div class="Ordertable-cell" style="text-align: center;font-weight: bold;color: #ad225c;width:auto;">Time:&nbsp;&nbsp;&nbsp;@item.ArrivalTime</div>
                    <div class="Ordertable-cell" style="text-align: center;font-weight: bold;color: #ad225c;width:auto;">KM:&nbsp;&nbsp;&nbsp;@item.ArrivalKM</div>
                    <div class="Ordertable-cell" style="text-align: center;font-weight: bold;color: #ad225c;width:auto;">Schedule Date:&nbsp;&nbsp;&nbsp;@item.ScheduleArrivalDate</div>
                    <div class="Ordertable-cell" style="text-align: center;font-weight: bold;color: #ad225c;width:auto;">Schedule Time:&nbsp;&nbsp;&nbsp;@item.ScheduleArrivalTime</div>
                    <div class="Ordertable-cell" style="text-align: center;font-weight: bold;color: #ad225c;width:auto;">Schedule KM:&nbsp;&nbsp;&nbsp;@item.ScheduleArrivalKM</div>
                    <div class="Ordertable-cell" style="text-align: center;font-weight: bold;color: #ad225c;width:auto;">Late Time:&nbsp;&nbsp;&nbsp;@item.LateTime</div>
                    <div class="Ordertable-cell" style="text-align: center;font-weight: bold;color: #ad225c;width:auto;">Diff. KM:&nbsp;&nbsp;&nbsp;@item.LateKM</div>
                </div>*@
            <div style="margin-left: 1px;width: max-content;">
                <div class="Ordertable-cell" style="background-color: white;text-align: left;font-weight: bold;color: black;width:490px;">
                    <label style="color:#fa8564;">Dispatch Details :-</label>
                    Date:&nbsp;&nbsp;&nbsp;@item.DispatchDate |
                    Time:&nbsp;&nbsp;&nbsp;@item.DispatchTime |
                    KM:&nbsp;&nbsp;&nbsp;@item.DispatchKM
                </div>
                <div class="Ordertable-cell" style="background-color: white;text-align: left;font-weight: bold;color: black;width:540px;">
                    <label style="color:#fa8564;">Schedule Details :-</label>
                    Schedule Date:&nbsp;&nbsp;&nbsp;@item.ScheduleDispatchDate |
                    Schedule Time:&nbsp;&nbsp;&nbsp;@item.ScheduleDispatchTime
                </div>
                <div class="Ordertable-cell" style="background-color: white;text-align: left;font-weight: bold;color: red;width:330px;">
                    <label>Late Marking :-</label>
                    Late Time:&nbsp;&nbsp;&nbsp;@item.LateTime |
                    Diff. KM:&nbsp;&nbsp;&nbsp;@item.LateKM
                </div>
            </div>
            if (item.lCModals.Count > 0)
            {
                <div class="Ordertable table-bordered table-info table-responsive-md" style="font-family:Verdana; margin-top:1px;height:auto;width:100%;background-color:whitesmoke;">
                    <div id="Head">
                        <div class="Ordertable-cell" style="text-align: center;font-weight: bold;color: #ad225c;width:80px;">LCno</div>
                        <div class="Ordertable-cell" style="text-align: center;font-weight: bold;color: #ad225c;width:100px;">Date</div>
                        <div class="Ordertable-cell" style="text-align: center;font-weight: bold;color: #ad225c;width:100px;">From</div>
                        <div class="Ordertable-cell" style="text-align: center;font-weight: bold;color: #ad225c;width:100px;">To</div>
                        <div class="Ordertable-cell" style="text-align: center;font-weight: bold;color: #ad225c;width:100px;">Weight</div>
                        <div class="Ordertable-cell" style="text-align: center;font-weight: bold;color: #ad225c;width:100px;">Qty</div>
                        <div class="Ordertable-cell" style="text-align: center;font-weight: bold;color: #ad225c;width:100px;">LrList</div>
                        <div class="Ordertable-cell" style="text-align: center;font-weight: bold;color: #ad225c;width:100px;">Load Date</div>
                        <div class="Ordertable-cell" style="text-align: center;font-weight: bold;color: #ad225c;width:100px;">Load Time</div>
                        <div class="Ordertable-cell" style="text-align: center;font-weight: bold;color: #ad225c;width:100px;">UNLoad Date</div>
                        <div class="Ordertable-cell" style="text-align: center;font-weight: bold;color: #ad225c;width:100px;">UnLoad Time</div>
                        <div class="Ordertable-cell" style="text-align: center;font-weight: bold;color: #ad225c;width:100px;">Remark</div>

                    </div>
                    <div id="loadBoby" style="height:auto;width:100%;">
                        @foreach (var item1 in item.lCModals)
                        {
                            <div class="Ordertable-row ">
                                <div class="Ordertable-cell Lrno" style="font-weight: bold;width:80px;">@item1.lcno</div>
                                <div class="Ordertable-cell" style="font-weight: bold;width:100px;">@item1.Date</div>
                                <div class="Ordertable-cell" style="font-weight: bold;width:100px;">@item1.From_Name</div>
                                <div class="Ordertable-cell" style="font-weight: bold;width:100px;">@item1.To_Name</div>
                                <div class="Ordertable-cell Weight" style="font-weight: bold;width:100px;">@item1.Weight</div>
                                <div class="Ordertable-cell " style="font-weight: bold;width:100px;">@item1.TotalQty</div>
                                <div class="Ordertable-cell " style="font-weight: bold;width:100px;"><center><button class="btn btn-info FmdetailsSavelrlistOfLc" style="font-size: 13px;padding:3px 12px;" id="@item1.lcno"><i class="glyphicon glyphicon-eye-open"></i></button></center></div>
                                <div class="Ordertable-cell " style="font-weight: bold;width:100px;">@item1.LoadDate</div>
                                <div class="Ordertable-cell " style="font-weight: bold;width:100px;">@item1.LoadTime</div>
                                <div class="Ordertable-cell " style="font-weight: bold;width:100px;">@item1.UnLoadDate</div>
                                <div class="Ordertable-cell " style="font-weight: bold;width:100px;">@item1.UnLoadTime</div>
                                <div class="Ordertable-cell " style="font-weight: bold;width:100px;">@item1.Remark</div>
                            </div>
                        }
                    </div>
                </div>
                <br />
            }
        }
    </div>
</div>


<!--Show Lr OF LC Modal -->
<div class="modal fade" id="FmLCLRlist" style="" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-sm modal-xl" role="document" style="width: fit-content;margin: auto;margin-top: 5%;">
        <div class="modal-content">
            <div class="modal-header" style="background-color:#cccccc;padding-top:5px;">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <div class="form-group" @*style="display: inline-flex;margin-left: 40%;"*@>
                    <div class="col-sm-offset-5 col-sm-3"><h4 class="modal-title"><b>Pending Lorry Receipts</b></h4></div>

                </div>


            </div>
            <div class="modal-body">
                <div class="grid" id="FormatTable" style="max-height:350px;min-height:350px; width:100%;">
                    <div id="" class="" style="width:100%;">
                        <div class="form-group col-sm-12" id="FmLCLRlistDiv">

                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
