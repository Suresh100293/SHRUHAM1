@model TFATERPWebApplication.Areas.Logistics.Models.FMVM
@{
    Layout = null;
}
<style>
    .Tab {
        display: table;
        font-family: math;
        color: black;
    }

    .rowColor {
        background-color: #c8dcdc !important;
    }

    .Tab-row {
        display: table-row;
    }

    .Tab-cell {
        display: table-cell;
        border: 1px solid black;
        padding: 5px;
        text-align: center;
        /*border-bottom: 1px solid;*/
    }
</style>

<script type="text/javascript">
    $(document).ready(function () {
        if ('@Model.Mode' != "") {
            if ('@Model.Mode' == "Add" || '@Model.Mode' == "Edit")
            {
                $(".deleteRow").attr("disabled", false);
            } else {
                $(".deleteRow").attr("disabled", true);
            }
        }
        $(".deleteRow").click(function () {
             
           var Row= $(this).closest('.Tab-row');
            var From = Row.find(".FromCode").attr('id');
            $(this).closest('.Tab-row').remove();
            var url = '@Url.Action("DeleteDestination")';
            @* iX9: Data from individual field is passed on to the Model and then to Controller for Saving *@

            var DTO = { ViaRoute: From };
            $.ajax({
                type: "POST",
                dataType: "json",
                data: JSON.stringify(DTO),
                cache: false,
                url: url,
                contentType: "application/json; charset=utf-8",
                beforeSend: function () {
                    $('.spinner').show();
                },
                success: function (data) {
                    
                    ////var LoadDownLoadFiles = $("#GetDestView");
                    $("#ErrorMessage").hide();
                    $('.spinner').hide();
                    ShowRouteDest();

                    //$('#GETDestMODAL').modal('show');
                    //LoadDownLoadFiles.html('');
                    //LoadDownLoadFiles.html(data.Html);

                },
            });
        });

    });


</script>
<table class="Tab" id="DestinationTable">
    <thead>
        <tr class="Tab-row RowHead">
            <th class="Tab-cell" style="text-align: center;font-weight: bold;color: #ad225c;">Serial No</th>
            <th class="Tab-cell" style="text-align: center;font-weight: bold;color: #ad225c;">Route Name</th>
            <th class="Tab-cell" style="text-align: center;font-weight: bold;color: #ad225c;">Action</th>
        </tr>
    </thead>
    <tbody>
        @{var i = 1;
            if (Model.AllDest != null)
            {
                foreach (var item in Model.AllDest)
                {
                    <tr class="Tab-row RowData">
                        <td class="Tab-cell" style="font-weight: bold;"><input type="text" value="@i" class="seqUenceRoute" style="width:50px;"></td>
                        <td class="Tab-cell FromCode" id="@item.From" style="font-weight: bold;">@item.Consigner</td>
                        <td class="Tab-cell" style="font-weight: bold;"><center><input type="button" class="btn-danger deleteRow" value="Delete" data-dismiss="modal" /></center></td>
                    </tr>
                    ++i;
                }
            }
        }
    </tbody>
</table>