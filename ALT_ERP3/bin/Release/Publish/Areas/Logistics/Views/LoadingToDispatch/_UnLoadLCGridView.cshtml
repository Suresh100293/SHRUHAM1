@model IEnumerable<TFATERPWebApplication.Areas.Logistics.Models.LCModal>
@{
    Layout = null;
}

<script src="@Url.Content("~/Content/js/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Content/js/jquery.constrain.js")" type="text/javascript"></script>

<style>
    .Ordertable {
        display: table;
    }

    .Ordertable-row {
        /*display: table-row;*/
        color: black;
    }

    .Ordertable-cell {
        display: table-cell;
        /*border: 1px solid black;*/
        /*padding: 5px;*/
        /*text-align: center;*/
    }

    .empty {
        visibility: hidden;
    }
</style>

<script type="text/javascript">
    $(document).ready(function () {

        $("#UnloadBoby .Ordertable-row").each(function () {
            var col1_value = $(this).find(".LGQty").val();
            var col2_value = $(this).find(".LDQty").val();

            if (col1_value != "0" || col2_value != "0") {
                $(this).find("input:checkbox").prop("checked", true);
                
            }

        });
        $(".LGQty").constrain({ allow: { regex: "[0-9]" } });
        $(".LDQty").constrain({ allow: { regex: "[0-9]" } });
        $("input:checkbox[class=LCchk]").click(function () {
            var LcID = this.id;
            if ($(this).prop("checked") == false) {
                $("input:checkbox").each(function () {
                    if (this.id == LcID) {
                        $(this).prop("checked", false);
                        $(this).closest(".Ordertable-row").find(".LGQty").val(0);
                        $(this).closest(".Ordertable-row").find(".LDQty").val(0);
                    }
                });
            } else {
                $(".lRCHK").each(function () {
                    if (this.id == LcID) {
                        if ($(this).closest(".Ordertable-row").find(".Delivery").text() != "Godown") {

                            var Lrno = $(this).closest(".Ordertable-row").find(".Lrno").text()
                            var result = confirm("" + Lrno + " No LR is Door Delivery And U Unload It In Godown.");
                            if (!result) {
                                $(this).prop("checked", false);
                                $(this).closest(".Ordertable-row").find(".LGQty").val(0);
                                $(this).closest(".Ordertable-row").find(".LDQty").val(0);
                            } else {
                                $(this).prop("checked", true);
                                if ($(this).closest(".Ordertable-row").find(".LQty").val() == "0") {
                                    $(this).closest(".Ordertable-row").find(".LGQty").val($(this).closest(".Ordertable-row").find(".Qty").text());
                                }
                            }
                        }
                        else {
                            $(this).prop("checked", true);
                            if ($(this).closest(".Ordertable-row").find(".LQty").val() == "0") {
                                $(this).closest(".Ordertable-row").find(".LGQty").val($(this).closest(".Ordertable-row").find(".Qty").text());
                            }
                        }

                    }
                });
            }
        });
        $(".checkbox").click(function () {
            if ($(this).prop("checked") == false) {
                $(this).closest(".Ordertable-row").find(".LGQty").val(0);
                $(this).closest(".Ordertable-row").find(".LDQty").val(0);
            } else {
                if ($(this).closest(".Ordertable-row").find(".Delivery").text() != "Godown") {
                    var result = confirm("This is Door Delivery And U Unload It In Godown.");
                    //alert("This is Door Delivery And U Unload It In Godown.");
                    if (!result) {
                        $(this).closest(".Ordertable-row").find(".LGQty").val(0);
                        $(this).closest(".Ordertable-row").find(".LDQty").val(0);
                        $(this).prop("checked", false);
                    } else {
                        if ($(this).closest(".Ordertable-row").find(".LGQty").val() == "0") {
                            $(this).closest(".Ordertable-row").find(".LGQty").val($(this).closest(".Ordertable-row").find(".Qty").text());
                        }
                    }
                }
                else {
                    if ($(this).closest(".Ordertable-row").find(".LGQty").val() == "0") {
                        $(this).closest(".Ordertable-row").find(".LGQty").val($(this).closest(".Ordertable-row").find(".Qty").text());
                    }
                }
            }
        });
        $(".LGQty,.LDQty").blur(function () {
            var Qty = $(this).closest(".Ordertable-row").find(".Qty").text();
            var GQty = $(this).closest(".Ordertable-row").find(".LGQty").val();
            var DQty = $(this).closest(".Ordertable-row").find(".LDQty").val();
            var LoadQty = parseInt(GQty) + parseInt(DQty);
            if (parseFloat(Qty) < parseFloat(LoadQty)) {
                alert("Allow Qty Not Greater Than Qty OF Lr.....!");
                var Qtye = parseInt(Qty) - parseInt(DQty);
                $(this).closest(".Ordertable-row").find(".LGQty").val(Qtye);
            }
        });
    });

</script>

@*<div class="form-group">
        <div class="col-md-2">
            <label style="font-size:14px;color:red;">Loaded Lorry Challan</label>
        </div>
    </div>*@
@if (Model != null)
{
    <div class="container23" style="width:max-content;">
        <div class="Ordertable table-bordered table-info table-responsive-md" style="font-family:Verdana; margin-top:-1px;height:auto;width:100%;background-color:whitesmoke;">
            @*<div class="form-group">
            <div class="col-md-2"></div>
            <div class="" style="text-decoration: underline;text-align: center;font-weight: bold;color: #ff5919a3;font-size:15px;margin: 2px 0px 2px 0px;">Lorry Challan And Lorry Receipts Details</div>
        </div>*@
            @foreach (var item in Model)
            {
                <div id="Head" style="margin-left: 1px;">
                    @*<div class="Ordertable-cell empty" style="text-align: center;font-weight: bold;color: #ad225c;width:120px;"></div>
                <div class="Ordertable-cell empty" style="text-align: center;font-weight: bold;color: #ad225c;width:120px;"></div>
                <div class="Ordertable-cell empty" style="text-align: center;font-weight: bold;color: #ad225c;width:120px;"></div>*@
                    <div class="Ordertable-cell" style="text-align: center;font-weight: bold;color: #ad225c;width:50px;"><input type="checkbox" id="@item.lcno" class="LCchk" style="height: 17px;width: 18px;" /></div>
                    <div class="Ordertable-cell" style="background-color: aquamarine;text-align: center;font-weight: bold;color: #ad225c;width:120px;">LcNo:&nbsp;&nbsp;&nbsp;@item.lcno</div>
                    <div class="Ordertable-cell" style="background-color: aquamarine;text-align: center;font-weight: bold;color: #ad225c;width:240px;">Date:&nbsp;&nbsp;&nbsp;@item.Date</div>
                    <div class="Ordertable-cell" style="background-color: aquamarine;text-align: center;font-weight: bold;color: #ad225c;width:120px;">Time:&nbsp;&nbsp;&nbsp;@item.Time</div>
                    <div class="Ordertable-cell" style="background-color: aquamarine;text-align: center;font-weight: bold;color: #ad225c;width:120px;">From:&nbsp;&nbsp;&nbsp;@item.From_Name</div>
                    <div class="Ordertable-cell" style="background-color: aquamarine;text-align: center;font-weight: bold;color: #ad225c;width:120px;">To:&nbsp;&nbsp;&nbsp;@item.To_Name</div>
                    <div class="Ordertable-cell" style="background-color: aquamarine;text-align: center;font-weight: bold;color: #ad225c;width:120px;">Qty:&nbsp;&nbsp;&nbsp;@item.TotalQty</div>
                    <div class="Ordertable-cell" style="background-color: aquamarine;text-align: center;font-weight: bold;color: #ad225c;width:120px;">Weight:&nbsp;&nbsp;&nbsp;@item.Weight</div>

                </div>
                <div class="Ordertable table-bordered table-info table-responsive-md" style="font-family:Verdana; margin-top:1px;height:auto;width:100%;background-color:whitesmoke;">
                    <div id="Head">
                        <div class="Ordertable-cell " style="text-align: center;font-weight: bold;color: #ad225c;width:50px;"></div>
                        <div class="Ordertable-cell" style="text-align: center;font-weight: bold;color: #ad225c;width:80px;">LrNo</div>
                        <div class="Ordertable-cell" style="text-align: center;font-weight: bold;color: #ad225c;width:80px;">Godown Qty</div>
                        <div class="Ordertable-cell" style="text-align: center;font-weight: bold;color: #ad225c;width:80px;">Direct Qty</div>
                        <div class="Ordertable-cell" style="text-align: center;font-weight: bold;color: #ad225c;width:130px;">UnLoad Godown Quantity</div>
                        <div class="Ordertable-cell" style="text-align: center;font-weight: bold;color: #ad225c;width:130px;">UnLoad Direct Quantity</div>
                        <div class="Ordertable-cell" style="text-align: center;font-weight: bold;color: #ad225c;width:145px;">Available Quantity</div>
                        <div class="Ordertable-cell" style="text-align: center;font-weight: bold;color: #ad225c;width:90px;">DeliveryAt</div>
                        <div class="Ordertable-cell" style="text-align: center;font-weight: bold;color: #ad225c;width:100px;">Date</div>
                        <div class="Ordertable-cell" style="text-align: center;font-weight: bold;color: #ad225c;width:100px;">From</div>
                        <div class="Ordertable-cell" style="text-align: center;font-weight: bold;color: #ad225c;width:100px;">To</div>
                        <div class="Ordertable-cell" style="text-align: center;font-weight: bold;color: #ad225c;width:100px;">Weight</div>
                        <div class="Ordertable-cell" style="text-align: center;font-weight: bold;color: #ad225c;width:130px;">Charge Type</div>
                        <div class="Ordertable-cell" style="text-align: center;font-weight: bold;color: #ad225c;width:130px;">Description</div>
                        <div class="Ordertable-cell" style="text-align: center;font-weight: bold;color: #ad225c;width:185px;">Consignor</div>
                        <div class="Ordertable-cell" style="text-align: center;font-weight: bold;color: #ad225c;width:185px;">Consignee</div>
                        <div class="hidden Ordertable-cell" style="text-align: center;font-weight: bold;color: #ad225c;width:185px;">ParentKey</div>

                    </div>
                    <div id="UnloadBoby" style="height:auto;width:100%;overflow:scroll;">
                        @foreach (var item1 in item.LrListOfLC)
                        {
                            <div class="Ordertable-row ">
                                <div class="Ordertable-cell" style="text-align: center;font-weight: bold;color: #ad225c;width:50px;"><center><input type="checkbox" id="@item.lcno" class="checkbox lRCHK" style="height: 17px;width: 18px;" /></center></div>
                                <div class="Ordertable-cell Lrno" style="font-weight: bold;width:80px;">@item1.Lrno</div>
                                <div class="Ordertable-cell " style="font-weight: bold;width:80px;">@item1.loadGQty</div>
                                <div class="Ordertable-cell " style="font-weight: bold;width:80px;">@item1.loadDQty</div>
                                <div class="Ordertable-cell " style="font-weight: bold;width:130px;"><input type="text" class="form-control LGQty" value="@item1.unloadGQty" /></div>
                                <div class="Ordertable-cell " style="font-weight: bold;width:130px;"><input type="text" class="form-control LDQty" value="@item1.unloadDQty" /></div>
                                <div class="Ordertable-cell previousUnLoadOty hidden" style="font-weight: bold;width:130px;"> @(item1.unloadGQty+item1.unloadDQty)</div>
                                <div class="Ordertable-cell Qty" style="font-weight: bold;width:145px;">@item1.Qty</div>
                                <div class="Ordertable-cell Delivery" style="font-weight: bold;width:90px;">@item1.Delivery</div>
                                <div class="Ordertable-cell" style="font-weight: bold;width:100px;">@item1.Date</div>
                                <div class="Ordertable-cell" style="font-weight: bold;width:100px;">@item1.From_Name</div>
                                <div class="Ordertable-cell" style="font-weight: bold;width:100px;">@item1.To_Name</div>
                                <div class="Ordertable-cell Weight" style="font-weight: bold;width:100px;">@item1.Weight.ToString("0.00")</div>
                                <div class="Ordertable-cell " style="font-weight: bold;width:130px;">@item1.ChargeType</div>
                                <div class="Ordertable-cell " style="font-weight: bold;width:130px;">@item1.PorductType</div>
                                <div class="Ordertable-cell " style="font-weight: bold;width:185px;">@item1.Consignor</div>
                                <div class="Ordertable-cell " style="font-weight: bold;width:185px;">@item1.Consignee</div>
                                <div class="Ordertable-cell UnWeight hidden" style="font-weight: bold;width:185px;">@item1.UnWeight</div>
                                <div class="hidden Ordertable-cell Recorkey" style="background-color: aquamarine;text-align: center;font-weight: bold;color: #ad225c;width:120px;">@item1.recordkey</div>

                            </div>
                        }
                    </div>
                </div>
                @*<div id="Footer">
                <div class="form-group">
                    <div class="col-md-offset-3 col-md-1" style="font-weight: bold;text-align:center;color: red;">Total -:</div>
                    <div class="col-md-2" style="font-weight: bold;">Quantity :<label id="SaveLcComboTotalQty" style="padding-left: 15px;font-weight: bold;color: red;">0</label></div>
                    <div class="col-md-2" style="font-weight: bold;">Weight :<label id="SaveLcComboTotalWeight" style="padding-left: 15px;font-weight: bold;color: red;">0</label><label style="padding-left: 15px;font-weight: bold;color: red;">Kgs</label></div>
                </div>
            </div>*@
                <br />
            }
        </div>
    </div>
    <br />
}


