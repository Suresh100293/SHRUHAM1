@model TFATERPWebApplication.Areas.Logistics.Models.DeliveryVM
@using Common;
@{
    ViewBag.Title = "Delivery Master";
    Layout = null;
}
<script src="@Url.Content("~/Content/js/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Content/js/jquery.constrain.js")" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $(".btnShow").click(function (event) {
            
             var url = '@Url.Action("ViewImage")';
            event.preventDefault();
            var ModelData = {};
            ModelData["AttachFMNo"] = this.id;

            var DTO = { mModel: ModelData };
            $.ajax({
                type: "POST",
                dataType: "json",
                data: JSON.stringify(DTO),
                cache: false,
                url: url,
                contentType: "application/json; charset=utf-8",
                beforeSend: function () {
                    $('.spinner').show();
                },
                success: function (data) {
                    var LoadDownLoadFiles = $("#updTfatsearchDiv1");
                    $("#ErrorMessage").hide();
                    $('.spinner').hide();
                    $('#updTfatsearch1').modal('show');
                    LoadDownLoadFiles.html('');
                    LoadDownLoadFiles.html(data.Html);
                },
            });
        });
    });
</script>

<table class="">
    <tr>
        <td style="border: 1px solid #ddd;">
            <button class="btn btn-info circle" style="font-size: 13px;padding:25px 12px;" id="btnAttachment" data-toggle="modal" data-target="#Attachmentmodal"><i class="glyphicon glyphicon-paperclip icon" style="font-size: 2em;"></i></button>
        </td>
        @if (Model.attachments != null)
        {
            foreach (var item in Model.attachments)
            {
                <td style="text-align-last: center;border: 1px solid #ddd;">
                    @{
                        string imageBase64 = Convert.ToBase64String(item.Image);
                        string imageSrc = string.Format("data:image/gif;base64,{0}", imageBase64);
                        <a class="btnShow" id="@item.AttachFMNo" style="margin-left:3px;"><img src="@imageSrc" alt=@item.FileName class="img-thumbnail" style="height:85px;width:75px;" /></a>
                    }
                </td>
            }
        }

    </tr>
</table>

