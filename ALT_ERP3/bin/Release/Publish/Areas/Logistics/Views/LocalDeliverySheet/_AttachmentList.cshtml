@model TFATERPWebApplication.Areas.Logistics.Models.LocalDeliverySheetVM

<script type="text/javascript">
    $(document).ready(function ()
    {
        $(".ShortCutImageShow").click(function (event) {
            
             var url = '@Url.Action("ViewImage")';
            event.preventDefault();
            var ModelData = {};
            ModelData["AttachFMNo"] = this.id;

            var DTO = { mModel: ModelData };
            $.ajax({
                type: "POST",
                dataType: "json",
                data: JSON.stringify(DTO),
                cache: false,
                url: url,
                contentType: "application/json; charset=utf-8",
                beforeSend: function () {
                    $('.spinner').show();
                },
                success: function (data) {
                    var LoadDownLoadFiles = $("#updTfatsearchDiv1");
                    $("#ErrorMessage").hide();
                    $('.spinner').hide();
                    $('#updTfatsearch1').modal('show');
                    //$('#AllVehicleRate').html('');
                    //$('#AllVehicleRate').html(data.Html);
                    LoadDownLoadFiles.html('');
                    LoadDownLoadFiles.html(data.Html);
                    @*$("#ImageId").val('@Model.attachmentDocuments.AttachmentCode');*@
                   // $('#updTfatsearchDiv').html(data.Html);
                },
            });
        });
    });
    function Show(value) {
         var url = '@Url.Action("ViewImage")';
            event.preventDefault();
            var ModelData = {};
        ModelData["AttachFMNo"] = value;

            var DTO = { mModel: ModelData };
            $.ajax({
                type: "POST",
                dataType: "json",
                data: JSON.stringify(DTO),
                cache: false,
                url: url,
                contentType: "application/json; charset=utf-8",
                beforeSend: function () {
                    $('.spinner').show();
                },
                success: function (data) {
                    var LoadDownLoadFiles = $("#updTfatsearchDiv1");
                    $("#ErrorMessage").hide();
                    $('.spinner').hide();
                    $('#updTfatsearch1').modal('show');
                    //$('#AllVehicleRate').html('');
                    //$('#AllVehicleRate').html(data.Html);
                    LoadDownLoadFiles.html('');
                    LoadDownLoadFiles.html(data.Html);
                    @*$("#ImageId").val('@Model.attachmentDocuments.AttachmentCode');*@
                   // $('#updTfatsearchDiv').html(data.Html);
                },
            });
    }
</script>
<table class="">
    <tr>
        <td style="border: 1px solid #ddd;">
            <button class="btn btn-info circle" style="font-size: 13px;padding:3px 12px;" id="btnAttachment" data-toggle="modal" data-target="#Attachmentmodal"><i class="glyphicon glyphicon-paperclip icon" style="font-size: 2em;"></i></button>
        </td>
        @if (Model.attachments != null)
        {
            foreach (var item in Model.attachments)
            {
                <td style="text-align-last: center;border: 1px solid #ddd;">
                    @{
                        string imageBase64 = Convert.ToBase64String(item.Image);
                        string imageSrc = string.Format("data:image/gif;base64,{0}", imageBase64);
                        <a class="ShortCutImageShow"  id="@item.AttachFMNo" style="margin-left:3px;"><img src="@imageSrc" alt=@item.FileName class="img-thumbnail" style="height:77px;width:90px;" /></a>
                    }
                </td>
            }
        }

    </tr>
</table>

<!--View Modal -->
<div class="example-modal">
    <div id="ShowIMG" class="modal modal-default">
        <div class="modal-dialog" style="width:1080px;">
            <div id="ShowIMGDiv">
                @*@Html.Partial("ImageView")*@
            </div>
        </div>
    </div>
</div>

